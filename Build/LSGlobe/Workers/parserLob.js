/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2017 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
/**
@license
mersenne-twister.js - https://gist.github.com/banksean/300494

   Copyright (C) 1997 - 2002, Makoto Matsumoto and Takuji Nishimura,
   All rights reserved.

   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:

     1. Redistributions of source code must retain the above copyright
        notice, this list of conditions and the following disclaimer.

     2. Redistributions in binary form must reproduce the above copyright
        notice, this list of conditions and the following disclaimer in the
        documentation and/or other materials provided with the distribution.

     3. The names of its contributors may not be used to endorse or promote
        products derived from this software without specific prior written
        permission.

   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
   "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
   LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
   A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
   CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
   EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
   PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
   PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
   LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/**
  @license
  when.js - https://github.com/cujojs/when

  MIT License (c) copyright B Cavalier & J Hann

 * A lightweight CommonJS Promises/A and when() implementation
 * when is part of the cujo.js family of libraries (http://cujojs.com/)
 *
 * Licensed under the MIT License at:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * @version 1.7.1
 */

/**
@license
sprintf.js from the php.js project - https://github.com/kvz/phpjs
Directly from https://github.com/kvz/phpjs/blob/master/functions/strings/sprintf.js

php.js is copyright 2012 Kevin van Zonneveld.

Portions copyright Brett Zamir (http://brett-zamir.me), Kevin van Zonneveld
(http://kevin.vanzonneveld.net), Onno Marsman, Theriault, Michael White
(http://getsprink.com), Waldo Malqui Silva, Paulo Freitas, Jack, Jonas
Raoni Soares Silva (http://www.jsfromhell.com), Philip Peterson, Legaev
Andrey, Ates Goral (http://magnetiq.com), Alex, Ratheous, Martijn Wieringa,
Rafa? Kukawski (http://blog.kukawski.pl), lmeyrick
(https://sourceforge.net/projects/bcmath-js/), Nate, Philippe Baumann,
Enrique Gonzalez, Webtoolkit.info (http://www.webtoolkit.info/), Carlos R.
L. Rodrigues (http://www.jsfromhell.com), Ash Searle
(http://hexmen.com/blog/), Jani Hartikainen, travc, Ole Vrijenhoek,
Erkekjetter, Michael Grier, Rafa? Kukawski (http://kukawski.pl), Johnny
Mast (http://www.phpvrouwen.nl), T.Wild, d3x,
http://stackoverflow.com/questions/57803/how-to-convert-decimal-to-hex-in-javascript,
Rafa? Kukawski (http://blog.kukawski.pl/), stag019, pilus, WebDevHobo
(http://webdevhobo.blogspot.com/), marrtins, GeekFG
(http://geekfg.blogspot.com), Andrea Giammarchi
(http://webreflection.blogspot.com), Arpad Ray (mailto:arpad@php.net),
gorthaur, Paul Smith, Tim de Koning (http://www.kingsquare.nl), Joris, Oleg
Eremeev, Steve Hilder, majak, gettimeofday, KELAN, Josh Fraser
(http://onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/),
Marc Palau, Martin
(http://www.erlenwiese.de/), Breaking Par Consulting Inc
(http://www.breakingpar.com/bkp/home.nsf/0/87256B280015193F87256CFB006C45F7),
Chris, Mirek Slugen, saulius, Alfonso Jimenez
(http://www.alfonsojimenez.com), Diplom@t (http://difane.com/), felix,
Mailfaker (http://www.weedem.fr/), Tyler Akins (http://rumkin.com), Caio
Ariede (http://caioariede.com), Robin, Kankrelune
(http://www.webfaktory.info/), Karol Kowalski, Imgen Tata
(http://www.myipdf.com/), mdsjack (http://www.mdsjack.bo.it), Dreamer,
Felix Geisendoerfer (http://www.debuggable.com/felix), Lars Fischer, AJ,
David, Aman Gupta, Michael White, Public Domain
(http://www.json.org/json2.js), Steven Levithan
(http://blog.stevenlevithan.com), Sakimori, Pellentesque Malesuada,
Thunder.m, Dj (http://phpjs.org/functions/htmlentities:425#comment_134018),
Steve Clay, David James, Francois, class_exists, nobbler, T. Wild, Itsacon
(http://www.itsacon.net/), date, Ole Vrijenhoek (http://www.nervous.nl/),
Fox, Raphael (Ao RUDLER), Marco, noname, Mateusz "loonquawl" Zalega, Frank
Forte, Arno, ger, mktime, john (http://www.jd-tech.net), Nick Kolosov
(http://sammy.ru), marc andreu, Scott Cariss, Douglas Crockford
(http://javascript.crockford.com), madipta, Slawomir Kaniecki,
ReverseSyntax, Nathan, Alex Wilson, kenneth, Bayron Guevara, Adam Wallner
(http://web2.bitbaro.hu/), paulo kuong, jmweb, Lincoln Ramsay, djmix,
Pyerre, Jon Hohle, Thiago Mata (http://thiagomata.blog.com), lmeyrick
(https://sourceforge.net/projects/bcmath-js/this.), Linuxworld, duncan,
Gilbert, Sanjoy Roy, Shingo, sankai, Oskar Larsson H?gfeldt
(http://oskar-lh.name/), Denny Wardhana, 0m3r, Everlasto, Subhasis Deb,
josh, jd, Pier Paolo Ramon (http://www.mastersoup.com/), P, merabi, Soren
Hansen, Eugene Bulkin (http://doubleaw.com/), Der Simon
(http://innerdom.sourceforge.net/), echo is bad, Ozh, XoraX
(http://www.xorax.info), EdorFaus, JB, J A R, Marc Jansen, Francesco, LH,
Stoyan Kyosev (http://www.svest.org/), nord_ua, omid
(http://phpjs.org/functions/380:380#comment_137122), Brad Touesnard, MeEtc
(http://yass.meetcweb.com), Peter-Paul Koch
(http://www.quirksmode.org/js/beat.html), Olivier Louvignes
(http://mg-crea.com/), T0bsn, Tim Wiel, Bryan Elliott, Jalal Berrami,
Martin, JT, David Randall, Thomas Beaucourt (http://www.webapp.fr), taith,
vlado houba, Pierre-Luc Paour, Kristof Coomans (SCK-CEN Belgian Nucleair
Research Centre), Martin Pool, Kirk Strobeck, Rick Waldron, Brant Messenger
(http://www.brantmessenger.com/), Devan Penner-Woelk, Saulo Vallory, Wagner
B. Soares, Artur Tchernychev, Valentina De Rosa, Jason Wong
(http://carrot.org/), Christoph, Daniel Esteban, strftime, Mick@el, rezna,
Simon Willison (http://simonwillison.net), Anton Ongson, Gabriel Paderni,
Marco van Oort, penutbutterjelly, Philipp Lenssen, Bjorn Roesbeke
(http://www.bjornroesbeke.be/), Bug?, Eric Nagel, Tomasz Wesolowski,
Evertjan Garretsen, Bobby Drake, Blues (http://tech.bluesmoon.info/), Luke
Godfrey, Pul, uestla, Alan C, Ulrich, Rafal Kukawski, Yves Sucaet,
sowberry, Norman "zEh" Fuchs, hitwork, Zahlii, johnrembo, Nick Callen,
Steven Levithan (stevenlevithan.com), ejsanders, Scott Baker, Brian Tafoya
(http://www.premasolutions.com/), Philippe Jausions
(http://pear.php.net/user/jausions), Aidan Lister
(http://aidanlister.com/), Rob, e-mike, HKM, ChaosNo1, metjay, strcasecmp,
strcmp, Taras Bogach, jpfle, Alexander Ermolaev
(http://snippets.dzone.com/user/AlexanderErmolaev), DxGx, kilops, Orlando,
dptr1988, Le Torbi, James (http://www.james-bell.co.uk/), Pedro Tainha
(http://www.pedrotainha.com), James, Arnout Kazemier
(http://www.3rd-Eden.com), Chris McMacken, gabriel paderni, Yannoo,
FGFEmperor, baris ozdil, Tod Gentille, Greg Frazier, jakes, 3D-GRAF, Allan
Jensen (http://www.winternet.no), Howard Yeend, Benjamin Lupton, davook,
daniel airton wermann (http://wermann.com.br), Atli T¨®r, Maximusya, Ryan
W Tenney (http://ryan.10e.us), Alexander M Beedie, fearphage
(http://http/my.opera.com/fearphage/), Nathan Sepulveda, Victor, Matteo,
Billy, stensi, Cord, Manish, T.J. Leahy, Riddler
(http://www.frontierwebdev.com/), Rafa? Kukawski, FremyCompany, Matt
Bradley, Tim de Koning, Luis Salazar (http://www.freaky-media.com/), Diogo
Resende, Rival, Andrej Pavlovic, Garagoth, Le Torbi
(http://www.letorbi.de/), Dino, Josep Sanz (http://www.ws3.es/), rem,
Russell Walker (http://www.nbill.co.uk/), Jamie Beck
(http://www.terabit.ca/), setcookie, Michael, YUI Library:
http://developer.yahoo.com/yui/docs/YAHOO.util.DateLocale.html, Blues at
http://hacks.bluesmoon.info/strftime/strftime.js, Ben
(http://benblume.co.uk/), DtTvB
(http://dt.in.th/2008-09-16.string-length-in-bytes.html), Andreas, William,
meo, incidence, Cagri Ekin, Amirouche, Amir Habibi
(http://www.residence-mixte.com/), Luke Smith (http://lucassmith.name),
Kheang Hok Chin (http://www.distantia.ca/), Jay Klehr, Lorenzo Pisani,
Tony, Yen-Wei Liu, Greenseed, mk.keck, Leslie Hoare, dude, booeyOH, Ben
Bryan

Licensed under the MIT (MIT-LICENSE.txt) license.

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL KEVIN VAN ZONNEVELD BE LIABLE FOR ANY CLAIM, DAMAGES
OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
*/

/**
 * @license
 *
 * Grauw URI utilities
 *
 * See: http://hg.grauw.nl/grauw-lib/file/tip/src/uri.js
 *
 * @author Laurens Holst (http://www.grauw.nl/)
 *
 *   Copyright 2012 Laurens Holst
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 *
 */

/*!

JSZip - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2014 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/

!function(){define("Core/defined",[],function(){"use strict";function e(e){return void 0!==e&&null!==e}return e}),define("Core/DeveloperError",["./defined"],function(e){"use strict";function t(e){this.name="DeveloperError",this.message=e;var t;try{throw new Error}catch(e){t=e.stack}this.stack=t}return e(Object.create)&&(t.prototype=Object.create(Error.prototype),t.prototype.constructor=t),t.prototype.toString=function(){var t=this.name+": "+this.message;return e(this.stack)&&(t+="\n"+this.stack.toString()),t},t.throwInstantiationError=function(){throw new t("This function defines an interface and should not be called directly.")},t}),define("Core/Check",["./defined","./DeveloperError"],function(e,t){"use strict";function r(e){return e+" is required, actual value was undefined"}function n(e,t,r){return"Expected "+r+" to be typeof "+t+", actual typeof was "+e}var i={};return i.typeOf={},i.defined=function(n,i){if(!e(i))throw new t(r(n))},i.typeOf.func=function(e,r){if("function"!=typeof r)throw new t(n(typeof r,"function",e))},i.typeOf.string=function(e,r){if("string"!=typeof r)throw new t(n(typeof r,"string",e))},i.typeOf.number=function(e,r){if("number"!=typeof r)throw new t(n(typeof r,"number",e))},i.typeOf.number.lessThan=function(e,r,n){if(i.typeOf.number(e,r),r>=n)throw new t("Expected "+e+" to be less than "+n+", actual value was "+r)},i.typeOf.number.lessThanOrEquals=function(e,r,n){if(i.typeOf.number(e,r),r>n)throw new t("Expected "+e+" to be less than or equal to "+n+", actual value was "+r)},i.typeOf.number.greaterThan=function(e,r,n){if(i.typeOf.number(e,r),r<=n)throw new t("Expected "+e+" to be greater than "+n+", actual value was "+r)},i.typeOf.number.greaterThanOrEquals=function(e,r,n){if(i.typeOf.number(e,r),r<n)throw new t("Expected "+e+" to be greater than or equal to"+n+", actual value was "+r)},i.typeOf.object=function(e,r){if("object"!=typeof r)throw new t(n(typeof r,"object",e))},i.typeOf.bool=function(e,r){if("boolean"!=typeof r)throw new t(n(typeof r,"boolean",e))},i.typeOf.number.equals=function(e,r,n,a){if(i.typeOf.number(e,n),i.typeOf.number(r,a),n!==a)throw new t(e+" must be equal to "+r+", the actual values are "+n+" and "+a)},i}),define("Core/freezeObject",["./defined"],function(e){"use strict";var t=Object.freeze;return e(t)||(t=function(e){return e}),t}),define("Core/defaultValue",["./freezeObject"],function(e){"use strict";function t(e,t){return void 0!==e&&null!==e?e:t}return t.EMPTY_OBJECT=e({}),t}),define("ThirdParty/mersenne-twister",[],function(){var e=function(e){void 0==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(e)};return e.prototype.init_genrand=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){var e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},e.prototype.genrand_int32=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var r;for(this.mti==this.N+1&&this.init_genrand(5489),r=0;r<this.N-this.M;r++)e=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+this.M]^e>>>1^t[1&e];for(;r<this.N-1;r++)e=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>>18,e>>>0},e.prototype.random=function(){return this.genrand_int32()*(1/4294967296)},e}),define("Core/Math",["../ThirdParty/mersenne-twister","./defaultValue","./defined","./DeveloperError"],function(e,t,r,n){"use strict";function i(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t}var a={};a.EPSILON1=.1,a.EPSILON2=.01,a.EPSILON3=.001,a.EPSILON4=1e-4,a.EPSILON5=1e-5,a.EPSILON6=1e-6,a.EPSILON7=1e-7,a.EPSILON8=1e-8,a.EPSILON9=1e-9,a.EPSILON10=1e-10,a.EPSILON11=1e-11,a.EPSILON12=1e-12,a.EPSILON13=1e-13,a.EPSILON14=1e-14,a.EPSILON15=1e-15,a.EPSILON16=1e-16,a.EPSILON17=1e-17,a.EPSILON18=1e-18,a.EPSILON19=1e-19,a.EPSILON20=1e-20,a.GRAVITATIONALPARAMETER=3986004418e5,a.SOLAR_RADIUS=6955e5,a.LUNAR_RADIUS=1737400,a.SIXTY_FOUR_KILOBYTES=65536,a.sign=function(e){return e>0?1:e<0?-1:0},a.signNotZero=function(e){return e<0?-1:1},a.toSNorm=function(e,r){return r=t(r,255),Math.round((.5*a.clamp(e,-1,1)+.5)*r)},a.fromSNorm=function(e,r){return r=t(r,255),a.clamp(e,0,r)/r*2-1},a.sinh=function(e){var t=Math.pow(Math.E,e),r=Math.pow(Math.E,-1*e);return.5*(t-r)},a.cosh=function(e){var t=Math.pow(Math.E,e),r=Math.pow(Math.E,-1*e);return.5*(t+r)},a.lerp=function(e,t,r){return(1-r)*e+r*t},a.PI=Math.PI,a.ONE_OVER_PI=1/Math.PI,a.PI_OVER_TWO=.5*Math.PI,a.PI_OVER_THREE=Math.PI/3,a.PI_OVER_FOUR=Math.PI/4,a.PI_OVER_SIX=Math.PI/6,a.THREE_PI_OVER_TWO=3*Math.PI*.5,a.TWO_PI=2*Math.PI,a.ONE_OVER_TWO_PI=1/(2*Math.PI),a.RADIANS_PER_DEGREE=Math.PI/180,a.DEGREES_PER_RADIAN=180/Math.PI,a.RADIANS_PER_ARCSECOND=a.RADIANS_PER_DEGREE/3600,a.toRadians=function(e){return e*a.RADIANS_PER_DEGREE},a.toDegrees=function(e){return e*a.DEGREES_PER_RADIAN},a.convertLongitudeRange=function(e){var t=a.TWO_PI,r=e-Math.floor(e/t)*t;return r<-Math.PI?r+t:r>=Math.PI?r-t:r},a.clampToLatitudeRange=function(e){return a.clamp(e,-1*a.PI_OVER_TWO,a.PI_OVER_TWO)},a.negativePiToPi=function(e){return a.zeroToTwoPi(e+a.PI)-a.PI},a.zeroToTwoPi=function(e){var t=a.mod(e,a.TWO_PI);return Math.abs(t)<a.EPSILON14&&Math.abs(e)>a.EPSILON14?a.TWO_PI:t},a.mod=function(e,t){return(e%t+t)%t},a.equalsEpsilon=function(e,r,n,i){i=t(i,n);var a=Math.abs(e-r);return a<=i||a<=n*Math.max(Math.abs(e),Math.abs(r))};var o=[1];a.factorial=function(e){var t=o.length;if(e>=t)for(var r=o[t-1],n=t;n<=e;n++)o.push(r*n);return o[e]},a.incrementWrap=function(e,r,n){return n=t(n,0),++e,e>r&&(e=n),e},a.isPowerOfTwo=function(e){return 0!==e&&0===(e&e-1)},a.nextPowerOfTwo=function(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e,e},a.clamp=function(e,t,r){return e<t?t:e>r?r:e};var s=new e;return a.setRandomNumberSeed=function(t){s=new e(t)},a.nextRandomNumber=function(){return s.random()},a.randomBetween=function(e,t){return a.nextRandomNumber()*(t-e)+e},a.acosClamped=function(e){return Math.acos(a.clamp(e,-1,1))},a.asinClamped=function(e){return Math.asin(a.clamp(e,-1,1))},a.chordLength=function(e,t){return 2*t*Math.sin(.5*e)},a.logBase=function(e,t){return Math.log(e)/Math.log(t)},a.cbrt=r(Math.cbrt)?Math.cbrt:i,a.fog=function(e,t){var r=e*t;return 1-Math.exp(-(r*r))},a}),define("Core/Cartesian3",["./Check","./defaultValue","./defined","./DeveloperError","./freezeObject","./Math"],function(e,t,r,n,i,a){"use strict";function o(e,r,n){this.x=t(e,0),this.y=t(r,0),this.z=t(n,0)}o.fromSpherical=function(e,n){r(n)||(n=new o);var i=e.clock,a=e.cone,s=t(e.magnitude,1),u=s*Math.sin(a);return n.x=u*Math.cos(i),n.y=u*Math.sin(i),n.z=s*Math.cos(a),n},o.fromElements=function(e,t,n,i){return r(i)?(i.x=e,i.y=t,i.z=n,i):new o(e,t,n)},o.clone=function(e,t){if(r(e))return r(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new o(e.x,e.y,e.z)},o.fromCartesian4=o.clone,o.packedLength=3,o.pack=function(e,r,n){return n=t(n,0),r[n++]=e.x,r[n++]=e.y,r[n]=e.z,r},o.unpack=function(e,n,i){return n=t(n,0),r(i)||(i=new o),i.x=e[n++],i.y=e[n++],i.z=e[n],i},o.packArray=function(e,t){var n=e.length;r(t)?t.length=3*n:t=new Array(3*n);for(var i=0;i<n;++i)o.pack(e[i],t,3*i);return t},o.unpackArray=function(e,t){var n=e.length;r(t)?t.length=n/3:t=new Array(n/3);for(var i=0;i<n;i+=3){var a=i/3;t[a]=o.unpack(e,i,t[a])}return t},o.fromArray=o.unpack,o.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)},o.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)},o.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r},o.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r},o.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},o.magnitude=function(e){return Math.sqrt(o.magnitudeSquared(e))};var s=new o;o.distance=function(e,t){return o.subtract(e,t,s),o.magnitude(s)},o.distanceSquared=function(e,t){return o.subtract(e,t,s),o.magnitudeSquared(s)},o.normalize=function(e,t){var r=o.magnitude(e);return 0===r?t=o.ZERO:(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,t)},o.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},o.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r},o.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r},o.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r},o.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r},o.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r},o.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r},o.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t},o.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var u=new o;o.lerp=function(e,t,r,n){return o.multiplyByScalar(t,r,u),n=o.multiplyByScalar(e,1-r,n),o.add(u,n,n)};var c=new o,l=new o;o.angleBetween=function(e,t){o.normalize(e,c),o.normalize(t,l);var r=o.dot(c,l),n=o.magnitude(o.cross(c,l,c));return Math.atan2(n,r)};var d=new o;o.mostOrthogonalAxis=function(e,t){var r=o.normalize(e,d);return o.abs(r,r),t=r.x<=r.y?r.x<=r.z?o.clone(o.UNIT_X,t):o.clone(o.UNIT_Z,t):r.y<=r.z?o.clone(o.UNIT_Y,t):o.clone(o.UNIT_Z,t)},o.projectVector=function(e,t,r){var n=o.dot(e,t)/o.dot(t,t);return o.multiplyByScalar(t,n,r)},o.equals=function(e,t){return e===t||r(e)&&r(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z},o.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]},o.equalsEpsilon=function(e,t,n,i){return e===t||r(e)&&r(t)&&a.equalsEpsilon(e.x,t.x,n,i)&&a.equalsEpsilon(e.y,t.y,n,i)&&a.equalsEpsilon(e.z,t.z,n,i)},o.cross=function(e,t,r){var n=e.x,i=e.y,a=e.z,o=t.x,s=t.y,u=t.z,c=i*u-a*s,l=a*o-n*u,d=n*s-i*o;return r.x=c,r.y=l,r.z=d,r},o.fromDegrees=function(e,t,r,n,i){return e=a.toRadians(e),t=a.toRadians(t),o.fromRadians(e,t,r,n,i)};var f=new o,h=new o,p=new o(40680631590769,40680631590769,40408299984661.445);return o.fromRadians=function(e,n,i,a,s){i=t(i,0);var u=r(a)?a.radiiSquared:p,c=Math.cos(n);f.x=c*Math.cos(e),f.y=c*Math.sin(e),f.z=Math.sin(n),f=o.normalize(f,f),o.multiplyComponents(u,f,h);var l=Math.sqrt(o.dot(f,h));return h=o.divideByScalar(h,l,h),f=o.multiplyByScalar(f,i,f),r(s)||(s=new o),o.add(h,f,s)},o.fromDegreesArray=function(e,t,n){var i=e.length;r(n)?n.length=i/2:n=new Array(i/2);for(var a=0;a<i;a+=2){var s=e[a],u=e[a+1],c=a/2;n[c]=o.fromDegrees(s,u,0,t,n[c])}return n},o.fromRadiansArray=function(e,t,n){var i=e.length;r(n)?n.length=i/2:n=new Array(i/2);for(var a=0;a<i;a+=2){var s=e[a],u=e[a+1],c=a/2;n[c]=o.fromRadians(s,u,0,t,n[c])}return n},o.fromDegreesArrayHeights=function(e,t,n){var i=e.length;r(n)?n.length=i/3:n=new Array(i/3);for(var a=0;a<i;a+=3){var s=e[a],u=e[a+1],c=e[a+2],l=a/3;n[l]=o.fromDegrees(s,u,c,t,n[l])}return n},o.fromRadiansArrayHeights=function(e,t,n){var i=e.length;r(n)?n.length=i/3:n=new Array(i/3);for(var a=0;a<i;a+=3){var s=e[a],u=e[a+1],c=e[a+2],l=a/3;n[l]=o.fromRadians(s,u,c,t,n[l])}return n},o.ZERO=i(new o(0,0,0)),o.UNIT_X=i(new o(1,0,0)),o.UNIT_Y=i(new o(0,1,0)),o.UNIT_Z=i(new o(0,0,1)),o.prototype.clone=function(e){return o.clone(this,e)},o.prototype.equals=function(e){return o.equals(this,e)},o.prototype.equalsEpsilon=function(e,t,r){return o.equalsEpsilon(this,e,t,r)},o.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},o}),define("Core/scaleToGeodeticSurface",["./Cartesian3","./defined","./DeveloperError","./Math"],function(e,t,r,n){"use strict";function i(r,i,s,u,c){var l=r.x,d=r.y,f=r.z,h=i.x,p=i.y,m=i.z,_=l*l*h*h,E=d*d*p*p,y=f*f*m*m,g=_+E+y,v=Math.sqrt(1/g),T=e.multiplyByScalar(r,v,a);if(g<u)return isFinite(v)?e.clone(T,c):void 0;var w=s.x,R=s.y,A=s.z,S=o;S.x=T.x*w*2,S.y=T.y*R*2,S.z=T.z*A*2;var I,O,x,C,N,b,M,U,P,D,L,B=(1-v)*e.magnitude(r)/(.5*e.magnitude(S)),z=0;do{B-=z,x=1/(1+B*w),C=1/(1+B*R),N=1/(1+B*A),b=x*x,M=C*C,U=N*N,P=b*x,D=M*C,L=U*N,I=_*b+E*M+y*U-1,O=_*P*w+E*D*R+y*L*A;var F=-2*O;z=I/F}while(Math.abs(I)>n.EPSILON12);return t(c)?(c.x=l*x,c.y=d*C,c.z=f*N,c):new e(l*x,d*C,f*N)}var a=new e,o=new e;return i}),define("Core/Cartographic",["./Cartesian3","./Check","./defaultValue","./defined","./freezeObject","./Math","./scaleToGeodeticSurface"],function(e,t,r,n,i,a,o){"use strict";function s(e,t,n){this.longitude=r(e,0),this.latitude=r(t,0),this.height=r(n,0)}s.fromRadians=function(e,t,i,a){return i=r(i,0),n(a)?(a.longitude=e,a.latitude=t,a.height=i,a):new s(e,t,i)},s.fromDegrees=function(e,t,r,n){return e=a.toRadians(e),t=a.toRadians(t),s.fromRadians(e,t,r,n)};var u=new e,c=new e,l=new e,d=new e(1/6378137,1/6378137,1/6356752.314245179),f=new e(1/40680631590769,1/40680631590769,1/40408299984661.445),h=a.EPSILON1;return s.fromCartesian=function(t,r,i){var p=n(r)?r.oneOverRadii:d,m=n(r)?r.oneOverRadiiSquared:f,_=n(r)?r._centerToleranceSquared:h,E=o(t,p,m,_,c);if(n(E)){var y=e.multiplyComponents(E,m,u);y=e.normalize(y,y);var g=e.subtract(t,E,l),v=Math.atan2(y.y,y.x),T=Math.asin(y.z),w=a.sign(e.dot(g,t))*e.magnitude(g);return n(i)?(i.longitude=v,i.latitude=T,i.height=w,i):new s(v,T,w)}},s.toCartesian=function(t,r,n){return e.fromRadians(t.longitude,t.latitude,t.height,r,n)},s.clone=function(e,t){if(n(e))return n(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new s(e.longitude,e.latitude,e.height)},s.equals=function(e,t){return e===t||n(e)&&n(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},s.equalsEpsilon=function(e,t,r){return e===t||n(e)&&n(t)&&Math.abs(e.longitude-t.longitude)<=r&&Math.abs(e.latitude-t.latitude)<=r&&Math.abs(e.height-t.height)<=r},s.ZERO=i(new s(0,0,0)),s.prototype.clone=function(e){return s.clone(this,e)},s.prototype.equals=function(e){return s.equals(this,e)},s.prototype.equalsEpsilon=function(e,t){return s.equalsEpsilon(this,e,t)},s.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},s}),define("Core/defineProperties",["./defined"],function(e){"use strict";var t=function(){try{return"x"in Object.defineProperty({},"x",{})}catch(e){return!1}}(),r=Object.defineProperties;return t&&e(r)||(r=function(e){return e}),r}),define("Core/Ellipsoid",["./Cartesian3","./Cartographic","./Check","./defaultValue","./defined","./defineProperties","./DeveloperError","./freezeObject","./Math","./scaleToGeodeticSurface"],function(e,t,r,n,i,a,o,s,u,c){"use strict";function l(t,r,i,a){r=n(r,0),i=n(i,0),a=n(a,0),t._radii=new e(r,i,a),t._radiiSquared=new e(r*r,i*i,a*a),t._radiiToTheFourth=new e(r*r*r*r,i*i*i*i,a*a*a*a),t._oneOverRadii=new e(0===r?0:1/r,0===i?0:1/i,0===a?0:1/a),t._oneOverRadiiSquared=new e(0===r?0:1/(r*r),0===i?0:1/(i*i),0===a?0:1/(a*a)),t._minimumRadius=Math.min(r,i,a),t._maximumRadius=Math.max(r,i,a),t._centerToleranceSquared=u.EPSILON1,0!==t._radiiSquared.z&&(t._squaredXOverSquaredZ=t._radiiSquared.x/t._radiiSquared.z)}function d(e,t,r){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,l(this,e,t,r)}a(d.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),d.clone=function(t,r){if(i(t)){var n=t._radii;return i(r)?(e.clone(n,r._radii),e.clone(t._radiiSquared,r._radiiSquared),e.clone(t._radiiToTheFourth,r._radiiToTheFourth),e.clone(t._oneOverRadii,r._oneOverRadii),e.clone(t._oneOverRadiiSquared,r._oneOverRadiiSquared),r._minimumRadius=t._minimumRadius,r._maximumRadius=t._maximumRadius,r._centerToleranceSquared=t._centerToleranceSquared,r):new d(n.x,n.y,n.z)}},d.fromCartesian3=function(e,t){return i(t)||(t=new d),i(e)?(l(t,e.x,e.y,e.z),t):t},d.WGS84=s(new d(6378137,6378137,6356752.314245179)),d.UNIT_SPHERE=s(new d(1,1,1)),d.MOON=s(new d(u.LUNAR_RADIUS,u.LUNAR_RADIUS,u.LUNAR_RADIUS)),d.prototype.clone=function(e){return d.clone(this,e)},d.packedLength=e.packedLength,d.pack=function(t,r,i){return i=n(i,0),e.pack(t._radii,r,i),r},d.unpack=function(t,r,i){r=n(r,0);var a=e.unpack(t,r);return d.fromCartesian3(a,i)},d.prototype.geocentricSurfaceNormal=e.normalize,d.prototype.geodeticSurfaceNormalCartographic=function(t,r){var n=t.longitude,a=t.latitude,o=Math.cos(a),s=o*Math.cos(n),u=o*Math.sin(n),c=Math.sin(a);return i(r)||(r=new e),r.x=s,r.y=u,r.z=c,e.normalize(r,r)},d.prototype.geodeticSurfaceNormal=function(t,r){return i(r)||(r=new e),r=e.multiplyComponents(t,this._oneOverRadiiSquared,r),e.normalize(r,r)};var f=new e,h=new e;d.prototype.cartographicToCartesian=function(t,r){var n=f,a=h;this.geodeticSurfaceNormalCartographic(t,n),e.multiplyComponents(this._radiiSquared,n,a);var o=Math.sqrt(e.dot(n,a));return e.divideByScalar(a,o,a),e.multiplyByScalar(n,t.height,n),i(r)||(r=new e),e.add(a,n,r)},d.prototype.cartographicArrayToCartesianArray=function(e,t){var r=e.length;i(t)?t.length=r:t=new Array(r);for(var n=0;n<r;n++)t[n]=this.cartographicToCartesian(e[n],t[n]);return t};var p=new e,m=new e,_=new e;return d.prototype.cartesianToCartographic=function(r,n){var a=this.scaleToGeodeticSurface(r,m);if(i(a)){var o=this.geodeticSurfaceNormal(a,p),s=e.subtract(r,a,_),c=Math.atan2(o.y,o.x),l=Math.asin(o.z),d=u.sign(e.dot(s,r))*e.magnitude(s);return i(n)?(n.longitude=c,n.latitude=l,n.height=d,n):new t(c,l,d)}},d.prototype.cartesianArrayToCartographicArray=function(e,t){var r=e.length;i(t)?t.length=r:t=new Array(r);for(var n=0;n<r;++n)t[n]=this.cartesianToCartographic(e[n],t[n]);return t},d.prototype.scaleToGeodeticSurface=function(e,t){return c(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},d.prototype.scaleToGeocentricSurface=function(t,r){i(r)||(r=new e);var n=t.x,a=t.y,o=t.z,s=this._oneOverRadiiSquared,u=1/Math.sqrt(n*n*s.x+a*a*s.y+o*o*s.z);return e.multiplyByScalar(t,u,r)},d.prototype.transformPositionToScaledSpace=function(t,r){return i(r)||(r=new e),e.multiplyComponents(t,this._oneOverRadii,r)},d.prototype.transformPositionFromScaledSpace=function(t,r){return i(r)||(r=new e),e.multiplyComponents(t,this._radii,r)},d.prototype.equals=function(t){return this===t||i(t)&&e.equals(this._radii,t._radii)},d.prototype.toString=function(){return this._radii.toString()},d.prototype.getSurfaceNormalIntersectionWithZAxis=function(t,r,a){r=n(r,0);var o=this._squaredXOverSquaredZ;if(i(a)||(a=new e),a.x=0,a.y=0,a.z=t.z*(1-o),!(Math.abs(a.z)>=this._radii.z-r))return a},d}),define("Core/Intersect",["./freezeObject"],function(e){"use strict";var t={OUTSIDE:-1,INTERSECTING:0,INSIDE:1};return e(t)}),define("Core/AxisAlignedBoundingBox",["./Cartesian3","./Check","./defaultValue","./defined","./Intersect"],function(e,t,r,n,i){"use strict";function a(t,i,a){this.minimum=e.clone(r(t,e.ZERO)),this.maximum=e.clone(r(i,e.ZERO)),n(a)?a=e.clone(a):(a=e.add(this.minimum,this.maximum,new e),e.multiplyByScalar(a,.5,a)),this.center=a}a.fromPoints=function(t,r){if(n(r)||(r=new a),!n(t)||0===t.length)return r.minimum=e.clone(e.ZERO,r.minimum),r.maximum=e.clone(e.ZERO,r.maximum),r.center=e.clone(e.ZERO,r.center),r;for(var i=t[0].x,o=t[0].y,s=t[0].z,u=t[0].x,c=t[0].y,l=t[0].z,d=t.length,f=1;f<d;f++){var h=t[f],p=h.x,m=h.y,_=h.z;i=Math.min(p,i),u=Math.max(p,u),o=Math.min(m,o),c=Math.max(m,c),s=Math.min(_,s),l=Math.max(_,l)}var E=r.minimum;E.x=i,E.y=o,E.z=s;var y=r.maximum;y.x=u,y.y=c,y.z=l;var g=e.add(E,y,r.center);return e.multiplyByScalar(g,.5,g),r},a.clone=function(t,r){if(n(t))return n(r)?(r.minimum=e.clone(t.minimum,r.minimum),r.maximum=e.clone(t.maximum,r.maximum),r.center=e.clone(t.center,r.center),r):new a(t.minimum,t.maximum,t.center)},a.equals=function(t,r){return t===r||n(t)&&n(r)&&e.equals(t.center,r.center)&&e.equals(t.minimum,r.minimum)&&e.equals(t.maximum,r.maximum)};var o=new e;return a.intersectPlane=function(t,r){o=e.subtract(t.maximum,t.minimum,o);var n=e.multiplyByScalar(o,.5,o),a=r.normal,s=n.x*Math.abs(a.x)+n.y*Math.abs(a.y)+n.z*Math.abs(a.z),u=e.dot(t.center,a)+r.distance;return u-s>0?i.INSIDE:u+s<0?i.OUTSIDE:i.INTERSECTING},a.prototype.clone=function(e){return a.clone(this,e)},a.prototype.intersectPlane=function(e){return a.intersectPlane(this,e)},a.prototype.equals=function(e){return a.equals(this,e)},a}),define("Core/GeographicProjection",["./Cartesian3","./Cartographic","./defaultValue","./defined","./defineProperties","./DeveloperError","./Ellipsoid"],function(e,t,r,n,i,a,o){"use strict";function s(e){this._ellipsoid=r(e,o.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}return i(s.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),s.prototype.project=function(t,r){var i=this._semimajorAxis,a=t.longitude*i,o=t.latitude*i,s=t.height;return n(r)?(r.x=a,r.y=o,r.z=s,r):new e(a,o,s)},s.prototype.unproject=function(e,r){var i=this._oneOverSemimajorAxis,a=e.x*i,o=e.y*i,s=e.z;return n(r)?(r.longitude=a,r.latitude=o,r.height=s,r):new t(a,o,s)},s}),define("Core/Interval",["./defaultValue"],function(e){"use strict";function t(t,r){this.start=e(t,0),this.stop=e(r,0)}return t}),define("Core/Matrix3",["./Cartesian3","./Check","./defaultValue","./defined","./defineProperties","./DeveloperError","./freezeObject","./Math"],function(e,t,r,n,i,a,o,s){"use strict";function u(e,t,n,i,a,o,s,u,c){this[0]=r(e,0),this[1]=r(i,0),this[2]=r(s,0),this[3]=r(t,0),this[4]=r(a,0),this[5]=r(u,0),this[6]=r(n,0),this[7]=r(o,0),this[8]=r(c,0)}function c(e){for(var t=0,r=0;r<9;++r){var n=e[r];t+=n*n}return Math.sqrt(t)}function l(e){for(var t=0,r=0;r<3;++r){var n=e[u.getElementIndex(m[r],p[r])];t+=2*n*n}return Math.sqrt(t)}function d(e,t){for(var r=s.EPSILON15,n=0,i=1,a=0;a<3;++a){var o=Math.abs(e[u.getElementIndex(m[a],p[a])]);o>n&&(i=a,n=o)}var c=1,l=0,d=p[i],f=m[i];if(Math.abs(e[u.getElementIndex(f,d)])>r){var h,_=e[u.getElementIndex(f,f)],E=e[u.getElementIndex(d,d)],y=e[u.getElementIndex(f,d)],g=(_-E)/2/y;h=g<0?-1/(-g+Math.sqrt(1+g*g)):1/(g+Math.sqrt(1+g*g)),c=1/Math.sqrt(1+h*h),l=h*c}return t=u.clone(u.IDENTITY,t),t[u.getElementIndex(d,d)]=t[u.getElementIndex(f,f)]=c,t[u.getElementIndex(f,d)]=l,t[u.getElementIndex(d,f)]=-l,t}u.packedLength=9,u.pack=function(e,t,n){return n=r(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t},u.unpack=function(e,t,i){return t=r(t,0),n(i)||(i=new u),i[0]=e[t++],i[1]=e[t++],i[2]=e[t++],i[3]=e[t++],i[4]=e[t++],i[5]=e[t++],i[6]=e[t++],i[7]=e[t++],i[8]=e[t++],i},u.clone=function(e,t){if(n(e))return n(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new u(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},u.fromArray=function(e,t,i){return t=r(t,0),n(i)||(i=new u),i[0]=e[t],i[1]=e[t+1],i[2]=e[t+2],i[3]=e[t+3],i[4]=e[t+4],i[5]=e[t+5],i[6]=e[t+6],i[7]=e[t+7],i[8]=e[t+8],i},u.fromColumnMajorArray=function(e,t){return u.clone(e,t)},u.fromRowMajorArray=function(e,t){return n(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new u(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},u.fromQuaternion=function(e,t){var r=e.x*e.x,i=e.x*e.y,a=e.x*e.z,o=e.x*e.w,s=e.y*e.y,c=e.y*e.z,l=e.y*e.w,d=e.z*e.z,f=e.z*e.w,h=e.w*e.w,p=r-s-d+h,m=2*(i-f),_=2*(a+l),E=2*(i+f),y=-r+s-d+h,g=2*(c-o),v=2*(a-l),T=2*(c+o),w=-r-s+d+h;return n(t)?(t[0]=p,t[1]=E,t[2]=v,t[3]=m,t[4]=y,t[5]=T,t[6]=_,t[7]=g,t[8]=w,t):new u(p,m,_,E,y,g,v,T,w)},u.fromHeadingPitchRoll=function(e,t){var r=Math.cos(-e.pitch),i=Math.cos(-e.heading),a=Math.cos(e.roll),o=Math.sin(-e.pitch),s=Math.sin(-e.heading),c=Math.sin(e.roll),l=r*i,d=-a*s+c*o*i,f=c*s+a*o*i,h=r*s,p=a*i+c*o*s,m=-c*i+a*o*s,_=-o,E=c*r,y=a*r;return n(t)?(t[0]=l,t[1]=h,t[2]=_,t[3]=d,t[4]=p,t[5]=E,t[6]=f,t[7]=m,t[8]=y,t):new u(l,d,f,h,p,m,_,E,y)},u.fromScale=function(e,t){return n(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new u(e.x,0,0,0,e.y,0,0,0,e.z)},u.fromUniformScale=function(e,t){return n(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new u(e,0,0,0,e,0,0,0,e)},u.fromCrossProduct=function(e,t){return n(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new u(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},u.fromRotationX=function(e,t){var r=Math.cos(e),i=Math.sin(e);return n(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=r,t[5]=i,t[6]=0,t[7]=-i,t[8]=r,t):new u(1,0,0,0,r,-i,0,i,r)},u.fromRotationY=function(e,t){var r=Math.cos(e),i=Math.sin(e);return n(t)?(t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=1,t[5]=0,t[6]=i,t[7]=0,t[8]=r,t):new u(r,0,i,0,1,0,-i,0,r)},u.fromRotationZ=function(e,t){var r=Math.cos(e),i=Math.sin(e);return n(t)?(t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new u(r,-i,0,i,r,0,0,0,1)},u.toArray=function(e,t){return n(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},u.getElementIndex=function(e,t){return 3*e+t},u.getColumn=function(e,t,r){var n=3*t,i=e[n],a=e[n+1],o=e[n+2];return r.x=i,r.y=a,r.z=o,r},u.setColumn=function(e,t,r,n){n=u.clone(e,n);var i=3*t;return n[i]=r.x,n[i+1]=r.y,n[i+2]=r.z,n},u.getRow=function(e,t,r){var n=e[t],i=e[t+3],a=e[t+6];return r.x=n,r.y=i,r.z=a,r},u.setRow=function(e,t,r,n){return n=u.clone(e,n),n[t]=r.x,n[t+3]=r.y,n[t+6]=r.z,n};var f=new e;u.getScale=function(t,r){return r.x=e.magnitude(e.fromElements(t[0],t[1],t[2],f)),r.y=e.magnitude(e.fromElements(t[3],t[4],t[5],f)),r.z=e.magnitude(e.fromElements(t[6],t[7],t[8],f)),r};var h=new e;u.getMaximumScale=function(t){return u.getScale(t,h),e.maximumComponent(h)},u.multiply=function(e,t,r){var n=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],i=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],a=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],o=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],u=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],c=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],l=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],d=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=u,r[6]=c,r[7]=l,r[8]=d,r},u.add=function(e,t,r){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r},u.subtract=function(e,t,r){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r},u.multiplyByVector=function(e,t,r){var n=t.x,i=t.y,a=t.z,o=e[0]*n+e[3]*i+e[6]*a,s=e[1]*n+e[4]*i+e[7]*a,u=e[2]*n+e[5]*i+e[8]*a;return r.x=o,r.y=s,r.z=u,r},u.multiplyByScalar=function(e,t,r){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r},u.multiplyByScale=function(e,t,r){return r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.x,r[3]=e[3]*t.y,r[4]=e[4]*t.y,r[5]=e[5]*t.y,r[6]=e[6]*t.z,r[7]=e[7]*t.z,r[8]=e[8]*t.z,r},u.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},u.transpose=function(e,t){var r=e[0],n=e[3],i=e[6],a=e[1],o=e[4],s=e[7],u=e[2],c=e[5],l=e[8];return t[0]=r,t[1]=n,t[2]=i,t[3]=a,t[4]=o,t[5]=s,t[6]=u,t[7]=c,t[8]=l,t};var p=[1,0,0],m=[2,2,1],_=new u,E=new u;return u.computeEigenDecomposition=function(e,t){var r=s.EPSILON20,i=10,a=0,o=0;n(t)||(t={});for(var f=t.unitary=u.clone(u.IDENTITY,t.unitary),h=t.diagonal=u.clone(e,t.diagonal),p=r*c(h);o<i&&l(h)>p;)d(h,_),u.transpose(_,E),u.multiply(h,_,h),u.multiply(E,h,h),u.multiply(f,_,f),++a>2&&(++o,a=0);return t},u.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},u.determinant=function(e){var t=e[0],r=e[3],n=e[6],i=e[1],a=e[4],o=e[7],s=e[2],u=e[5],c=e[8];return t*(a*c-u*o)+i*(u*n-r*c)+s*(r*o-a*n)},u.inverse=function(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],c=e[6],l=e[7],d=e[8],f=u.determinant(e);t[0]=o*d-l*s,t[1]=l*i-n*d,t[2]=n*s-o*i,t[3]=c*s-a*d,t[4]=r*d-c*i,t[5]=a*i-r*s,t[6]=a*l-c*o,t[7]=c*n-r*l,t[8]=r*o-a*n;var h=1/f;return u.multiplyByScalar(t,h,t)},u.equals=function(e,t){return e===t||n(e)&&n(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},u.equalsEpsilon=function(e,t,r){return e===t||n(e)&&n(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r},u.IDENTITY=o(new u(1,0,0,0,1,0,0,0,1)),u.ZERO=o(new u(0,0,0,0,0,0,0,0,0)),u.COLUMN0ROW0=0,u.COLUMN0ROW1=1,u.COLUMN0ROW2=2,u.COLUMN1ROW0=3,u.COLUMN1ROW1=4,u.COLUMN1ROW2=5,u.COLUMN2ROW0=6,u.COLUMN2ROW1=7,u.COLUMN2ROW2=8,i(u.prototype,{length:{get:function(){return u.packedLength}}}),u.prototype.clone=function(e){return u.clone(this,e)},u.prototype.equals=function(e){return u.equals(this,e)},u.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]},u.prototype.equalsEpsilon=function(e,t){return u.equalsEpsilon(this,e,t)},u.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},u}),define("Core/Cartesian4",["./Check","./defaultValue","./defined","./DeveloperError","./freezeObject","./Math"],function(e,t,r,n,i,a){"use strict";function o(e,r,n,i){this.x=t(e,0),this.y=t(r,0),this.z=t(n,0),this.w=t(i,0)}o.fromElements=function(e,t,n,i,a){return r(a)?(a.x=e,a.y=t,a.z=n,a.w=i,a):new o(e,t,n,i)},o.fromColor=function(e,t){return r(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new o(e.red,e.green,e.blue,e.alpha)},o.clone=function(e,t){if(r(e))return r(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new o(e.x,e.y,e.z,e.w)},o.packedLength=4,o.pack=function(e,r,n){return n=t(n,0),r[n++]=e.x,r[n++]=e.y,r[n++]=e.z,r[n]=e.w,r},o.unpack=function(e,n,i){return n=t(n,0),r(i)||(i=new o),i.x=e[n++],i.y=e[n++],i.z=e[n++],i.w=e[n],i},o.packArray=function(e,t){var n=e.length;r(t)?t.length=4*n:t=new Array(4*n);for(var i=0;i<n;++i)o.pack(e[i],t,4*i);return t},o.unpackArray=function(e,t){var n=e.length;r(t)?t.length=n/4:t=new Array(n/4);for(var i=0;i<n;i+=4){var a=i/4;t[a]=o.unpack(e,i,t[a])}return t},o.fromArray=o.unpack,o.maximumComponent=function(e){return Math.max(e.x,e.y,e.z,e.w)},o.minimumComponent=function(e){return Math.min(e.x,e.y,e.z,e.w)},o.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r.w=Math.min(e.w,t.w),r},o.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r.w=Math.max(e.w,t.w),r},o.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},o.magnitude=function(e){return Math.sqrt(o.magnitudeSquared(e))};var s=new o;o.distance=function(e,t){return o.subtract(e,t,s),o.magnitude(s)},o.distanceSquared=function(e,t){return o.subtract(e,t,s),o.magnitudeSquared(s)},o.normalize=function(e,t){var r=o.magnitude(e);return t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,t.w=e.w/r,t},o.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},o.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r.w=e.w*t.w,r},o.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r.w=e.w/t.w,r},o.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,
r.w=e.w+t.w,r},o.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},o.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},o.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},o.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},o.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var u=new o;o.lerp=function(e,t,r,n){return o.multiplyByScalar(t,r,u),n=o.multiplyByScalar(e,1-r,n),o.add(u,n,n)};var c=new o;return o.mostOrthogonalAxis=function(e,t){var r=o.normalize(e,c);return o.abs(r,r),t=r.x<=r.y?r.x<=r.z?r.x<=r.w?o.clone(o.UNIT_X,t):o.clone(o.UNIT_W,t):r.z<=r.w?o.clone(o.UNIT_Z,t):o.clone(o.UNIT_W,t):r.y<=r.z?r.y<=r.w?o.clone(o.UNIT_Y,t):o.clone(o.UNIT_W,t):r.z<=r.w?o.clone(o.UNIT_Z,t):o.clone(o.UNIT_W,t)},o.equals=function(e,t){return e===t||r(e)&&r(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},o.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]&&e.w===t[r+3]},o.equalsEpsilon=function(e,t,n,i){return e===t||r(e)&&r(t)&&a.equalsEpsilon(e.x,t.x,n,i)&&a.equalsEpsilon(e.y,t.y,n,i)&&a.equalsEpsilon(e.z,t.z,n,i)&&a.equalsEpsilon(e.w,t.w,n,i)},o.ZERO=i(new o(0,0,0,0)),o.UNIT_X=i(new o(1,0,0,0)),o.UNIT_Y=i(new o(0,1,0,0)),o.UNIT_Z=i(new o(0,0,1,0)),o.UNIT_W=i(new o(0,0,0,1)),o.prototype.clone=function(e){return o.clone(this,e)},o.prototype.equals=function(e){return o.equals(this,e)},o.prototype.equalsEpsilon=function(e,t,r){return o.equalsEpsilon(this,e,t,r)},o.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},o}),define("Core/RuntimeError",["./defined"],function(e){"use strict";function t(e){this.name="RuntimeError",this.message=e;var t;try{throw new Error}catch(e){t=e.stack}this.stack=t}return e(Object.create)&&(t.prototype=Object.create(Error.prototype),t.prototype.constructor=t),t.prototype.toString=function(){var t=this.name+": "+this.message;return e(this.stack)&&(t+="\n"+this.stack.toString()),t},t}),define("Core/Matrix4",["./Cartesian3","./Cartesian4","./Check","./defaultValue","./defined","./defineProperties","./freezeObject","./Math","./Matrix3","./RuntimeError"],function(e,t,r,n,i,a,o,s,u,c){"use strict";function l(e,t,r,i,a,o,s,u,c,l,d,f,h,p,m,_){this[0]=n(e,0),this[1]=n(a,0),this[2]=n(c,0),this[3]=n(h,0),this[4]=n(t,0),this[5]=n(o,0),this[6]=n(l,0),this[7]=n(p,0),this[8]=n(r,0),this[9]=n(s,0),this[10]=n(d,0),this[11]=n(m,0),this[12]=n(i,0),this[13]=n(u,0),this[14]=n(f,0),this[15]=n(_,0)}l.packedLength=16,l.pack=function(e,t,r){return r=n(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t[r++]=e[9],t[r++]=e[10],t[r++]=e[11],t[r++]=e[12],t[r++]=e[13],t[r++]=e[14],t[r]=e[15],t},l.unpack=function(e,t,r){return t=n(t,0),i(r)||(r=new l),r[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r[9]=e[t++],r[10]=e[t++],r[11]=e[t++],r[12]=e[t++],r[13]=e[t++],r[14]=e[t++],r[15]=e[t],r},l.clone=function(e,t){if(i(e))return i(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new l(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},l.fromArray=l.unpack,l.fromColumnMajorArray=function(e,t){return l.clone(e,t)},l.fromRowMajorArray=function(e,t){return i(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new l(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},l.fromRotationTranslation=function(t,r,a){return r=n(r,e.ZERO),i(a)?(a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=0,a[4]=t[3],a[5]=t[4],a[6]=t[5],a[7]=0,a[8]=t[6],a[9]=t[7],a[10]=t[8],a[11]=0,a[12]=r.x,a[13]=r.y,a[14]=r.z,a[15]=1,a):new l(t[0],t[3],t[6],r.x,t[1],t[4],t[7],r.y,t[2],t[5],t[8],r.z,0,0,0,1)},l.fromTranslationQuaternionRotationScale=function(e,t,r,n){i(n)||(n=new l);var a=r.x,o=r.y,s=r.z,u=t.x*t.x,c=t.x*t.y,d=t.x*t.z,f=t.x*t.w,h=t.y*t.y,p=t.y*t.z,m=t.y*t.w,_=t.z*t.z,E=t.z*t.w,y=t.w*t.w,g=u-h-_+y,v=2*(c-E),T=2*(d+m),w=2*(c+E),R=-u+h-_+y,A=2*(p-f),S=2*(d-m),I=2*(p+f),O=-u-h+_+y;return n[0]=g*a,n[1]=w*a,n[2]=S*a,n[3]=0,n[4]=v*o,n[5]=R*o,n[6]=I*o,n[7]=0,n[8]=T*s,n[9]=A*s,n[10]=O*s,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n},l.fromTranslationRotationScale=function(e,t){return l.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},l.fromTranslation=function(e,t){return l.fromRotationTranslation(u.IDENTITY,e,t)},l.fromScale=function(e,t){return i(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new l(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},l.fromUniformScale=function(e,t){return i(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new l(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var d=new e,f=new e,h=new e;l.fromCamera=function(t,r){var n=t.position,a=t.direction,o=t.up;e.normalize(a,d),e.normalize(e.cross(d,o,f),f),e.normalize(e.cross(f,d,h),h);var s=f.x,u=f.y,c=f.z,p=d.x,m=d.y,_=d.z,E=h.x,y=h.y,g=h.z,v=n.x,T=n.y,w=n.z,R=s*-v+u*-T+c*-w,A=E*-v+y*-T+g*-w,S=p*v+m*T+_*w;return i(r)?(r[0]=s,r[1]=E,r[2]=-p,r[3]=0,r[4]=u,r[5]=y,r[6]=-m,r[7]=0,r[8]=c,r[9]=g,r[10]=-_,r[11]=0,r[12]=R,r[13]=A,r[14]=S,r[15]=1,r):new l(s,u,c,R,E,y,g,A,-p,-m,-_,S,0,0,0,1)},l.computePerspectiveFieldOfView=function(e,t,r,n,i){var a=Math.tan(.5*e),o=1/a,s=o/t,u=(n+r)/(r-n),c=2*n*r/(r-n);return i[0]=s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=u,i[11]=-1,i[12]=0,i[13]=0,i[14]=c,i[15]=0,i},l.computeOrthographicOffCenter=function(e,t,r,n,i,a,o){var s=1/(t-e),u=1/(n-r),c=1/(a-i),l=-(t+e)*s,d=-(n+r)*u,f=-(a+i)*c;return s*=2,u*=2,c*=-2,o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=c,o[11]=0,o[12]=l,o[13]=d,o[14]=f,o[15]=1,o},l.computePerspectiveOffCenter=function(e,t,r,n,i,a,o){var s=2*i/(t-e),u=2*i/(n-r),c=(t+e)/(t-e),l=(n+r)/(n-r),d=-(a+i)/(a-i),f=-1,h=-2*a*i/(a-i);return o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=c,o[9]=l,o[10]=d,o[11]=f,o[12]=0,o[13]=0,o[14]=h,o[15]=0,o},l.computeInfinitePerspectiveOffCenter=function(e,t,r,n,i,a){var o=2*i/(t-e),s=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),l=-1,d=-1,f=-2*i;return a[0]=o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=u,a[9]=c,a[10]=l,a[11]=d,a[12]=0,a[13]=0,a[14]=f,a[15]=0,a},l.computeViewportTransformation=function(e,t,r,i){e=n(e,n.EMPTY_OBJECT);var a=n(e.x,0),o=n(e.y,0),s=n(e.width,0),u=n(e.height,0);t=n(t,0),r=n(r,1);var c=.5*s,l=.5*u,d=.5*(r-t),f=c,h=l,p=d,m=a+c,_=o+l,E=t+d,y=1;return i[0]=f,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=h,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=p,i[11]=0,i[12]=m,i[13]=_,i[14]=E,i[15]=y,i},l.computeView=function(t,r,n,i,a){return a[0]=i.x,a[1]=n.x,a[2]=-r.x,a[3]=0,a[4]=i.y,a[5]=n.y,a[6]=-r.y,a[7]=0,a[8]=i.z,a[9]=n.z,a[10]=-r.z,a[11]=0,a[12]=-e.dot(i,t),a[13]=-e.dot(n,t),a[14]=e.dot(r,t),a[15]=1,a},l.toArray=function(e,t){return i(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},l.getElementIndex=function(e,t){return 4*e+t},l.getColumn=function(e,t,r){var n=4*t,i=e[n],a=e[n+1],o=e[n+2],s=e[n+3];return r.x=i,r.y=a,r.z=o,r.w=s,r},l.setColumn=function(e,t,r,n){n=l.clone(e,n);var i=4*t;return n[i]=r.x,n[i+1]=r.y,n[i+2]=r.z,n[i+3]=r.w,n},l.setTranslation=function(e,t,r){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=e[15],r},l.getRow=function(e,t,r){var n=e[t],i=e[t+4],a=e[t+8],o=e[t+12];return r.x=n,r.y=i,r.z=a,r.w=o,r},l.setRow=function(e,t,r,n){return n=l.clone(e,n),n[t]=r.x,n[t+4]=r.y,n[t+8]=r.z,n[t+12]=r.w,n};var p=new e;l.getScale=function(t,r){return r.x=e.magnitude(e.fromElements(t[0],t[1],t[2],p)),r.y=e.magnitude(e.fromElements(t[4],t[5],t[6],p)),r.z=e.magnitude(e.fromElements(t[8],t[9],t[10],p)),r};var m=new e;l.getMaximumScale=function(t){return l.getScale(t,m),e.maximumComponent(m)},l.multiply=function(e,t,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=e[8],f=e[9],h=e[10],p=e[11],m=e[12],_=e[13],E=e[14],y=e[15],g=t[0],v=t[1],T=t[2],w=t[3],R=t[4],A=t[5],S=t[6],I=t[7],O=t[8],x=t[9],C=t[10],N=t[11],b=t[12],M=t[13],U=t[14],P=t[15],D=n*g+s*v+d*T+m*w,L=i*g+u*v+f*T+_*w,B=a*g+c*v+h*T+E*w,z=o*g+l*v+p*T+y*w,F=n*R+s*A+d*S+m*I,k=i*R+u*A+f*S+_*I,q=a*R+c*A+h*S+E*I,G=o*R+l*A+p*S+y*I,V=n*O+s*x+d*C+m*N,W=i*O+u*x+f*C+_*N,X=a*O+c*x+h*C+E*N,H=o*O+l*x+p*C+y*N,Y=n*b+s*M+d*U+m*P,j=i*b+u*M+f*U+_*P,Z=a*b+c*M+h*U+E*P,K=o*b+l*M+p*U+y*P;return r[0]=D,r[1]=L,r[2]=B,r[3]=z,r[4]=F,r[5]=k,r[6]=q,r[7]=G,r[8]=V,r[9]=W,r[10]=X,r[11]=H,r[12]=Y,r[13]=j,r[14]=Z,r[15]=K,r},l.add=function(e,t,r){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r},l.subtract=function(e,t,r){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r},l.multiplyTransformation=function(e,t,r){var n=e[0],i=e[1],a=e[2],o=e[4],s=e[5],u=e[6],c=e[8],l=e[9],d=e[10],f=e[12],h=e[13],p=e[14],m=t[0],_=t[1],E=t[2],y=t[4],g=t[5],v=t[6],T=t[8],w=t[9],R=t[10],A=t[12],S=t[13],I=t[14],O=n*m+o*_+c*E,x=i*m+s*_+l*E,C=a*m+u*_+d*E,N=n*y+o*g+c*v,b=i*y+s*g+l*v,M=a*y+u*g+d*v,U=n*T+o*w+c*R,P=i*T+s*w+l*R,D=a*T+u*w+d*R,L=n*A+o*S+c*I+f,B=i*A+s*S+l*I+h,z=a*A+u*S+d*I+p;return r[0]=O,r[1]=x,r[2]=C,r[3]=0,r[4]=N,r[5]=b,r[6]=M,r[7]=0,r[8]=U,r[9]=P,r[10]=D,r[11]=0,r[12]=L,r[13]=B,r[14]=z,r[15]=1,r},l.multiplyByMatrix3=function(e,t,r){var n=e[0],i=e[1],a=e[2],o=e[4],s=e[5],u=e[6],c=e[8],l=e[9],d=e[10],f=t[0],h=t[1],p=t[2],m=t[3],_=t[4],E=t[5],y=t[6],g=t[7],v=t[8],T=n*f+o*h+c*p,w=i*f+s*h+l*p,R=a*f+u*h+d*p,A=n*m+o*_+c*E,S=i*m+s*_+l*E,I=a*m+u*_+d*E,O=n*y+o*g+c*v,x=i*y+s*g+l*v,C=a*y+u*g+d*v;return r[0]=T,r[1]=w,r[2]=R,r[3]=0,r[4]=A,r[5]=S,r[6]=I,r[7]=0,r[8]=O,r[9]=x,r[10]=C,r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},l.multiplyByTranslation=function(e,t,r){var n=t.x,i=t.y,a=t.z,o=n*e[0]+i*e[4]+a*e[8]+e[12],s=n*e[1]+i*e[5]+a*e[9]+e[13],u=n*e[2]+i*e[6]+a*e[10]+e[14];return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=o,r[13]=s,r[14]=u,r[15]=e[15],r};var _=new e;l.multiplyByUniformScale=function(e,t,r){return _.x=t,_.y=t,_.z=t,l.multiplyByScale(e,_,r)},l.multiplyByScale=function(e,t,r){var n=t.x,i=t.y,a=t.z;return 1===n&&1===i&&1===a?l.clone(e,r):(r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=0,r[4]=i*e[4],r[5]=i*e[5],r[6]=i*e[6],r[7]=0,r[8]=a*e[8],r[9]=a*e[9],r[10]=a*e[10],r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=1,r)},l.multiplyByVector=function(e,t,r){var n=t.x,i=t.y,a=t.z,o=t.w,s=e[0]*n+e[4]*i+e[8]*a+e[12]*o,u=e[1]*n+e[5]*i+e[9]*a+e[13]*o,c=e[2]*n+e[6]*i+e[10]*a+e[14]*o,l=e[3]*n+e[7]*i+e[11]*a+e[15]*o;return r.x=s,r.y=u,r.z=c,r.w=l,r},l.multiplyByPointAsVector=function(e,t,r){var n=t.x,i=t.y,a=t.z,o=e[0]*n+e[4]*i+e[8]*a,s=e[1]*n+e[5]*i+e[9]*a,u=e[2]*n+e[6]*i+e[10]*a;return r.x=o,r.y=s,r.z=u,r},l.multiplyByPoint=function(e,t,r){var n=t.x,i=t.y,a=t.z,o=e[0]*n+e[4]*i+e[8]*a+e[12],s=e[1]*n+e[5]*i+e[9]*a+e[13],u=e[2]*n+e[6]*i+e[10]*a+e[14];return r.x=o,r.y=s,r.z=u,r},l.multiplyByScalar=function(e,t,r){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r},l.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},l.transpose=function(e,t){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[10]=e[10],t[11]=e[14],t[12]=i,t[13]=o,t[14]=s,t[15]=e[15],t},l.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},l.equals=function(e,t){return e===t||i(e)&&i(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]},l.equalsEpsilon=function(e,t,r){return e===t||i(e)&&i(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r&&Math.abs(e[9]-t[9])<=r&&Math.abs(e[10]-t[10])<=r&&Math.abs(e[11]-t[11])<=r&&Math.abs(e[12]-t[12])<=r&&Math.abs(e[13]-t[13])<=r&&Math.abs(e[14]-t[14])<=r&&Math.abs(e[15]-t[15])<=r},l.getTranslation=function(e,t){return t.x=e[12],t.y=e[13],t.z=e[14],t},l.getRotation=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var E=new u,y=new u,g=new t,v=new t(0,0,0,1);return l.inverse=function(e,r){if(u.equalsEpsilon(l.getRotation(e,E),y,s.EPSILON7)&&t.equals(l.getRow(e,3,g),v))return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=0,r[11]=0,r[12]=-e[12],r[13]=-e[13],r[14]=-e[14],r[15]=1,r;var n=e[0],i=e[4],a=e[8],o=e[12],d=e[1],f=e[5],h=e[9],p=e[13],m=e[2],_=e[6],T=e[10],w=e[14],R=e[3],A=e[7],S=e[11],I=e[15],O=T*I,x=w*S,C=_*I,N=w*A,b=_*S,M=T*A,U=m*I,P=w*R,D=m*S,L=T*R,B=m*A,z=_*R,F=O*f+N*h+b*p-(x*f+C*h+M*p),k=x*d+U*h+L*p-(O*d+P*h+D*p),q=C*d+P*f+B*p-(N*d+U*f+z*p),G=M*d+D*f+z*h-(b*d+L*f+B*h),V=x*i+C*a+M*o-(O*i+N*a+b*o),W=O*n+P*a+D*o-(x*n+U*a+L*o),X=N*n+U*i+z*o-(C*n+P*i+B*o),H=b*n+L*i+B*a-(M*n+D*i+z*a);O=a*p,x=o*h,C=i*p,N=o*f,b=i*h,M=a*f,U=n*p,P=o*d,D=n*h,L=a*d,B=n*f,z=i*d;var Y=O*A+N*S+b*I-(x*A+C*S+M*I),j=x*R+U*S+L*I-(O*R+P*S+D*I),Z=C*R+P*A+B*I-(N*R+U*A+z*I),K=M*R+D*A+z*S-(b*R+L*A+B*S),J=C*T+M*w+x*_-(b*w+O*_+N*T),Q=D*w+O*m+P*T-(U*T+L*w+x*m),$=U*_+z*w+N*m-(B*w+C*m+P*_),ee=B*T+b*m+L*_-(D*_+z*T+M*m),te=n*F+i*k+a*q+o*G;if(Math.abs(te)<s.EPSILON20)throw new c("matrix is not invertible because its determinate is zero.");return te=1/te,r[0]=F*te,r[1]=k*te,r[2]=q*te,r[3]=G*te,r[4]=V*te,r[5]=W*te,r[6]=X*te,r[7]=H*te,r[8]=Y*te,r[9]=j*te,r[10]=Z*te,r[11]=K*te,r[12]=J*te,r[13]=Q*te,r[14]=$*te,r[15]=ee*te,r},l.inverseTransformation=function(e,t){var r=e[0],n=e[1],i=e[2],a=e[4],o=e[5],s=e[6],u=e[8],c=e[9],l=e[10],d=e[12],f=e[13],h=e[14],p=-r*d-n*f-i*h,m=-a*d-o*f-s*h,_=-u*d-c*f-l*h;return t[0]=r,t[1]=a,t[2]=u,t[3]=0,t[4]=n,t[5]=o,t[6]=c,t[7]=0,t[8]=i,t[9]=s,t[10]=l,t[11]=0,t[12]=p,t[13]=m,t[14]=_,t[15]=1,t},l.IDENTITY=o(new l(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),l.ZERO=o(new l(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),l.COLUMN0ROW0=0,l.COLUMN0ROW1=1,l.COLUMN0ROW2=2,l.COLUMN0ROW3=3,l.COLUMN1ROW0=4,l.COLUMN1ROW1=5,l.COLUMN1ROW2=6,l.COLUMN1ROW3=7,l.COLUMN2ROW0=8,l.COLUMN2ROW1=9,l.COLUMN2ROW2=10,l.COLUMN2ROW3=11,l.COLUMN3ROW0=12,l.COLUMN3ROW1=13,l.COLUMN3ROW2=14,l.COLUMN3ROW3=15,a(l.prototype,{length:{get:function(){return l.packedLength}}}),l.prototype.clone=function(e){return l.clone(this,e)},l.prototype.equals=function(e){return l.equals(this,e)},l.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]&&e[9]===t[r+9]&&e[10]===t[r+10]&&e[11]===t[r+11]&&e[12]===t[r+12]&&e[13]===t[r+13]&&e[14]===t[r+14]&&e[15]===t[r+15]},l.prototype.equalsEpsilon=function(e,t){return l.equalsEpsilon(this,e,t)},l.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"},l}),define("Core/Rectangle",["./Cartographic","./Check","./defaultValue","./defined","./defineProperties","./Ellipsoid","./freezeObject","./Math"],function(e,t,r,n,i,a,o,s){"use strict";function u(e,t,n,i){this.west=r(e,0),this.south=r(t,0),this.east=r(n,0),this.north=r(i,0)}i(u.prototype,{width:{get:function(){return u.computeWidth(this)}},height:{get:function(){return u.computeHeight(this)}}}),u.packedLength=4,u.pack=function(e,t,n){return n=r(n,0),t[n++]=e.west,t[n++]=e.south,t[n++]=e.east,t[n]=e.north,t},u.unpack=function(e,t,i){return t=r(t,0),n(i)||(i=new u),i.west=e[t++],i.south=e[t++],i.east=e[t++],i.north=e[t],i},u.computeWidth=function(e){var t=e.east,r=e.west;return t<r&&(t+=s.TWO_PI),t-r},u.computeHeight=function(e){return e.north-e.south},u.fromDegrees=function(e,t,i,a,o){return e=s.toRadians(r(e,0)),t=s.toRadians(r(t,0)),i=s.toRadians(r(i,0)),a=s.toRadians(r(a,0)),n(o)?(o.west=e,o.south=t,o.east=i,o.north=a,o):new u(e,t,i,a)},u.fromRadians=function(e,t,i,a,o){return n(o)?(o.west=r(e,0),o.south=r(t,0),o.east=r(i,0),o.north=r(a,0),o):new u(e,t,i,a)},u.fromCartographicArray=function(e,t){for(var r=Number.MAX_VALUE,i=-Number.MAX_VALUE,a=Number.MAX_VALUE,o=-Number.MAX_VALUE,c=Number.MAX_VALUE,l=-Number.MAX_VALUE,d=0,f=e.length;d<f;d++){var h=e[d];r=Math.min(r,h.longitude),i=Math.max(i,h.longitude),c=Math.min(c,h.latitude),l=Math.max(l,h.latitude);var p=h.longitude>=0?h.longitude:h.longitude+s.TWO_PI;a=Math.min(a,p),o=Math.max(o,p)}return i-r>o-a&&(r=a,i=o,i>s.PI&&(i-=s.TWO_PI),r>s.PI&&(r-=s.TWO_PI)),n(t)?(t.west=r,t.south=c,t.east=i,t.north=l,t):new u(r,c,i,l)},u.fromCartesianArray=function(e,t,i){t=r(t,a.WGS84);for(var o=Number.MAX_VALUE,c=-Number.MAX_VALUE,l=Number.MAX_VALUE,d=-Number.MAX_VALUE,f=Number.MAX_VALUE,h=-Number.MAX_VALUE,p=0,m=e.length;p<m;p++){var _=t.cartesianToCartographic(e[p]);o=Math.min(o,_.longitude),c=Math.max(c,_.longitude),f=Math.min(f,_.latitude),h=Math.max(h,_.latitude);var E=_.longitude>=0?_.longitude:_.longitude+s.TWO_PI;l=Math.min(l,E),d=Math.max(d,E)}return c-o>d-l&&(o=l,c=d,c>s.PI&&(c-=s.TWO_PI),o>s.PI&&(o-=s.TWO_PI)),n(i)?(i.west=o,i.south=f,i.east=c,i.north=h,i):new u(o,f,c,h)},u.clone=function(e,t){if(n(e))return n(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t):new u(e.west,e.south,e.east,e.north)},u.prototype.clone=function(e){return u.clone(this,e)},u.prototype.equals=function(e){return u.equals(this,e)},u.equals=function(e,t){return e===t||n(e)&&n(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north},u.prototype.equalsEpsilon=function(e,t){return n(e)&&Math.abs(this.west-e.west)<=t&&Math.abs(this.south-e.south)<=t&&Math.abs(this.east-e.east)<=t&&Math.abs(this.north-e.north)<=t},u.validate=function(e){},u.southwest=function(t,r){return n(r)?(r.longitude=t.west,r.latitude=t.south,r.height=0,r):new e(t.west,t.south)},u.northwest=function(t,r){return n(r)?(r.longitude=t.west,r.latitude=t.north,r.height=0,r):new e(t.west,t.north)},u.northeast=function(t,r){return n(r)?(r.longitude=t.east,r.latitude=t.north,r.height=0,r):new e(t.east,t.north)},u.southeast=function(t,r){return n(r)?(r.longitude=t.east,r.latitude=t.south,r.height=0,r):new e(t.east,t.south)},u.center=function(t,r){var i=t.east,a=t.west;i<a&&(i+=s.TWO_PI);var o=s.negativePiToPi(.5*(a+i)),u=.5*(t.south+t.north);return n(r)?(r.longitude=o,r.latitude=u,r.height=0,r):new e(o,u)},u.intersection=function(e,t,r){var i=e.east,a=e.west,o=t.east,c=t.west;i<a&&o>0?i+=s.TWO_PI:o<c&&i>0&&(o+=s.TWO_PI),i<a&&c<0?c+=s.TWO_PI:o<c&&a<0&&(a+=s.TWO_PI);var l=s.negativePiToPi(Math.max(a,c)),d=s.negativePiToPi(Math.min(i,o));if(!((e.west<e.east||t.west<t.east)&&d<=l)){var f=Math.max(e.south,t.south),h=Math.min(e.north,t.north);if(!(f>=h))return n(r)?(r.west=l,r.south=f,r.east=d,r.north=h,r):new u(l,f,d,h)}},u.simpleIntersection=function(e,t,r){var i=Math.max(e.west,t.west),a=Math.max(e.south,t.south),o=Math.min(e.east,t.east),s=Math.min(e.north,t.north);if(!(a>=s||i>=o))return n(r)?(r.west=i,r.south=a,r.east=o,r.north=s,r):new u(i,a,o,s)},u.union=function(e,t,r){n(r)||(r=new u);var i=e.east,a=e.west,o=t.east,c=t.west;i<a&&o>0?i+=s.TWO_PI:o<c&&i>0&&(o+=s.TWO_PI),i<a&&c<0?c+=s.TWO_PI:o<c&&a<0&&(a+=s.TWO_PI);var l=s.convertLongitudeRange(Math.min(a,c)),d=s.convertLongitudeRange(Math.max(i,o));return r.west=l,r.south=Math.min(e.south,t.south),r.east=d,r.north=Math.max(e.north,t.north),r},u.expand=function(e,t,r){return n(r)||(r=new u),r.west=Math.min(e.west,t.longitude),r.south=Math.min(e.south,t.latitude),r.east=Math.max(e.east,t.longitude),r.north=Math.max(e.north,t.latitude),r},u.contains=function(e,t){var r=t.longitude,n=t.latitude,i=e.west,a=e.east;return a<i&&(a+=s.TWO_PI,r<0&&(r+=s.TWO_PI)),(r>i||s.equalsEpsilon(r,i,s.EPSILON14))&&(r<a||s.equalsEpsilon(r,a,s.EPSILON14))&&n>=e.south&&n<=e.north};var c=new e;return u.subsample=function(e,t,i,o){t=r(t,a.WGS84),i=r(i,0),n(o)||(o=[]);var l=0,d=e.north,f=e.south,h=e.east,p=e.west,m=c;m.height=i,m.longitude=p,m.latitude=d,o[l]=t.cartographicToCartesian(m,o[l]),l++,m.longitude=h,o[l]=t.cartographicToCartesian(m,o[l]),l++,m.latitude=f,o[l]=t.cartographicToCartesian(m,o[l]),l++,m.longitude=p,o[l]=t.cartographicToCartesian(m,o[l]),l++,d<0?m.latitude=d:f>0?m.latitude=f:m.latitude=0;for(var _=1;_<8;++_)m.longitude=-Math.PI+_*s.PI_OVER_TWO,u.contains(e,m)&&(o[l]=t.cartographicToCartesian(m,o[l]),l++);return 0===m.latitude&&(m.longitude=p,o[l]=t.cartographicToCartesian(m,o[l]),l++,m.longitude=h,o[l]=t.cartographicToCartesian(m,o[l]),l++),o.length=l,o},u.MAX_VALUE=o(new u(-Math.PI,-s.PI_OVER_TWO,Math.PI,s.PI_OVER_TWO)),u}),define("Core/BoundingSphere",["./Cartesian3","./Cartographic","./Math","./Check","./defaultValue","./defined","./Ellipsoid","./GeographicProjection","./Intersect","./Interval","./Matrix3","./Matrix4","./Rectangle"],function(e,t,r,n,i,a,o,s,u,c,l,d,f){"use strict";function h(t,r){this.center=e.clone(i(t,e.ZERO)),this.radius=i(r,0)}var p=new e,m=new e,_=new e,E=new e,y=new e,g=new e,v=new e,T=new e,w=new e,R=new e,A=new e,S=new e,I=4/3*r.PI;h.fromPoints=function(t,r){if(a(r)||(r=new h),!a(t)||0===t.length)return r.center=e.clone(e.ZERO,r.center),r.radius=0,r;var n,i=e.clone(t[0],v),o=e.clone(i,p),s=e.clone(i,m),u=e.clone(i,_),c=e.clone(i,E),l=e.clone(i,y),d=e.clone(i,g),f=t.length;for(n=1;n<f;n++){e.clone(t[n],i);var I=i.x,O=i.y,x=i.z;I<o.x&&e.clone(i,o),I>c.x&&e.clone(i,c),O<s.y&&e.clone(i,s),O>l.y&&e.clone(i,l),x<u.z&&e.clone(i,u),x>d.z&&e.clone(i,d)}var C=e.magnitudeSquared(e.subtract(c,o,T)),N=e.magnitudeSquared(e.subtract(l,s,T)),b=e.magnitudeSquared(e.subtract(d,u,T)),M=o,U=c,P=C;N>P&&(P=N,M=s,U=l),b>P&&(P=b,M=u,U=d);var D=w;D.x=.5*(M.x+U.x),D.y=.5*(M.y+U.y),D.z=.5*(M.z+U.z);var L=e.magnitudeSquared(e.subtract(U,D,T)),B=Math.sqrt(L),z=R;z.x=o.x,z.y=s.y,z.z=u.z;var F=A;F.x=c.x,F.y=l.y,F.z=d.z;var k=e.multiplyByScalar(e.add(z,F,T),.5,S),q=0;for(n=0;n<f;n++){e.clone(t[n],i);var G=e.magnitude(e.subtract(i,k,T));G>q&&(q=G);var V=e.magnitudeSquared(e.subtract(i,D,T));if(V>L){var W=Math.sqrt(V);B=.5*(B+W),L=B*B;var X=W-B;D.x=(B*D.x+X*i.x)/W,D.y=(B*D.y+X*i.y)/W,D.z=(B*D.z+X*i.z)/W}}return B<q?(e.clone(D,r.center),r.radius=B):(e.clone(k,r.center),r.radius=q),r};var O=new s,x=new e,C=new e,N=new t,b=new t;h.fromRectangle2D=function(e,t,r){return h.fromRectangleWithHeights2D(e,t,0,0,r)},h.fromRectangleWithHeights2D=function(t,r,n,o,s){if(a(s)||(s=new h),!a(t))return s.center=e.clone(e.ZERO,s.center),s.radius=0,s;r=i(r,O),f.southwest(t,N),N.height=n,f.northeast(t,b),b.height=o;var u=r.project(N,x),c=r.project(b,C),l=c.x-u.x,d=c.y-u.y,p=c.z-u.z;s.radius=.5*Math.sqrt(l*l+d*d+p*p);var m=s.center;return m.x=u.x+.5*l,m.y=u.y+.5*d,m.z=u.z+.5*p,s};var M=[];h.fromRectangle3D=function(t,r,n,s){if(r=i(r,o.WGS84),n=i(n,0),a(s)||(s=new h),!a(t))return s.center=e.clone(e.ZERO,s.center),s.radius=0,s;var u=f.subsample(t,r,n,M);return h.fromPoints(u,s)},h.fromVertices=function(t,r,n,o){if(a(o)||(o=new h),!a(t)||0===t.length)return o.center=e.clone(e.ZERO,o.center),o.radius=0,o;r=i(r,e.ZERO),n=i(n,3);var s=v;s.x=t[0]+r.x,s.y=t[1]+r.y,s.z=t[2]+r.z;var u,c=e.clone(s,p),l=e.clone(s,m),d=e.clone(s,_),f=e.clone(s,E),I=e.clone(s,y),O=e.clone(s,g),x=t.length;for(u=0;u<x;u+=n){var C=t[u]+r.x,N=t[u+1]+r.y,b=t[u+2]+r.z;s.x=C,s.y=N,s.z=b,C<c.x&&e.clone(s,c),C>f.x&&e.clone(s,f),N<l.y&&e.clone(s,l),N>I.y&&e.clone(s,I),b<d.z&&e.clone(s,d),b>O.z&&e.clone(s,O)}var M=e.magnitudeSquared(e.subtract(f,c,T)),U=e.magnitudeSquared(e.subtract(I,l,T)),P=e.magnitudeSquared(e.subtract(O,d,T)),D=c,L=f,B=M;U>B&&(B=U,D=l,L=I),P>B&&(B=P,D=d,L=O);var z=w;z.x=.5*(D.x+L.x),z.y=.5*(D.y+L.y),z.z=.5*(D.z+L.z);var F=e.magnitudeSquared(e.subtract(L,z,T)),k=Math.sqrt(F),q=R;q.x=c.x,q.y=l.y,q.z=d.z;var G=A;G.x=f.x,G.y=I.y,G.z=O.z;var V=e.multiplyByScalar(e.add(q,G,T),.5,S),W=0;for(u=0;u<x;u+=n){s.x=t[u]+r.x,s.y=t[u+1]+r.y,s.z=t[u+2]+r.z;var X=e.magnitude(e.subtract(s,V,T));X>W&&(W=X);var H=e.magnitudeSquared(e.subtract(s,z,T));if(H>F){var Y=Math.sqrt(H);k=.5*(k+Y),F=k*k;var j=Y-k;z.x=(k*z.x+j*s.x)/Y,z.y=(k*z.y+j*s.y)/Y,z.z=(k*z.z+j*s.z)/Y}}return k<W?(e.clone(z,o.center),o.radius=k):(e.clone(V,o.center),o.radius=W),o},h.fromEncodedCartesianVertices=function(t,r,n){if(a(n)||(n=new h),!a(t)||!a(r)||t.length!==r.length||0===t.length)return n.center=e.clone(e.ZERO,n.center),n.radius=0,n;var i=v;i.x=t[0]+r[0],i.y=t[1]+r[1],i.z=t[2]+r[2];var o,s=e.clone(i,p),u=e.clone(i,m),c=e.clone(i,_),l=e.clone(i,E),d=e.clone(i,y),f=e.clone(i,g),I=t.length;for(o=0;o<I;o+=3){var O=t[o]+r[o],x=t[o+1]+r[o+1],C=t[o+2]+r[o+2];i.x=O,i.y=x,i.z=C,O<s.x&&e.clone(i,s),O>l.x&&e.clone(i,l),x<u.y&&e.clone(i,u),x>d.y&&e.clone(i,d),C<c.z&&e.clone(i,c),C>f.z&&e.clone(i,f)}var N=e.magnitudeSquared(e.subtract(l,s,T)),b=e.magnitudeSquared(e.subtract(d,u,T)),M=e.magnitudeSquared(e.subtract(f,c,T)),U=s,P=l,D=N;b>D&&(D=b,U=u,P=d),M>D&&(D=M,U=c,P=f);var L=w;L.x=.5*(U.x+P.x),L.y=.5*(U.y+P.y),L.z=.5*(U.z+P.z);var B=e.magnitudeSquared(e.subtract(P,L,T)),z=Math.sqrt(B),F=R;F.x=s.x,F.y=u.y,F.z=c.z;var k=A;k.x=l.x,k.y=d.y,k.z=f.z;var q=e.multiplyByScalar(e.add(F,k,T),.5,S),G=0;for(o=0;o<I;o+=3){i.x=t[o]+r[o],i.y=t[o+1]+r[o+1],i.z=t[o+2]+r[o+2];var V=e.magnitude(e.subtract(i,q,T));V>G&&(G=V);var W=e.magnitudeSquared(e.subtract(i,L,T));if(W>B){var X=Math.sqrt(W);z=.5*(z+X),B=z*z;var H=X-z;L.x=(z*L.x+H*i.x)/X,L.y=(z*L.y+H*i.y)/X,L.z=(z*L.z+H*i.z)/X}}return z<G?(e.clone(L,n.center),n.radius=z):(e.clone(q,n.center),n.radius=G),n},h.fromCornerPoints=function(t,r,n){a(n)||(n=new h);var i=n.center;return e.add(t,r,i),e.multiplyByScalar(i,.5,i),n.radius=e.distance(i,r),n},h.fromEllipsoid=function(t,r){return a(r)||(r=new h),e.clone(e.ZERO,r.center),r.radius=t.maximumRadius,r};var U=new e;h.fromBoundingSpheres=function(t,r){if(a(r)||(r=new h),!a(t)||0===t.length)return r.center=e.clone(e.ZERO,r.center),r.radius=0,r;var n=t.length;if(1===n)return h.clone(t[0],r);if(2===n)return h.union(t[0],t[1],r);var i,o=[];for(i=0;i<n;i++)o.push(t[i].center);r=h.fromPoints(o,r);var s=r.center,u=r.radius;for(i=0;i<n;i++){var c=t[i];u=Math.max(u,e.distance(s,c.center,U)+c.radius)}return r.radius=u,r};var P=new e,D=new e,L=new e;h.fromOrientedBoundingBox=function(t,r){a(r)||(r=new h);var n=t.halfAxes,i=l.getColumn(n,0,P),o=l.getColumn(n,1,D),s=l.getColumn(n,2,L);return e.add(i,o,i),e.add(i,s,i),r.center=e.clone(t.center,r.center),r.radius=e.magnitude(i),r},h.clone=function(t,r){if(a(t))return a(r)?(r.center=e.clone(t.center,r.center),r.radius=t.radius,r):new h(t.center,t.radius)},h.packedLength=4,h.pack=function(e,t,r){r=i(r,0);var n=e.center;return t[r++]=n.x,t[r++]=n.y,t[r++]=n.z,t[r]=e.radius,t},h.unpack=function(e,t,r){t=i(t,0),a(r)||(r=new h);var n=r.center;return n.x=e[t++],n.y=e[t++],n.z=e[t++],r.radius=e[t],r};var B=new e,z=new e;h.union=function(t,r,n){a(n)||(n=new h);var i=t.center,o=t.radius,s=r.center,u=r.radius,c=e.subtract(s,i,B),l=e.magnitude(c);if(o>=l+u)return t.clone(n),n;if(u>=l+o)return r.clone(n),n;var d=.5*(o+l+u),f=e.multiplyByScalar(c,(-o+d)/l,z);return e.add(f,i,f),e.clone(f,n.center),n.radius=d,n};var F=new e;h.expand=function(t,r,n){n=h.clone(t,n);var i=e.magnitude(e.subtract(r,n.center,F));return i>n.radius&&(n.radius=i),n},h.intersectPlane=function(t,r){var n=t.center,i=t.radius,a=r.normal,o=e.dot(a,n)+r.distance;return o<-i?u.OUTSIDE:o<i?u.INTERSECTING:u.INSIDE},h.transform=function(e,t,r){return a(r)||(r=new h),r.center=d.multiplyByPoint(t,e.center,r.center),r.radius=d.getMaximumScale(t)*e.radius,r};var k=new e;h.distanceSquaredTo=function(t,r){var n=e.subtract(t.center,r,k);return e.magnitudeSquared(n)-t.radius*t.radius},h.transformWithoutScale=function(e,t,r){return a(r)||(r=new h),r.center=d.multiplyByPoint(t,e.center,r.center),r.radius=e.radius,r};var q=new e;h.computePlaneDistances=function(t,r,n,i){a(i)||(i=new c);var o=e.subtract(t.center,r,q),s=e.dot(n,o);return i.start=s-t.radius,i.stop=s+t.radius,i};for(var G=new e,V=new e,W=new e,X=new e,H=new e,Y=new t,j=new Array(8),Z=0;Z<8;++Z)j[Z]=new e;var K=new s;return h.projectTo2D=function(t,r,n){r=i(r,K);var a=r.ellipsoid,o=t.center,s=t.radius,u=a.geodeticSurfaceNormal(o,G),c=e.cross(e.UNIT_Z,u,V);e.normalize(c,c);var l=e.cross(u,c,W);e.normalize(l,l),e.multiplyByScalar(u,s,u),e.multiplyByScalar(l,s,l),e.multiplyByScalar(c,s,c);var d=e.negate(l,H),f=e.negate(c,X),p=j,m=p[0];e.add(u,l,m),e.add(m,c,m),m=p[1],e.add(u,l,m),e.add(m,f,m),m=p[2],e.add(u,d,m),e.add(m,f,m),m=p[3],e.add(u,d,m),e.add(m,c,m),e.negate(u,u),m=p[4],e.add(u,l,m),e.add(m,c,m),m=p[5],e.add(u,l,m),e.add(m,f,m),m=p[6],e.add(u,d,m),e.add(m,f,m),m=p[7],e.add(u,d,m),e.add(m,c,m);for(var _=p.length,E=0;E<_;++E){var y=p[E];e.add(o,y,y);var g=a.cartesianToCartographic(y,Y);r.project(g,y)}n=h.fromPoints(p,n),o=n.center;var v=o.x,T=o.y,w=o.z;return o.x=w,o.y=v,o.z=T,n},h.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)},h.equals=function(t,r){return t===r||a(t)&&a(r)&&e.equals(t.center,r.center)&&t.radius===r.radius},h.prototype.intersectPlane=function(e){return h.intersectPlane(this,e)},h.prototype.distanceSquaredTo=function(e){return h.distanceSquaredTo(this,e)},h.prototype.computePlaneDistances=function(e,t,r){return h.computePlaneDistances(this,e,t,r)},h.prototype.isOccluded=function(e){return h.isOccluded(this,e)},h.prototype.equals=function(e){return h.equals(this,e)},h.prototype.clone=function(e){return h.clone(this,e)},h.prototype.volume=function(){var e=this.radius;return I*e*e*e},h.prototype.empty=function(){return this.radius<=0},h}),define("Core/Cartesian2",["./Check","./defaultValue","./defined","./DeveloperError","./freezeObject","./Math"],function(e,t,r,n,i,a){"use strict";function o(e,r){this.x=t(e,0),this.y=t(r,0)}o.fromElements=function(e,t,n){return r(n)?(n.x=e,n.y=t,n):new o(e,t)},o.clone=function(e,t){if(r(e))return r(t)?(t.x=e.x,t.y=e.y,t):new o(e.x,e.y)},o.fromCartesian3=o.clone,o.fromCartesian4=o.clone,o.packedLength=2,o.pack=function(e,r,n){return n=t(n,0),r[n++]=e.x,r[n]=e.y,r},o.unpack=function(e,n,i){return n=t(n,0),r(i)||(i=new o),i.x=e[n++],i.y=e[n],i},o.packArray=function(e,t){var n=e.length;r(t)?t.length=2*n:t=new Array(2*n);for(var i=0;i<n;++i)o.pack(e[i],t,2*i);return t},o.unpackArray=function(e,t){var n=e.length;r(t)?t.length=n/2:t=new Array(n/2);for(var i=0;i<n;i+=2){var a=i/2;t[a]=o.unpack(e,i,t[a])}return t},o.fromArray=o.unpack,o.maximumComponent=function(e){
return Math.max(e.x,e.y)},o.minimumComponent=function(e){return Math.min(e.x,e.y)},o.minimumByComponent=function(e,t,r){return r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r},o.maximumByComponent=function(e,t,r){return r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r},o.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},o.magnitude=function(e){return Math.sqrt(o.magnitudeSquared(e))};var s=new o;o.distance=function(e,t){return o.subtract(e,t,s),o.magnitude(s)},o.distanceSquared=function(e,t){return o.subtract(e,t,s),o.magnitudeSquared(s)},o.normalize=function(e,t){var r=o.magnitude(e);return t.x=e.x/r,t.y=e.y/r,t},o.dot=function(e,t){return e.x*t.x+e.y*t.y},o.multiplyComponents=function(e,t,r){return r.x=e.x*t.x,r.y=e.y*t.y,r},o.divideComponents=function(e,t,r){return r.x=e.x/t.x,r.y=e.y/t.y,r},o.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r},o.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r},o.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r},o.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r},o.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t},o.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};var u=new o;o.lerp=function(e,t,r,n){return o.multiplyByScalar(t,r,u),n=o.multiplyByScalar(e,1-r,n),o.add(u,n,n)};var c=new o,l=new o;o.angleBetween=function(e,t){return o.normalize(e,c),o.normalize(t,l),a.acosClamped(o.dot(c,l))};var d=new o;return o.mostOrthogonalAxis=function(e,t){var r=o.normalize(e,d);return o.abs(r,r),t=r.x<=r.y?o.clone(o.UNIT_X,t):o.clone(o.UNIT_Y,t)},o.equals=function(e,t){return e===t||r(e)&&r(t)&&e.x===t.x&&e.y===t.y},o.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]},o.equalsEpsilon=function(e,t,n,i){return e===t||r(e)&&r(t)&&a.equalsEpsilon(e.x,t.x,n,i)&&a.equalsEpsilon(e.y,t.y,n,i)},o.ZERO=i(new o(0,0)),o.UNIT_X=i(new o(1,0)),o.UNIT_Y=i(new o(0,1)),o.prototype.clone=function(e){return o.clone(this,e)},o.prototype.equals=function(e){return o.equals(this,e)},o.prototype.equalsEpsilon=function(e,t,r){return o.equalsEpsilon(this,e,t,r)},o.prototype.toString=function(){return"("+this.x+", "+this.y+")"},o}),define("Core/EllipsoidalOccluder",["./BoundingSphere","./Cartesian3","./Check","./defaultValue","./defined","./defineProperties","./Rectangle"],function(e,t,r,n,i,a,o){"use strict";function s(e,r){this._ellipsoid=e,this._cameraPosition=new t,this._cameraPositionInScaledSpace=new t,this._distanceToLimbInScaledSpaceSquared=0,i(r)&&(this.cameraPosition=r)}function u(e,r,n){var i=e.transformPositionToScaledSpace(r,p),a=t.magnitudeSquared(i),o=Math.sqrt(a),s=t.divideByScalar(i,o,m);a=Math.max(1,a),o=Math.max(1,o);var u=t.dot(s,n),c=t.magnitude(t.cross(s,n,s)),l=1/o,d=Math.sqrt(a-1)*l;return 1/(u*l-c*d)}function c(e,r,n){if(!(r<=0||r===1/0||r!==r))return t.multiplyByScalar(e,r,n)}function l(e,r){return t.equals(r,t.ZERO)?r:(e.transformPositionToScaledSpace(r,_),t.normalize(_,_))}a(s.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},cameraPosition:{get:function(){return this._cameraPosition},set:function(e){var r=this._ellipsoid,n=r.transformPositionToScaledSpace(e,this._cameraPositionInScaledSpace),i=t.magnitudeSquared(n)-1;t.clone(e,this._cameraPosition),this._cameraPositionInScaledSpace=n,this._distanceToLimbInScaledSpaceSquared=i}}});var d=new t;s.prototype.isPointVisible=function(e){var t=this._ellipsoid,r=t.transformPositionToScaledSpace(e,d);return this.isScaledSpacePointVisible(r)},s.prototype.isScaledSpacePointVisible=function(e){var r=this._cameraPositionInScaledSpace,n=this._distanceToLimbInScaledSpaceSquared,i=t.subtract(e,r,d),a=-t.dot(i,r),o=n<0?a>0:a>n&&a*a/t.magnitudeSquared(i)>n;return!o},s.prototype.computeHorizonCullingPoint=function(e,r,n){i(n)||(n=new t);for(var a=this._ellipsoid,o=l(a,e),s=0,d=0,f=r.length;d<f;++d){var h=r[d],p=u(a,h,o);s=Math.max(s,p)}return c(o,s,n)};var f=new t;s.prototype.computeHorizonCullingPointFromVertices=function(e,r,a,o,s){i(s)||(s=new t),o=n(o,t.ZERO);for(var d=this._ellipsoid,h=l(d,e),p=0,m=0,_=r.length;m<_;m+=a){f.x=r[m]+o.x,f.y=r[m+1]+o.y,f.z=r[m+2]+o.z;var E=u(d,f,h);p=Math.max(p,E)}return c(h,p,s)};var h=[];s.prototype.computeHorizonCullingPointFromRectangle=function(r,n,i){var a=o.subsample(r,n,0,h),s=e.fromPoints(a);if(!(t.magnitude(s.center)<.1*n.minimumRadius))return this.computeHorizonCullingPoint(s.center,a,i)};var p=new t,m=new t,_=new t;return s}),define("Core/QuadraticRealPolynomial",["./DeveloperError","./Math"],function(e,t){"use strict";function r(e,r,n){var i=e+r;return t.sign(e)!==t.sign(r)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(r)))<n?0:i}var n={};return n.computeDiscriminant=function(e,t,r){var n=t*t-4*e*r;return n},n.computeRealRoots=function(e,n,i){var a;if(0===e)return 0===n?[]:[-i/n];if(0===n){if(0===i)return[0,0];var o=Math.abs(i),s=Math.abs(e);if(o<s&&o/s<t.EPSILON14)return[0,0];if(o>s&&s/o<t.EPSILON14)return[];if(a=-i/e,a<0)return[];var u=Math.sqrt(a);return[-u,u]}if(0===i)return a=-n/e,a<0?[a,0]:[0,a];var c=n*n,l=4*e*i,d=r(c,-l,t.EPSILON14);if(d<0)return[];var f=-.5*r(n,t.sign(n)*Math.sqrt(d),t.EPSILON14);return n>0?[f/e,i/f]:[i/f,f/e]},n}),define("Core/CubicRealPolynomial",["./DeveloperError","./QuadraticRealPolynomial"],function(e,t){"use strict";function r(e,t,r,n){var i,a,o=e,s=t/3,u=r/3,c=n,l=o*u,d=s*c,f=s*s,h=u*u,p=o*u-f,m=o*c-s*u,_=s*c-h,E=4*p*_-m*m;if(E<0){var y,g,v;f*d>=l*h?(y=o,g=p,v=-2*s*p+o*m):(y=c,g=_,v=-c*m+2*u*_);var T=v<0?-1:1,w=-T*Math.abs(y)*Math.sqrt(-E);a=-v+w;var R=a/2,A=R<0?-Math.pow(-R,1/3):Math.pow(R,1/3),S=a===w?-A:-g/A;return i=g<=0?A+S:-v/(A*A+S*S+g),f*d>=l*h?[(i-s)/o]:[-c/(i+u)]}var I=p,O=-2*s*p+o*m,x=_,C=-c*m+2*u*_,N=Math.sqrt(E),b=Math.sqrt(3)/2,M=Math.abs(Math.atan2(o*N,-O)/3);i=2*Math.sqrt(-I);var U=Math.cos(M);a=i*U;var P=i*(-U/2-b*Math.sin(M)),D=a+P>2*s?a-s:P-s,L=o,B=D/L;M=Math.abs(Math.atan2(c*N,-C)/3),i=2*Math.sqrt(-x),U=Math.cos(M),a=i*U,P=i*(-U/2-b*Math.sin(M));var z=-c,F=a+P<2*u?a+u:P+u,k=z/F,q=L*F,G=-D*F-L*z,V=D*z,W=(u*G-s*V)/(-s*G+u*q);return B<=W?B<=k?W<=k?[B,W,k]:[B,k,W]:[k,B,W]:B<=k?[W,B,k]:W<=k?[W,k,B]:[k,W,B]}var n={};return n.computeDiscriminant=function(e,t,r,n){var i=e*e,a=t*t,o=r*r,s=n*n,u=18*e*t*r*n+a*o-27*i*s-4*(e*o*r+a*t*n);return u},n.computeRealRoots=function(e,n,i,a){var o,s;if(0===e)return t.computeRealRoots(n,i,a);if(0===n){if(0===i){if(0===a)return[0,0,0];s=-a/e;var u=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3);return[u,u,u]}return 0===a?(o=t.computeRealRoots(e,0,i),0===o.Length?[0]:[o[0],0,o[1]]):r(e,0,i,a)}return 0===i?0===a?(s=-n/e,s<0?[s,0,0]:[0,0,s]):r(e,n,0,a):0===a?(o=t.computeRealRoots(e,n,i),0===o.length?[0]:o[1]<=0?[o[0],o[1],0]:o[0]>=0?[0,o[0],o[1]]:[o[0],0,o[1]]):r(e,n,i,a)},n}),define("Core/QuarticRealPolynomial",["./CubicRealPolynomial","./DeveloperError","./Math","./QuadraticRealPolynomial"],function(e,t,r,n){"use strict";function i(t,i,a,o){var s=t*t,u=i-3*s/8,c=a-i*t/2+s*t/8,l=o-a*t/4+i*s/16-3*s*s/256,d=e.computeRealRoots(1,2*u,u*u-4*l,-c*c);if(d.length>0){var f=-t/4,h=d[d.length-1];if(Math.abs(h)<r.EPSILON14){var p=n.computeRealRoots(1,u,l);if(2===p.length){var m,_=p[0],E=p[1];if(_>=0&&E>=0){var y=Math.sqrt(_),g=Math.sqrt(E);return[f-g,f-y,f+y,f+g]}if(_>=0&&E<0)return m=Math.sqrt(_),[f-m,f+m];if(_<0&&E>=0)return m=Math.sqrt(E),[f-m,f+m]}return[]}if(h>0){var v=Math.sqrt(h),T=(u+h-c/v)/2,w=(u+h+c/v)/2,R=n.computeRealRoots(1,v,T),A=n.computeRealRoots(1,-v,w);return 0!==R.length?(R[0]+=f,R[1]+=f,0!==A.length?(A[0]+=f,A[1]+=f,R[1]<=A[0]?[R[0],R[1],A[0],A[1]]:A[1]<=R[0]?[A[0],A[1],R[0],R[1]]:R[0]>=A[0]&&R[1]<=A[1]?[A[0],R[0],R[1],A[1]]:A[0]>=R[0]&&A[1]<=R[1]?[R[0],A[0],A[1],R[1]]:R[0]>A[0]&&R[0]<A[1]?[A[0],R[0],A[1],R[1]]:[R[0],A[0],R[1],A[1]]):R):0!==A.length?(A[0]+=f,A[1]+=f,A):[]}}return[]}function a(t,i,a,o){var s=a*a,u=i*i,c=t*t,l=-2*i,d=a*t+u-4*o,f=c*o-a*i*t+s,h=e.computeRealRoots(1,l,d,f);if(h.length>0){var p,m,_=h[0],E=i-_,y=E*E,g=t/2,v=E/2,T=y-4*o,w=y+4*Math.abs(o),R=c-4*_,A=c+4*Math.abs(_);if(_<0||T*A<R*w){var S=Math.sqrt(R);p=S/2,m=0===S?0:(t*v-a)/S}else{var I=Math.sqrt(T);p=0===I?0:(t*v-a)/I,m=I/2}var O,x;0===g&&0===p?(O=0,x=0):r.sign(g)===r.sign(p)?(O=g+p,x=_/O):(x=g-p,O=_/x);var C,N;0===v&&0===m?(C=0,N=0):r.sign(v)===r.sign(m)?(C=v+m,N=o/C):(N=v-m,C=o/N);var b=n.computeRealRoots(1,O,C),M=n.computeRealRoots(1,x,N);if(0!==b.length)return 0!==M.length?b[1]<=M[0]?[b[0],b[1],M[0],M[1]]:M[1]<=b[0]?[M[0],M[1],b[0],b[1]]:b[0]>=M[0]&&b[1]<=M[1]?[M[0],b[0],b[1],M[1]]:M[0]>=b[0]&&M[1]<=b[1]?[b[0],M[0],M[1],b[1]]:b[0]>M[0]&&b[0]<M[1]?[M[0],b[0],M[1],b[1]]:[b[0],M[0],b[1],M[1]]:b;if(0!==M.length)return M}return[]}var o={};return o.computeDiscriminant=function(e,t,r,n,i){var a=e*e,o=a*e,s=t*t,u=s*t,c=r*r,l=c*r,d=n*n,f=d*n,h=i*i,p=h*i,m=s*c*d-4*u*f-4*e*l*d+18*e*t*r*f-27*a*d*d+256*o*p+i*(18*u*r*n-4*s*l+16*e*c*c-80*e*t*c*n-6*e*s*d+144*a*r*d)+h*(144*e*s*r-27*s*s-128*a*c-192*a*t*n);return m},o.computeRealRoots=function(t,n,o,s,u){if(Math.abs(t)<r.EPSILON15)return e.computeRealRoots(n,o,s,u);var c=n/t,l=o/t,d=s/t,f=u/t,h=c<0?1:0;switch(h+=l<0?h+1:h,h+=d<0?h+1:h,h+=f<0?h+1:h){case 0:return i(c,l,d,f);case 1:return a(c,l,d,f);case 2:return a(c,l,d,f);case 3:return i(c,l,d,f);case 4:return i(c,l,d,f);case 5:return a(c,l,d,f);case 6:return i(c,l,d,f);case 7:return i(c,l,d,f);case 8:return a(c,l,d,f);case 9:return i(c,l,d,f);case 10:return i(c,l,d,f);case 11:return a(c,l,d,f);case 12:return i(c,l,d,f);case 13:return i(c,l,d,f);case 14:return i(c,l,d,f);case 15:return i(c,l,d,f);default:return}},o}),define("Core/Ray",["./Cartesian3","./defaultValue","./defined","./DeveloperError"],function(e,t,r,n){"use strict";function i(r,n){n=e.clone(t(n,e.ZERO)),e.equals(n,e.ZERO)||e.normalize(n,n),this.origin=e.clone(t(r,e.ZERO)),this.direction=n}return i.getPoint=function(t,n,i){return r(i)||(i=new e),i=e.multiplyByScalar(t.direction,n,i),e.add(t.origin,i,i)},i}),define("Core/IntersectionTests",["./Cartesian3","./Cartographic","./defaultValue","./defined","./DeveloperError","./Interval","./Math","./Matrix3","./QuadraticRealPolynomial","./QuarticRealPolynomial","./Ray"],function(e,t,r,n,i,a,o,s,u,c,l){"use strict";function d(e,t,r,n){var i=t*t-4*e*r;if(!(i<0)){if(i>0){var a=1/(2*e),o=Math.sqrt(i),s=(-t+o)*a,u=(-t-o)*a;return s<u?(n.root0=s,n.root1=u):(n.root0=u,n.root1=s),n}var c=-t/(2*e);if(0!==c)return n.root0=n.root1=c,n}}function f(t,r,i){n(i)||(i=new a);var o=t.origin,s=t.direction,u=r.center,c=r.radius*r.radius,l=e.subtract(o,u,y),f=e.dot(s,s),h=2*e.dot(s,l),p=e.magnitudeSquared(l)-c,m=d(f,h,p,w);if(n(m))return i.start=m.root0,i.stop=m.root1,i}function h(e,t,r){var n=e+t;return o.sign(e)!==o.sign(t)&&Math.abs(n/Math.max(Math.abs(e),Math.abs(t)))<r?0:n}function p(t,r,n,i,a){var l,d=i*i,f=a*a,p=(t[s.COLUMN1ROW1]-t[s.COLUMN2ROW2])*f,m=a*(i*h(t[s.COLUMN1ROW0],t[s.COLUMN0ROW1],o.EPSILON15)+r.y),_=t[s.COLUMN0ROW0]*d+t[s.COLUMN2ROW2]*f+i*r.x+n,E=f*h(t[s.COLUMN2ROW1],t[s.COLUMN1ROW2],o.EPSILON15),y=a*(i*h(t[s.COLUMN2ROW0],t[s.COLUMN0ROW2])+r.z),g=[];if(0===y&&0===E){if(l=u.computeRealRoots(p,m,_),0===l.length)return g;var v=l[0],T=Math.sqrt(Math.max(1-v*v,0));if(g.push(new e(i,a*v,a*-T)),g.push(new e(i,a*v,a*T)),2===l.length){var w=l[1],R=Math.sqrt(Math.max(1-w*w,0));g.push(new e(i,a*w,a*-R)),g.push(new e(i,a*w,a*R))}return g}var A=y*y,S=E*E,I=p*p,O=y*E,x=I+S,C=2*(m*p+O),N=2*_*p+m*m-S+A,b=2*(_*m-O),M=_*_-A;if(0===x&&0===C&&0===N&&0===b)return g;l=c.computeRealRoots(x,C,N,b,M);var U=l.length;if(0===U)return g;for(var P=0;P<U;++P){var D,L=l[P],B=L*L,z=Math.max(1-B,0),F=Math.sqrt(z);D=o.sign(p)===o.sign(_)?h(p*B+_,m*L,o.EPSILON12):o.sign(_)===o.sign(m*L)?h(p*B,m*L+_,o.EPSILON12):h(p*B+m*L,_,o.EPSILON12);var k=h(E*L,y,o.EPSILON15),q=D*k;q<0?g.push(new e(i,a*L,a*F)):q>0?g.push(new e(i,a*L,a*-F)):0!==F?(g.push(new e(i,a*L,a*-F)),g.push(new e(i,a*L,a*F)),++P):g.push(new e(i,a*L,a*F))}return g}var m={};m.rayPlane=function(t,r,i){n(i)||(i=new e);var a=t.origin,s=t.direction,u=r.normal,c=e.dot(u,s);if(!(Math.abs(c)<o.EPSILON15)){var l=(-r.distance-e.dot(u,a))/c;if(!(l<0))return i=e.multiplyByScalar(s,l,i),e.add(a,i,i)}};var _=new e,E=new e,y=new e,g=new e,v=new e;m.rayTriangleParametric=function(t,n,i,a,s){s=r(s,!1);var u,c,l,d,f,h=t.origin,p=t.direction,m=e.subtract(i,n,_),T=e.subtract(a,n,E),w=e.cross(p,T,y),R=e.dot(m,w);if(s){if(R<o.EPSILON6)return;if(u=e.subtract(h,n,g),l=e.dot(u,w),l<0||l>R)return;if(c=e.cross(u,m,v),d=e.dot(p,c),d<0||l+d>R)return;f=e.dot(T,c)/R}else{if(Math.abs(R)<o.EPSILON6)return;var A=1/R;if(u=e.subtract(h,n,g),l=e.dot(u,w)*A,l<0||l>1)return;if(c=e.cross(u,m,v),d=e.dot(p,c)*A,d<0||l+d>1)return;f=e.dot(T,c)*A}return f},m.rayTriangle=function(t,r,i,a,o,s){var u=m.rayTriangleParametric(t,r,i,a,o);if(n(u)&&!(u<0))return n(s)||(s=new e),e.multiplyByScalar(t.direction,u,s),e.add(t.origin,s,s)};var T=new l;m.lineSegmentTriangle=function(t,r,i,a,o,s,u){var c=T;e.clone(t,c.origin),e.subtract(r,t,c.direction),e.normalize(c.direction,c.direction);var l=m.rayTriangleParametric(c,i,a,o,s);if(!(!n(l)||l<0||l>e.distance(t,r)))return n(u)||(u=new e),e.multiplyByScalar(c.direction,l,u),e.add(c.origin,u,u)};var w={root0:0,root1:0};m.raySphere=function(e,t,r){if(r=f(e,t,r),n(r)&&!(r.stop<0))return r.start=Math.max(r.start,0),r};var R=new l;m.lineSegmentSphere=function(t,r,i,a){var o=R;e.clone(t,o.origin);var s=e.subtract(r,t,o.direction),u=e.magnitude(s);if(e.normalize(s,s),a=f(o,i,a),!(!n(a)||a.stop<0||a.start>u))return a.start=Math.max(a.start,0),a.stop=Math.min(a.stop,u),a};var A=new e,S=new e;m.rayEllipsoid=function(t,r){var n,i,o,s,u,c=r.oneOverRadii,l=e.multiplyComponents(c,t.origin,A),d=e.multiplyComponents(c,t.direction,S),f=e.magnitudeSquared(l),h=e.dot(l,d);if(f>1){if(h>=0)return;var p=h*h;if(n=f-1,i=e.magnitudeSquared(d),o=i*n,p<o)return;if(p>o){s=h*h-o,u=-h+Math.sqrt(s);var m=u/i,_=n/u;return m<_?new a(m,_):{start:_,stop:m}}var E=Math.sqrt(n/i);return new a(E,E)}return f<1?(n=f-1,i=e.magnitudeSquared(d),o=i*n,s=h*h-o,u=-h+Math.sqrt(s),new a(0,u/i)):h<0?(i=e.magnitudeSquared(d),new a(0,-h/i)):void 0};var I=new e,O=new e,x=new e,C=new e,N=new e,b=new s,M=new s,U=new s,P=new s,D=new s,L=new s,B=new s,z=new e,F=new e,k=new t;m.grazingAltitudeLocation=function(t,r){var i=t.origin,a=t.direction;if(!e.equals(i,e.ZERO)){var u=r.geodeticSurfaceNormal(i,I);if(e.dot(a,u)>=0)return i}var c=n(this.rayEllipsoid(t,r)),l=r.transformPositionToScaledSpace(a,I),d=e.normalize(l,l),f=e.mostOrthogonalAxis(l,C),h=e.normalize(e.cross(f,d,O),O),m=e.normalize(e.cross(d,h,x),x),_=b;_[0]=d.x,_[1]=d.y,_[2]=d.z,_[3]=h.x,_[4]=h.y,_[5]=h.z,_[6]=m.x,_[7]=m.y,_[8]=m.z;var E=s.transpose(_,M),y=s.fromScale(r.radii,U),g=s.fromScale(r.oneOverRadii,P),v=D;v[0]=0,v[1]=-a.z,v[2]=a.y,v[3]=a.z,v[4]=0,v[5]=-a.x,v[6]=-a.y,v[7]=a.x,v[8]=0;var T,w,R=s.multiply(s.multiply(E,g,L),v,L),A=s.multiply(s.multiply(R,y,B),_,B),S=s.multiplyByVector(R,i,N),q=p(A,e.negate(S,I),0,0,1),G=q.length;if(G>0){for(var V=e.clone(e.ZERO,F),W=Number.NEGATIVE_INFINITY,X=0;X<G;++X){T=s.multiplyByVector(y,s.multiplyByVector(_,q[X],z),z);var H=e.normalize(e.subtract(T,i,C),C),Y=e.dot(H,a);Y>W&&(W=Y,V=e.clone(T,V))}var j=r.cartesianToCartographic(V,k);return W=o.clamp(W,0,1),w=e.magnitude(e.subtract(V,i,C))*Math.sqrt(1-W*W),w=c?-w:w,j.height=w,r.cartographicToCartesian(j,new e)}};var q=new e;return m.lineSegmentPlane=function(t,r,i,a){n(a)||(a=new e);var s=e.subtract(r,t,q),u=i.normal,c=e.dot(u,s);if(!(Math.abs(c)<o.EPSILON6)){var l=e.dot(u,t),d=-(i.distance+l)/c;if(!(d<0||d>1))return e.multiplyByScalar(s,d,a),e.add(t,a,a),a}},m.trianglePlaneIntersection=function(t,r,n,i){var a=i.normal,o=i.distance,s=e.dot(a,t)+o<0,u=e.dot(a,r)+o<0,c=e.dot(a,n)+o<0,l=0;l+=s?1:0,l+=u?1:0,l+=c?1:0;var d,f;if(1!==l&&2!==l||(d=new e,f=new e),1===l){if(s)return m.lineSegmentPlane(t,r,i,d),m.lineSegmentPlane(t,n,i,f),{positions:[t,r,n,d,f],indices:[0,3,4,1,2,4,1,4,3]};if(u)return m.lineSegmentPlane(r,n,i,d),m.lineSegmentPlane(r,t,i,f),{positions:[t,r,n,d,f],indices:[1,3,4,2,0,4,2,4,3]};if(c)return m.lineSegmentPlane(n,t,i,d),m.lineSegmentPlane(n,r,i,f),{positions:[t,r,n,d,f],indices:[2,3,4,0,1,4,0,4,3]}}else if(2===l){if(!s)return m.lineSegmentPlane(r,t,i,d),m.lineSegmentPlane(n,t,i,f),{positions:[t,r,n,d,f],indices:[1,2,4,1,4,3,0,3,4]};if(!u)return m.lineSegmentPlane(n,r,i,d),m.lineSegmentPlane(t,r,i,f),{positions:[t,r,n,d,f],indices:[2,0,4,2,4,3,1,3,4]};if(!c)return m.lineSegmentPlane(t,n,i,d),m.lineSegmentPlane(r,n,i,f),{positions:[t,r,n,d,f],indices:[0,1,4,0,4,3,2,3,4]}}},m}),define("Core/Plane",["./Cartesian3","./Check","./defined","./DeveloperError","./freezeObject","./Math","./Matrix4"],function(e,t,r,n,i,a,o){"use strict";function s(t,r){this.normal=e.clone(t),this.distance=r}s.fromPointNormal=function(t,n,i){var a=-e.dot(n,t);return r(i)?(e.clone(n,i.normal),i.distance=a,i):new s(n,a)};var u=new e;s.fromCartesian4=function(t,n){var i=e.fromCartesian4(t,u),a=t.w;return r(n)?(e.clone(i,n.normal),n.distance=a,n):new s(i,a)},s.getPointDistance=function(t,r){return e.dot(t.normal,r)+t.distance};var c=new e;s.projectPointOntoPlane=function(t,n,i){r(i)||(i=new e);var a=s.getPointDistance(t,n),o=e.multiplyByScalar(t.normal,a,c);return e.subtract(n,o,i)};var l=new e;return s.transform=function(t,r,n){return o.multiplyByPointAsVector(r,t.normal,u),e.normalize(u,u),e.multiplyByScalar(t.normal,-t.distance,l),o.multiplyByPoint(r,l,l),s.fromPointNormal(l,u,n)},s.clone=function(t,n){return r(n)?(e.clone(t.normal,n.normal),n.distance=t.distance,n):new s(t.normal,t.distance)},s.equals=function(t,r){return t.distance===r.distance&&e.equals(t.normal,r.normal)},s.ORIGIN_XY_PLANE=i(new s(e.UNIT_Z,0)),s.ORIGIN_YZ_PLANE=i(new s(e.UNIT_X,0)),s.ORIGIN_ZX_PLANE=i(new s(e.UNIT_Y,0)),s}),function(e){"use strict";e("ThirdParty/when",[],function(){function e(e,r,n,i){return t(e).then(r,n,i)}function t(e){var t,r;return e instanceof n?t=e:s(e)?(r=o(),e.then(function(e){r.resolve(e)},function(e){r.reject(e)},function(e){r.progress(e)}),t=r.promise):t=i(e),t}function r(t){return e(t,a)}function n(e){this.then=e}function i(e){var r=new n(function(r){try{return t(r?r(e):e)}catch(e){return a(e)}});return r}function a(e){var r=new n(function(r,n){try{return n?t(n(e)):a(e)}catch(e){return a(e)}});return r}function o(){function e(e,t,r){return f(e,t,r)}function r(e){return p(e)}function i(e){return p(a(e))}function s(e){return h(e)}var u,c,l,d,f,h,p;return c=new n(e),u={then:e,resolve:r,reject:i,progress:s,promise:c,resolver:{resolve:r,reject:i,progress:s}},l=[],d=[],f=function(e,t,r){var n,i;return n=o(),i="function"==typeof r?function(e){try{n.progress(r(e))}catch(e){n.progress(e)}}:function(e){n.progress(e)},l.push(function(r){r.then(e,t).then(n.resolve,n.reject,i)}),d.push(i),n.promise},h=function(e){return m(d,e),e},p=function(e){return e=t(e),f=e.then,p=t,h=E,m(l,e),d=l=T,e},u}function s(e){return e&&"function"==typeof e.then}function u(t,r,n,i,a){return _(2,arguments),e(t,function(t){function s(e){m(e)}function u(e){p(e)}var c,l,d,f,h,p,m,_,y,g;if(y=t.length>>>0,c=Math.max(0,Math.min(r,y)),d=[],l=y-c+1,f=[],h=o(),c)for(_=h.progress,m=function(e){f.push(e),--l||(p=m=E,h.reject(f))},p=function(e){d.push(e),--c||(p=m=E,h.resolve(d))},g=0;g<y;++g)g in t&&e(t[g],u,s,_);else h.resolve(d);return h.then(n,i,a)})}function c(e,t,r,n){function i(e){return t?t(e[0]):e[0]}return u(e,1,i,r,n)}function l(e,t,r,n){return _(1,arguments),f(e,y).then(t,r,n)}function d(){return f(arguments,y)}function f(t,r){return e(t,function(t){var n,i,a,s,u,c;if(a=i=t.length>>>0,n=[],c=o(),a)for(s=function(t,i){e(t,r).then(function(e){n[i]=e,--a||c.resolve(n)},c.reject)},u=0;u<i;u++)u in t?s(t[u],u):--a;else c.resolve(n);return c.promise})}function h(t,r){var n=v.call(arguments,1);return e(t,function(t){var i;return i=t.length,n[0]=function(t,n,a){return e(t,function(t){return e(n,function(e){return r(t,e,a,i)})})},g.apply(t,n)})}function p(t,r,n){var i=arguments.length>2;return e(t,function(e){return e=i?n:e,r.resolve(e),e},function(e){return r.reject(e),a(e)},r.progress)}function m(e,t){for(var r,n=0;r=e[n++];)r(t)}function _(e,t){for(var r,n=t.length;n>e;)if(r=t[--n],null!=r&&"function"!=typeof r)throw new Error("arg "+n+" must be a function")}function E(){}function y(e){return e}var g,v,T;return e.defer=o,e.resolve=t,e.reject=r,e.join=d,e.all=l,e.map=f,e.reduce=h,e.any=c,e.some=u,e.chain=p,e.isPromise=s,n.prototype={always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(T,e)},yield:function(e){return this.then(function(){return e})},spread:function(e){return this.then(function(t){return l(t,function(t){return e.apply(T,t)})})}},v=[].slice,g=[].reduce||function(e){var t,r,n,i,a;if(a=0,t=Object(this),i=t.length>>>0,r=arguments,r.length<=1)for(;;){if(a in t){n=t[a++];break}if(++a>=i)throw new TypeError}else n=r[1];for(;a<i;++a)a in t&&(n=e(n,t[a],a,t));return n},e})}("function"==typeof define&&define.amd?define:function(e){"object"==typeof exports?module.exports=e():this.when=e()}),define("Core/binarySearch",["./Check"],function(e){"use strict";function t(e,t,r){for(var n,i,a=0,o=e.length-1;a<=o;)if(n=~~((a+o)/2),i=r(e[n],t),i<0)a=n+1;else{if(!(i>0))return n;o=n-1}return~(o+1)}return t}),define("Core/EarthOrientationParametersSample",[],function(){"use strict";function e(e,t,r,n,i){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=i}return e}),define("ThirdParty/sprintf",[],function(){function e(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,r=0,n=t[r++],i=function(e,t,r,n){r||(r=" ");var i=e.length>=t?"":Array(1+t-e.length>>>0).join(r);return n?e+i:i+e},a=function(e,t,r,n,a,o){var s=n-e.length;return s>0&&(e=r||!a?i(e,n,o,r):e.slice(0,t.length)+i("",s,"0",!0)+e.slice(t.length)),e},o=function(e,t,r,n,o,s,u){var c=e>>>0;return r=r&&c&&{2:"0b",8:"0",16:"0x"}[t]||"",e=r+i(c.toString(t),s||0,"0",!1),a(e,r,n,o,u)},s=function(e,t,r,n,i,o){return null!=n&&(e=e.slice(0,n)),a(e,"",t,r,i,o)},u=function(e,n,u,c,l,d,f){var h,p,m,_,E;if("%%"==e)return"%";for(var y=!1,g="",v=!1,T=!1,w=" ",R=u.length,A=0;u&&A<R;A++)switch(u.charAt(A)){case" ":g=" ";break;case"+":g="+";break;case"-":y=!0;break;case"'":w=u.charAt(A+1);break;case"0":v=!0;break;case"#":T=!0}if(c=c?"*"==c?+t[r++]:"*"==c.charAt(0)?+t[c.slice(1,-1)]:+c:0,c<0&&(c=-c,y=!0),!isFinite(c))throw new Error("sprintf: (minimum-)width must be finite");switch(d=d?"*"==d?+t[r++]:"*"==d.charAt(0)?+t[d.slice(1,-1)]:+d:"fFeE".indexOf(f)>-1?6:"d"==f?0:void 0,E=n?t[n.slice(0,-1)]:t[r++],f){case"s":return s(String(E),y,c,d,v,w);case"c":return s(String.fromCharCode(+E),y,c,d,v);case"b":return o(E,2,T,y,c,d,v);case"o":return o(E,8,T,y,c,d,v);case"x":return o(E,16,T,y,c,d,v);case"X":return o(E,16,T,y,c,d,v).toUpperCase();case"u":return o(E,10,T,y,c,d,v);case"i":case"d":return h=+E||0,h=Math.round(h-h%1),p=h<0?"-":g,E=p+i(String(Math.abs(h)),d,"0",!1),a(E,p,y,c,v);case"e":case"E":case"f":case"F":case"g":case"G":return h=+E,p=h<0?"-":g,m=["toExponential","toFixed","toPrecision"]["efg".indexOf(f.toLowerCase())],_=["toString","toUpperCase"]["eEfFgG".indexOf(f)%2],E=p+Math.abs(h)[m](d),a(E,p,y,c,v)[_]();default:return e}};return n.replace(e,u)}return e}),define("Core/GregorianDate",[],function(){"use strict";function e(e,t,r,n,i,a,o,s){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=i,this.second=a,this.millisecond=o,this.isLeapSecond=s}return e}),define("Core/isLeapYear",["./DeveloperError"],function(e){"use strict";function t(e){return e%4===0&&e%100!==0||e%400===0}return t}),define("Core/LeapSecond",[],function(){"use strict";function e(e,t){this.julianDate=e,this.offset=t}return e}),define("Core/TimeConstants",["./freezeObject"],function(e){"use strict";var t={SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5};return e(t)}),define("Core/TimeStandard",["./freezeObject"],function(e){"use strict";var t={UTC:0,TAI:1};return e(t)}),define("Core/JulianDate",["../ThirdParty/sprintf","./binarySearch","./defaultValue","./defined","./DeveloperError","./GregorianDate","./isLeapYear","./LeapSecond","./TimeConstants","./TimeStandard"],function(e,t,r,n,i,a,o,s,u,c){"use strict";function l(e,t){return m.compare(e.julianDate,t.julianDate)}function d(e){g.julianDate=e;var r=m.leapSeconds,n=t(r,g,l);n<0&&(n=~n),n>=r.length&&(n=r.length-1);var i=r[n].offset;if(n>0){var a=m.secondsDifference(r[n].julianDate,e);a>i&&(n--,i=r[n].offset)}m.addSeconds(e,i,e)}function f(e,r){g.julianDate=e;var n=m.leapSeconds,i=t(n,g,l);if(i<0&&(i=~i),0===i)return m.addSeconds(e,-n[0].offset,r);if(i>=n.length)return m.addSeconds(e,-n[i-1].offset,r);var a=m.secondsDifference(n[i].julianDate,e);return 0===a?m.addSeconds(e,-n[i].offset,r):a<=1?void 0:m.addSeconds(e,-n[--i].offset,r)}function h(e,t,r){var n=t/u.SECONDS_PER_DAY|0;return e+=n,t-=u.SECONDS_PER_DAY*n,t<0&&(e--,t+=u.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function p(e,t,r,n,i,a,o){var s=(t-14)/12|0,c=e+4800+s,l=(1461*c/4|0)+(367*(t-2-12*s)/12|0)-(3*((c+100)/100|0)/4|0)+r-32075;n-=12,n<0&&(n+=24);var d=a+(n*u.SECONDS_PER_HOUR+i*u.SECONDS_PER_MINUTE+o*u.SECONDS_PER_MILLISECOND);return d>=43200&&(l-=1),[l,d]}function m(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=r(e,0),t=r(t,0),n=r(n,c.UTC);var i=0|e;t+=(e-i)*u.SECONDS_PER_DAY,h(i,t,this),n===c.UTC&&d(this)}var _=new a,E=[31,28,31,30,31,30,31,31,30,31,30,31],y=29,g=new s,v=/^(\d{4})$/,T=/^(\d{4})-(\d{2})$/,w=/^(\d{4})-?(\d{3})$/,R=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,A=/^(\d{4})-?(\d{2})-?(\d{2})$/,S=/([Z+\-])?(\d{2})?:?(\d{2})?$/,I=/^(\d{2})(\.\d+)?/.source+S.source,O=/^(\d{2}):?(\d{2})(\.\d+)?/.source+S.source,x=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+S.source;m.fromGregorianDate=function(e,t){var r=p(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return n(t)?(h(r[0],r[1],t),d(t),t):new m(r[0],r[1],c.UTC)},m.fromDate=function(e,t){var r=p(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return n(t)?(h(r[0],r[1],t),d(t),t):new m(r[0],r[1],c.UTC)},m.fromIso8601=function(e,t){e=e.replace(",",".");var r,i,a,s=e.split("T"),u=1,l=1,f=0,_=0,g=0,S=0,C=s[0],N=s[1];if(s=C.match(A),null!==s)r=+s[1],u=+s[2],l=+s[3];else if(s=C.match(T),null!==s)r=+s[1],u=+s[2];else if(s=C.match(v),null!==s)r=+s[1];else{var b;if(s=C.match(w),null!==s)r=+s[1],b=+s[2],a=o(r);else if(s=C.match(R),null!==s){r=+s[1];var M=+s[2],U=+s[3]||0,P=new Date(Date.UTC(r,0,4));b=7*M+U-P.getUTCDay()-3}i=new Date(Date.UTC(r,0,1)),i.setUTCDate(b),u=i.getUTCMonth()+1,l=i.getUTCDate()}a=o(r);var D;if(n(N)){s=N.match(x),null!==s?(f=+s[1],_=+s[2],g=+s[3],S=1e3*+(s[4]||0),D=5):(s=N.match(O),null!==s?(f=+s[1],_=+s[2],g=60*+(s[3]||0),D=4):(s=N.match(I),null!==s&&(f=+s[1],_=60*+(s[2]||0),D=3)));var L=s[D],B=+s[D+1],z=+(s[D+2]||0);switch(L){case"+":f-=B,_-=z;break;case"-":f+=B,_+=z;break;case"Z":break;default:_+=new Date(Date.UTC(r,u-1,l,f,_)).getTimezoneOffset()}}var F=60===g;for(F&&g--;_>=60;)_-=60,f++;for(;f>=24;)f-=24,l++;for(i=a&&2===u?y:E[u-1];l>i;)l-=i,u++,u>12&&(u-=12,r++),i=a&&2===u?y:E[u-1];for(;_<0;)_+=60,f--;for(;f<0;)f+=24,l--;for(;l<1;)u--,u<1&&(u+=12,r--),i=a&&2===u?y:E[u-1],l+=i;var k=p(r,u,l,f,_,g,S);return n(t)?(h(k[0],k[1],t),d(t)):t=new m(k[0],k[1],c.UTC),F&&m.addSeconds(t,1,t),t},m.now=function(e){return m.fromDate(new Date,e)};var C=new m(0,0,c.TAI);return m.toGregorianDate=function(e,t){var r=!1,i=f(e,C);n(i)||(m.addSeconds(e,-1,C),i=f(C,C),r=!0);var o=i.dayNumber,s=i.secondsOfDay;s>=43200&&(o+=1);var c=o+68569|0,l=4*c/146097|0;c=c-((146097*l+3)/4|0)|0;var d=4e3*(c+1)/1461001|0;c=c-(1461*d/4|0)+31|0;var h=80*c/2447|0,p=c-(2447*h/80|0)|0;c=h/11|0;var _=h+2-12*c|0,E=100*(l-49)+d+c|0,y=s/u.SECONDS_PER_HOUR|0,g=s-y*u.SECONDS_PER_HOUR,v=g/u.SECONDS_PER_MINUTE|0;g-=v*u.SECONDS_PER_MINUTE;var T=0|g,w=(g-T)/u.SECONDS_PER_MILLISECOND;return y+=12,y>23&&(y-=24),r&&(T+=1),n(t)?(t.year=E,t.month=_,t.day=p,t.hour=y,t.minute=v,t.second=T,t.millisecond=w,t.isLeapSecond=r,t):new a(E,_,p,y,v,T,w,r)},m.toDate=function(e){var t=m.toGregorianDate(e,_),r=t.second;return t.isLeapSecond&&(r-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,r,t.millisecond))},m.toIso8601=function(t,r){var i,a=m.toGregorianDate(t,_);return n(r)||0===a.millisecond?n(r)&&0!==r?(i=(.01*a.millisecond).toFixed(r).replace(".","").slice(0,r),e("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a.year,a.month,a.day,a.hour,a.minute,a.second,i)):e("%04d-%02d-%02dT%02d:%02d:%02dZ",a.year,a.month,a.day,a.hour,a.minute,a.second):(i=(.01*a.millisecond).toString().replace(".",""),e("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a.year,a.month,a.day,a.hour,a.minute,a.second,i))},m.clone=function(e,t){if(n(e))return n(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new m(e.dayNumber,e.secondsOfDay,c.TAI)},m.compare=function(e,t){var r=e.dayNumber-t.dayNumber;return 0!==r?r:e.secondsOfDay-t.secondsOfDay},m.equals=function(e,t){return e===t||n(e)&&n(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},m.equalsEpsilon=function(e,t,r){return e===t||n(e)&&n(t)&&Math.abs(m.secondsDifference(e,t))<=r},m.totalDays=function(e){return e.dayNumber+e.secondsOfDay/u.SECONDS_PER_DAY},m.secondsDifference=function(e,t){var r=(e.dayNumber-t.dayNumber)*u.SECONDS_PER_DAY;return r+(e.secondsOfDay-t.secondsOfDay)},m.daysDifference=function(e,t){var r=e.dayNumber-t.dayNumber,n=(e.secondsOfDay-t.secondsOfDay)/u.SECONDS_PER_DAY;return r+n},m.computeTaiMinusUtc=function(e){g.julianDate=e;var r=m.leapSeconds,n=t(r,g,l);return n<0&&(n=~n,--n,n<0&&(n=0)),r[n].offset},m.addSeconds=function(e,t,r){return h(e.dayNumber,e.secondsOfDay+t,r)},m.addMinutes=function(e,t,r){var n=e.secondsOfDay+t*u.SECONDS_PER_MINUTE;return h(e.dayNumber,n,r)},m.addHours=function(e,t,r){var n=e.secondsOfDay+t*u.SECONDS_PER_HOUR;return h(e.dayNumber,n,r)},m.addDays=function(e,t,r){var n=e.dayNumber+t;return h(n,e.secondsOfDay,r)},m.lessThan=function(e,t){return m.compare(e,t)<0},m.lessThanOrEquals=function(e,t){return m.compare(e,t)<=0},m.greaterThan=function(e,t){return m.compare(e,t)>0},m.greaterThanOrEquals=function(e,t){return m.compare(e,t)>=0},m.prototype.clone=function(e){return m.clone(this,e)},m.prototype.equals=function(e){return m.equals(this,e)},m.prototype.equalsEpsilon=function(e,t){return m.equalsEpsilon(this,e,t)},m.prototype.toString=function(){return m.toIso8601(this)},m.leapSeconds=[new s(new m(2441317,43210,c.TAI),10),new s(new m(2441499,43211,c.TAI),11),new s(new m(2441683,43212,c.TAI),12),new s(new m(2442048,43213,c.TAI),13),new s(new m(2442413,43214,c.TAI),14),new s(new m(2442778,43215,c.TAI),15),new s(new m(2443144,43216,c.TAI),16),new s(new m(2443509,43217,c.TAI),17),new s(new m(2443874,43218,c.TAI),18),new s(new m(2444239,43219,c.TAI),19),new s(new m(2444786,43220,c.TAI),20),new s(new m(2445151,43221,c.TAI),21),new s(new m(2445516,43222,c.TAI),22),new s(new m(2446247,43223,c.TAI),23),new s(new m(2447161,43224,c.TAI),24),new s(new m(2447892,43225,c.TAI),25),new s(new m(2448257,43226,c.TAI),26),new s(new m(2448804,43227,c.TAI),27),new s(new m(2449169,43228,c.TAI),28),new s(new m(2449534,43229,c.TAI),29),new s(new m(2450083,43230,c.TAI),30),new s(new m(2450630,43231,c.TAI),31),new s(new m(2451179,43232,c.TAI),32),new s(new m(2453736,43233,c.TAI),33),new s(new m(2454832,43234,c.TAI),34),new s(new m(2456109,43235,c.TAI),35),new s(new m(2457204,43236,c.TAI),36),new s(new m(2457754,43237,c.TAI),37)],m}),define("Core/appendForwardSlash",[],function(){"use strict";function e(e){return 0!==e.length&&"/"===e[e.length-1]||(e+="/"),e}return e}),define("Core/clone",["./defaultValue"],function(e){"use strict";function t(r,n){if(null===r||"object"!=typeof r)return r;n=e(n,!1);var i=new r.constructor;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];n&&(o=t(o,n)),i[a]=o}return i}return t}),define("Core/combine",["./defaultValue","./defined"],function(e,t){"use strict";function r(n,i,a){a=e(a,!1);var o,s,u,c={},l=t(n),d=t(i);if(l)for(o in n)n.hasOwnProperty(o)&&(s=n[o],d&&a&&"object"==typeof s&&i.hasOwnProperty(o)?(u=i[o],
"object"==typeof u?c[o]=r(s,u,a):c[o]=s):c[o]=s);if(d)for(o in i)i.hasOwnProperty(o)&&!c.hasOwnProperty(o)&&(u=i[o],c[o]=u);return c}return r}),define("Core/oneTimeWarning",["./defaultValue","./defined","./DeveloperError"],function(e,t,r){"use strict";function n(r,n){t(i[r])||(i[r]=!0,console.warn(e(n,r)))}var i={};return n.geometryOutlines="Entity geometry outlines are unsupported on terrain. Outlines will be disabled. To enable outlines, disable geometry terrain clamping by explicitly setting height to 0.",n}),define("Core/deprecationWarning",["./defined","./DeveloperError","./oneTimeWarning"],function(e,t,r){"use strict";function n(e,t){r(e,t)}return n}),define("ThirdParty/Uri",[],function(){function e(t){if(t instanceof e)this.scheme=t.scheme,this.authority=t.authority,this.path=t.path,this.query=t.query,this.fragment=t.fragment;else if(t){var r=n.exec(t);this.scheme=r[1],this.authority=r[2],this.path=r[3],this.query=r[4],this.fragment=r[5]}}function t(e){var t=unescape(e);return a.test(t)?t:e.toUpperCase()}function r(e,t,r,n){return(t||"")+r.toLowerCase()+(n||"")}e.prototype.scheme=null,e.prototype.authority=null,e.prototype.path="",e.prototype.query=null,e.prototype.fragment=null;var n=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");e.prototype.getScheme=function(){return this.scheme},e.prototype.getAuthority=function(){return this.authority},e.prototype.getPath=function(){return this.path},e.prototype.getQuery=function(){return this.query},e.prototype.getFragment=function(){return this.fragment},e.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},e.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},e.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},e.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(o,r).replace(i,t)),this.path&&(this.path=this.path.replace(i,t)),this.query&&(this.query=this.query.replace(i,t)),this.fragment&&(this.fragment=this.fragment.replace(i,t))};var i=/%[0-9a-z]{2}/gi,a=/[a-zA-Z0-9\-\._~]/,o=/(.*@)?([^@:]*)(:.*)?/;return e.prototype.resolve=function(t){var r=new e;return this.scheme?(r.scheme=this.scheme,r.authority=this.authority,r.path=this.path,r.query=this.query):(r.scheme=t.scheme,this.authority?(r.authority=this.authority,r.path=this.path,r.query=this.query):(r.authority=t.authority,""==this.path?(r.path=t.path,r.query=this.query||t.query):("/"==this.path.charAt(0)?(r.path=this.path,r.removeDotSegments()):(t.authority&&""==t.path?r.path="/"+this.path:r.path=t.path.substring(0,t.path.lastIndexOf("/")+1)+this.path,r.removeDotSegments()),r.query=this.query))),r.fragment=this.fragment,r},e.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),r=[],n=""==t[0];n&&t.shift();for(""==t[0]?t.shift():null;t.length;)e=t.shift(),".."==e?r.pop():"."!=e&&r.push(e);"."!=e&&".."!=e||r.push(""),n&&r.unshift(""),this.path=r.join("/")},e.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},e}),define("Core/getAbsoluteUri",["../ThirdParty/Uri","./defaultValue","./defined","./DeveloperError"],function(e,t,r,n){"use strict";function i(e,t){return i._implementation(e,t,document)}return i._implementation=function(r,n,i){n=t(n,t(i.baseURI,i.location.href));var a=new e(n),o=new e(r);return o.resolve(a).toString()},i}),define("Core/getBaseUri",["../ThirdParty/Uri","./defined","./DeveloperError"],function(e,t,r){"use strict";function n(r,n){var i="",a=r.lastIndexOf("/");return a!==-1&&(i=r.substring(0,a+1)),n?(r=new e(r),t(r.query)&&(i+="?"+r.query),t(r.fragment)&&(i+="#"+r.fragment),i):i}return n}),define("Core/getExtensionFromUri",["../ThirdParty/Uri","./defined","./DeveloperError"],function(e,t,r){"use strict";function n(t){var r=new e(t);r.normalize();var n=r.path,i=n.lastIndexOf("/");return i!==-1&&(n=n.substr(i+1)),i=n.lastIndexOf("."),n=i===-1?"":n.substr(i+1)}return n}),define("Core/isBlobUri",["./Check"],function(e){"use strict";function t(e){return r.test(e)}var r=/^blob:/i;return t}),define("Core/isCrossOriginUrl",["./defined"],function(e){"use strict";function t(t){e(r)||(r=document.createElement("a")),r.href=window.location.href;var n=r.host,i=r.protocol;return r.href=t,r.href=r.href,i!==r.protocol||n!==r.host}var r;return t}),define("Core/isDataUri",["./Check"],function(e){"use strict";function t(e){return r.test(e)}var r=/^data:/i;return t}),define("Core/isArray",["./defined"],function(e){"use strict";var t=Array.isArray;return e(t)||(t=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),t}),define("Core/objectToQuery",["./defined","./DeveloperError","./isArray"],function(e,t,r){"use strict";function n(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],a=encodeURIComponent(n)+"=";if(r(i))for(var o=0,s=i.length;o<s;++o)t+=a+encodeURIComponent(i[o])+"&";else t+=a+encodeURIComponent(i)+"&"}return t=t.slice(0,-1)}return n}),define("Core/queryToObject",["./defined","./DeveloperError","./isArray"],function(e,t,r){"use strict";function n(t){var n={};if(""===t)return n;for(var i=t.replace(/\+/g,"%20").split(/[&;]/),a=0,o=i.length;a<o;++a){var s=i[a].split("="),u=decodeURIComponent(s[0]),c=s[1];c=e(c)?decodeURIComponent(c):"";var l=n[u];"string"==typeof l?n[u]=[l,c]:r(l)?l.push(c):n[u]=c}return n}return n}),define("Core/RequestState",["../Core/freezeObject"],function(e){"use strict";var t={UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5};return e(t)}),define("Core/RequestType",["../Core/freezeObject"],function(e){"use strict";var t={TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3};return e(t)}),define("Core/Request",["./defaultValue","./defined","./RequestState","./RequestType"],function(e,t,r,n){"use strict";function i(t){t=e(t,e.EMPTY_OBJECT);var i=e(t.throttleByServer,!1),a=i||e(t.throttle,!1);this.url=t.url,this.requestFunction=t.requestFunction,this.cancelFunction=t.cancelFunction,this.priorityFunction=t.priorityFunction,this.priority=e(t.priority,0),this.throttle=a,this.throttleByServer=i,this.type=e(t.type,n.OTHER),this.serverKey=void 0,this.state=r.UNISSUED,this.deferred=void 0,this.cancelled=!1}return i.prototype.cancel=function(){this.cancelled=!0},i.prototype.clone=function(e){return t(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new i(this)},i}),define("Core/parseResponseHeaders",[],function(){"use strict";function e(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0;n<r.length;++n){var i=r[n],a=i.indexOf(": ");if(a>0){var o=i.substring(0,a),s=i.substring(a+2);t[o]=s}}return t}return e}),define("Core/RequestErrorEvent",["./defined","./parseResponseHeaders"],function(e,t){"use strict";function r(e,r,n){this.statusCode=e,this.response=r,this.responseHeaders=n,"string"==typeof this.responseHeaders&&(this.responseHeaders=t(this.responseHeaders))}return r.prototype.toString=function(){var t="Request has failed.";return e(this.statusCode)&&(t+=" Status Code: "+this.statusCode),t},r}),define("Core/Event",["./Check","./defined","./defineProperties"],function(e,t,r){"use strict";function n(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function i(e,t){return t-e}return r(n.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),n.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);var r=this;return function(){r.removeEventListener(e,t)}},n.prototype.removeEventListener=function(e,t){for(var r=this._listeners,n=this._scopes,i=-1,a=0;a<r.length;a++)if(r[a]===e&&n[a]===t){i=a;break}return i!==-1&&(this._insideRaiseEvent?(this._toRemove.push(i),r[i]=void 0,n[i]=void 0):(r.splice(i,1),n.splice(i,1)),!0)},n.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;var e,r=this._listeners,n=this._scopes,a=r.length;for(e=0;e<a;e++){var o=r[e];t(o)&&r[e].apply(n[e],arguments)}var s=this._toRemove;if(a=s.length,a>0){for(s.sort(i),e=0;e<a;e++){var u=s[e];r.splice(u,1),n.splice(u,1)}s.length=0}this._insideRaiseEvent=!1},n.prototype.removeAllEventListener=function(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1},n}),define("Core/Heap",["./Check","./defaultValue","./defined","./defineProperties"],function(e,t,r,n){"use strict";function i(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function a(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}return n(i.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){this._maximumLength=e,this._length>e&&e>0&&(this._length=e,this._array.length=e)}},comparator:{get:function(){return this._comparator}}}),i.prototype.reserve=function(e){e=t(e,this._length),this._array.length=e},i.prototype.heapify=function(e){e=t(e,0);for(var r=this._length,n=this._comparator,i=this._array,o=-1,s=!0;s;){var u=2*(e+1),c=u-1;o=c<r&&n(i[c],i[e])<0?c:e,u<r&&n(i[u],i[o])<0&&(o=u),o!==e?(a(i,o,e),e=o):s=!1}},i.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);t>=0;--t)this.heapify(t)},i.prototype.insert=function(e){var t=this._array,n=this._comparator,i=this._maximumLength,o=this._length++;for(o<t.length?t[o]=e:t.push(e);0!==o;){var s=Math.floor((o-1)/2);if(!(n(t[o],t[s])<0))break;a(t,o,s),o=s}var u;return r(i)&&this._length>i&&(u=t[i],this._length=i),u},i.prototype.pop=function(e){if(e=t(e,0),0!==this._length){var r=this._array,n=r[e];return a(r,e,--this._length),this.heapify(e),n}},i}),define("Core/RequestScheduler",["../ThirdParty/Uri","../ThirdParty/when","./Check","./defined","./defineProperties","./Event","./Heap","./isBlobUri","./isDataUri","./RequestState"],function(e,t,r,n,i,a,o,s,u,c){"use strict";function l(e,t){return e.priority-t.priority}function d(){}function f(e){n(e.priorityFunction)&&(e.priority=e.priorityFunction())}function h(e){return S[e]<d.maximumRequestsPerServer}function p(e){return e.state===c.UNISSUED&&(e.state=c.ISSUED,e.deferred=t.defer()),e.deferred.promise}function m(e){return function(t){e.state!==c.CANCELLED&&(--T.numberOfActiveRequests,--S[e.serverKey],O.raiseEvent(),e.state=c.RECEIVED,e.deferred.resolve(t))}}function _(e){return function(t){e.state!==c.CANCELLED&&(++T.numberOfFailedRequests,--T.numberOfActiveRequests,--S[e.serverKey],O.raiseEvent(t),e.state=c.FAILED,e.deferred.reject(t))}}function E(e){var t=p(e);return e.state=c.ACTIVE,A.push(e),++T.numberOfActiveRequests,++T.numberOfActiveRequestsEver,++S[e.serverKey],e.requestFunction().then(m(e)).otherwise(_(e)),t}function y(e){var t=e.state===c.ACTIVE;e.state=c.CANCELLED,++T.numberOfCancelledRequests,e.deferred.reject(),t&&(--T.numberOfActiveRequests,--S[e.serverKey],++T.numberOfCancelledActiveRequests),n(e.cancelFunction)&&e.cancelFunction()}function g(){T.numberOfAttemptedRequests=0,T.numberOfCancelledRequests=0,T.numberOfCancelledActiveRequests=0}function v(){d.debugShowStatistics&&(T.numberOfAttemptedRequests>0&&console.log("Number of attempted requests: "+T.numberOfAttemptedRequests),T.numberOfActiveRequests>0&&console.log("Number of active requests: "+T.numberOfActiveRequests),T.numberOfCancelledRequests>0&&console.log("Number of cancelled requests: "+T.numberOfCancelledRequests),T.numberOfCancelledActiveRequests>0&&console.log("Number of cancelled active requests: "+T.numberOfCancelledActiveRequests),T.numberOfFailedRequests>0&&console.log("Number of failed requests: "+T.numberOfFailedRequests),g())}var T={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0},w=20,R=new o({comparator:l});R.maximumLength=w,R.reserve(w);var A=[],S={},I="undefined"!=typeof document?new e(document.location.href):new e,O=new a;return d.maximumRequests=50,d.maximumRequestsPerServer=6,d.throttleRequests=!0,d.debugShowStatistics=!1,d.requestCompletedEvent=O,i(d,{statistics:{get:function(){return T}},priorityHeapLength:{get:function(){return w},set:function(e){if(e<w)for(;R.length>e;){var t=R.pop();y(t)}w=e,R.maximumLength=e,R.reserve(e)}}}),d.update=function(){var e,t,r=0,n=A.length;for(e=0;e<n;++e)t=A[e],t.cancelled&&y(t),t.state===c.ACTIVE?r>0&&(A[e-r]=t):++r;A.length-=r;var i=R.internalArray,a=R.length;for(e=0;e<a;++e)f(i[e]);R.resort();for(var o=Math.max(d.maximumRequests-A.length,0),s=0;s<o&&R.length>0;)t=R.pop(),t.cancelled?y(t):!t.throttleByServer||h(t.serverKey)?(E(t),++s):y(t);v()},d.getServerKey=function(t){var r=new e(t).resolve(I);r.normalize();var i=r.authority;/:/.test(i)||(i=i+":"+("https"===r.scheme?"443":"80"));var a=S[i];return n(a)||(S[i]=0),i},d.request=function(e){if(u(e.url)||s(e.url))return O.raiseEvent(),e.state=c.RECEIVED,e.requestFunction();if(++T.numberOfAttemptedRequests,n(e.serverKey)||(e.serverKey=d.getServerKey(e.url)),!d.throttleRequests||!e.throttle)return E(e);if(!(A.length>=d.maximumRequests)&&(!e.throttleByServer||h(e.serverKey))){f(e);var t=R.insert(e);if(n(t)){if(t===e)return;y(t)}return p(e)}},d.clearForSpecs=function(){for(;R.length>0;){var e=R.pop();y(e)}for(var t=A.length,r=0;r<t;++r)y(A[r]);A.length=0,S={},T.numberOfAttemptedRequests=0,T.numberOfActiveRequests=0,T.numberOfCancelledRequests=0,T.numberOfCancelledActiveRequests=0,T.numberOfFailedRequests=0,T.numberOfActiveRequestsEver=0},d.numberOfActiveRequestsByServer=function(e){return S[e]},d.requestHeap=R,d}),define("Core/TrustedServers",["../ThirdParty/Uri","./defined","./DeveloperError"],function(e,t,r){"use strict";function n(r){var n=new e(r);n.normalize();var i=n.getAuthority();if(t(i)){if(i.indexOf("@")!==-1){var a=i.split("@");i=a[1]}if(i.indexOf(":")===-1){var o=n.getScheme();if(t(o)||(o=window.location.protocol,o=o.substring(0,o.length-1)),"http"===o)i+=":80";else{if("https"!==o)return;i+=":443"}}return i}}var i={},a={};return i.add=function(e,r){var n=e.toLowerCase()+":"+r;t(a[n])||(a[n]=!0)},i.remove=function(e,r){var n=e.toLowerCase()+":"+r;t(a[n])&&delete a[n]},i.contains=function(e){var r=n(e);return!(!t(r)||!t(a[r]))},i.clear=function(){a={}},i}),define("Core/Resource",["./appendForwardSlash","./Check","./clone","./combine","./defaultValue","./defined","./defineProperties","./deprecationWarning","./DeveloperError","./freezeObject","./getAbsoluteUri","./getBaseUri","./getExtensionFromUri","./isBlobUri","./isCrossOriginUrl","./isDataUri","./objectToQuery","./queryToObject","./Request","./RequestErrorEvent","./RequestScheduler","./RequestState","./RuntimeError","./TrustedServers","../ThirdParty/Uri","../ThirdParty/when"],function(e,t,r,n,i,a,o,s,u,c,l,d,f,h,p,m,_,E,y,g,v,T,w,R,A,S){"use strict";function I(e,t,r,n){var i=e.query;if(!a(i)||0===i.length)return{};var o;if(i.indexOf("=")===-1){var s={};s[i]=void 0,o=s}else o=E(i);r?t._queryParameters=N(o,t._queryParameters,n):t._queryParameters=o,e.query=void 0}function O(e,t){var r=t._queryParameters,n=Object.keys(r);1!==n.length||a(r[n[0]])?e.query=_(r):e.query=n[0]}function x(e,t){return a(e)?a(e.clone)?e.clone():r(e):t}function C(e){if(e.state===T.ISSUED||e.state===T.ACTIVE)throw new w("The Resource is already being fetched.");e.state=T.UNISSUED,e.deferred=void 0}function N(e,t,i){if(!i)return n(e,t);var o=r(e,!0);for(var s in t)if(t.hasOwnProperty(s)){var u=o[s],c=t[s];a(u)?(Array.isArray(u)||(u=o[s]=[u]),o[s]=u.concat(c)):o[s]=Array.isArray(c)?c.slice():c}return o}function b(e){e=i(e,i.EMPTY_OBJECT),"string"==typeof e&&(e={url:e}),this._url=void 0,this._templateValues=x(e.templateValues,{}),this._queryParameters=x(e.queryParameters,{}),this.headers=x(e.headers,{}),this.request=i(e.request,new y),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=i(e.retryAttempts,0),this._retryCount=0;var t=new A(e.url);I(t,this,!0,!0),t.fragment=void 0,this._url=t.toString()}function M(e,t){var r=e.request;r.url=e.url,r.requestFunction=function(){var r=e.url,n=!1;e.isDataUri||e.isBlobUri||(n=e.isCrossOriginUrl);var i=S.defer();return b._Implementations.createImage(r,n&&t,i),i.promise};var n=v.request(r);if(a(n))return n.otherwise(function(n){return r.state!==T.FAILED?S.reject(n):e.retryOnError(n).then(function(i){return i?(r.state=T.UNISSUED,r.deferred=void 0,M(e,t)):S.reject(n)})})}function U(e,t,r){var n={};n[t]=r,e.setQueryParameters(n);var i=e.request;i.url=e.url,i.requestFunction=function(){var t=S.defer();return window[r]=function(e){t.resolve(e);try{delete window[r]}catch(e){window[r]=void 0}},b._Implementations.loadAndExecuteScript(e.url,r,t),t.promise};var o=v.request(i);if(a(o))return o.otherwise(function(n){return i.state!==T.FAILED?S.reject(n):e.retryOnError(n).then(function(a){return a?(i.state=T.UNISSUED,i.deferred=void 0,U(e,t,r)):S.reject(n)})})}function P(e,t){var r=decodeURIComponent(t);return e?atob(r):r}function D(e,t){for(var r=P(e,t),n=new ArrayBuffer(r.length),i=new Uint8Array(n),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return n}function L(e,t){t=i(t,"");var r=e[1],n=!!e[2],a=e[3];switch(t){case"":case"text":return P(n,a);case"arraybuffer":return D(n,a);case"blob":var o=D(n,a);return new Blob([o],{type:r});case"document":var s=new DOMParser;return s.parseFromString(P(n,a),r);case"json":return JSON.parse(P(n,a))}}var B=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob","blob"===e.responseType}catch(e){return!1}}();b.createIfNeeded=function(e,t){if(e instanceof b)return e.getDerivedResource({request:e.request});if("string"!=typeof e)return e;var r=x(t,{});return r.url=e,new b(r)},o(b,{isBlobSupported:{get:function(){return B}}}),o(b.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){var t=new A(e);I(t,this,!1),t.fragment=void 0,this._url=t.toString()}},extension:{get:function(){return f(this._url)}},isDataUri:{get:function(){return m(this._url)}},isBlobUri:{get:function(){return h(this._url)}},isCrossOriginUrl:{get:function(){return p(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}}}),b.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;var r=new A(this._url);e&&O(r,this);var n=r.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),i=this._templateValues,o=Object.keys(i);if(o.length>0)for(var s=0;s<o.length;s++){var u=o[s],c=i[u];n=n.replace(new RegExp("{"+u+"}","g"),encodeURIComponent(c))}return t&&a(this.proxy)&&(n=this.proxy.getURL(n)),n},b.prototype.setQueryParameters=function(e,t){t?this._queryParameters=N(this._queryParameters,e,!1):this._queryParameters=N(e,this._queryParameters,!1)},b.prototype.addQueryParameters=function(e,t){return s("Resource.addQueryParameters","addQueryParameters has been deprecated and will be removed 1.45. Use setQueryParameters or appendQueryParameters instead."),this.setQueryParameters(e,t)},b.prototype.appendQueryParameters=function(e){this._queryParameters=N(e,this._queryParameters,!0)},b.prototype.setTemplateValues=function(e,t){t?this._templateValues=n(this._templateValues,e):this._templateValues=n(e,this._templateValues)},b.prototype.addTemplateValues=function(e,t){return s("Resource.addTemplateValues","addTemplateValues has been deprecated and will be removed 1.45. Use setTemplateValues."),this.setTemplateValues(e,t)},b.prototype.getDerivedResource=function(e){var t=this.clone();if(t._retryCount=0,a(e.url)){var r=new A(e.url),o=i(e.preserveQueryParameters,!1);I(r,t,!0,o),r.fragment=void 0,t._url=r.resolve(new A(l(this._url))).toString()}return a(e.queryParameters)&&(t._queryParameters=n(e.queryParameters,t._queryParameters)),a(e.templateValues)&&(t._templateValues=n(e.templateValues,t.templateValues)),a(e.headers)&&(t.headers=n(e.headers,t.headers)),a(e.proxy)&&(t.proxy=e.proxy),a(e.request)&&(t.request=e.request),a(e.retryCallback)&&(t.retryCallback=e.retryCallback),a(e.retryAttempts)&&(t.retryAttempts=e.retryAttempts),t},b.prototype.retryOnError=function(e){var t=this.retryCallback;if("function"!=typeof t||this._retryCount>=this.retryAttempts)return S(!1);var r=this;return S(t(this,e)).then(function(e){return++r._retryCount,e})},b.prototype.clone=function(e){return a(e)||(e=new b({url:this._url})),e._url=this._url,e._queryParameters=r(this._queryParameters),e._templateValues=r(this._templateValues),e.headers=r(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},b.prototype.getBaseUri=function(e){return d(this.getUrlComponent(e),e)},b.prototype.appendForwardSlash=function(){this._url=e(this._url)},b.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},b.fetchArrayBuffer=function(e){var t=new b(e);return t.fetchArrayBuffer()},b.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},b.fetchBlob=function(e){var t=new b(e);return t.fetchBlob()},b.prototype.fetchImage=function(e,t){if(a(t)&&s("Resource.fetchImage.allowCrossOrigin","The allowCrossOrigin parameter has been deprecated and will be removed in Cesium 1.44. It no longer needs to be specified."),e=i(e,!1),t=i(t,!0),C(this.request),!B||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!e)return M(this,t);var r=this.fetchBlob();if(a(r)){var n,o;return r.then(function(e){if(a(e)){o=e;var t=window.URL.createObjectURL(e);return n=new b({url:t}),M(n)}}).then(function(e){if(a(e))return window.URL.revokeObjectURL(n.url),e.blob=o,e}).otherwise(function(e){return a(n)&&window.URL.revokeObjectURL(n.url),S.reject(e)})}},b.fetchImage=function(e){var t=new b(e);return t.fetchImage(e.preferBlob,e.allowCrossOrigin)},b.prototype.fetchText=function(){return this.fetch({responseType:"text"})},b.fetchText=function(e){var t=new b(e);return t.fetchText()},b.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(a(e))return e.then(function(e){if(a(e))return JSON.parse(e)})},b.fetchJson=function(e){var t=new b(e);return t.fetchJson()},b.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},b.fetchXML=function(e){var t=new b(e);return t.fetchXML()},b.prototype.fetchJsonp=function(e){e=i(e,"callback"),C(this.request);var t;do t="loadJsonp"+Math.random().toString().substring(2,8);while(a(window[t]));return U(this,e,t)},b.fetchJsonp=function(e){var t=new b(e);return t.fetchJsonp(e.callbackParameterName)},b._makeRequest=function(e,t){C(e.request);var r=e.request;r.url=e.url,r.requestFunction=function(){var i=t.responseType,o=n(e.headers,t.headers),s=t.overrideMimeType,u=t.method,c=t.data,l=S.defer(),d=b._Implementations.loadWithXhr(e.url,i,u,c,o,l,s);return a(d)&&a(d.abort)&&(r.cancelFunction=function(){d.abort()}),l.promise};var i=v.request(r);if(a(i))return i.then(function(e){return e}).otherwise(function(n){return r.state!==T.FAILED?S.reject(n):e.retryOnError(n).then(function(i){return i?(r.state=T.UNISSUED,r.deferred=void 0,e.fetch(t)):S.reject(n)})})};var z=/^data:(.*?)(;base64)?,(.*)$/;return b.prototype.fetch=function(e){return e=x(e,{}),e.method="GET",b._makeRequest(this,e)},b.fetch=function(e){var t=new b(e);return t.fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},b.prototype.delete=function(e){return e=x(e,{}),e.method="DELETE",b._makeRequest(this,e)},b.delete=function(e){var t=new b(e);return t.delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},b.prototype.head=function(e){return e=x(e,{}),e.method="HEAD",b._makeRequest(this,e)},b.head=function(e){var t=new b(e);return t.head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},b.prototype.options=function(e){return e=x(e,{}),e.method="OPTIONS",b._makeRequest(this,e)},b.options=function(e){var t=new b(e);return t.options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},b.prototype.post=function(e,r){return t.defined("data",e),r=x(r,{}),r.method="POST",r.data=e,b._makeRequest(this,r)},b.post=function(e){var t=new b(e);return t.post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},b.prototype.put=function(e,r){return t.defined("data",e),r=x(r,{}),r.method="PUT",r.data=e,b._makeRequest(this,r)},b.put=function(e){var t=new b(e);return t.put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},b.prototype.patch=function(e,r){return t.defined("data",e),r=x(r,{}),r.method="PATCH",r.data=e,b._makeRequest(this,r)},b.patch=function(e){var t=new b(e);return t.patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},b._Implementations={},b._Implementations.createImage=function(e,t,r){var n=new Image;n.onload=function(){r.resolve(n)},n.onerror=function(e){r.reject(e)},t&&(R.contains(e)?n.crossOrigin="use-credentials":n.crossOrigin=""),n.src=e},b._Implementations.loadWithXhr=function(e,t,r,n,i,o,s){var u=z.exec(e);if(null!==u)return void o.resolve(L(u,t));var c=new XMLHttpRequest;if(R.contains(e)&&(c.withCredentials=!0),a(s)&&a(c.overrideMimeType)&&c.overrideMimeType(s),c.open(r,e,!0),a(i))for(var l in i)i.hasOwnProperty(l)&&c.setRequestHeader(l,i[l]);a(t)&&(c.responseType=t);var d=!1;return"string"==typeof e&&(d=0===e.indexOf("file://")||"file://"===window.location.origin),c.onload=function(){if((c.status<200||c.status>=300)&&(!d||0!==c.status))return void o.reject(new g(c.status,c.response,c.getAllResponseHeaders()));var e=c.response,n=c.responseType;if("HEAD"===r||"OPTIONS"===r){var i=c.getAllResponseHeaders(),s=i.trim().split(/[\r\n]+/),u={};return s.forEach(function(e){var t=e.split(": "),r=t.shift();u[r]=t.join(": ")}),void o.resolve(u)}if(204===c.status)o.resolve();else if(!a(e)||a(t)&&n!==t)if("json"===t&&"string"==typeof e)try{o.resolve(JSON.parse(e))}catch(e){o.reject(e)}else(""===n||"document"===n)&&a(c.responseXML)&&c.responseXML.hasChildNodes()?o.resolve(c.responseXML):""!==n&&"text"!==n||!a(c.responseText)?o.reject(new w("Invalid XMLHttpRequest response type.")):o.resolve(c.responseText);else o.resolve(e)},c.onerror=function(e){o.reject(new g)},c.send(n),c},b._Implementations.loadAndExecuteScript=function(e,t,r){var n=document.createElement("script");n.async=!0,n.src=e;var i=document.getElementsByTagName("head")[0];n.onload=function(){n.onload=void 0,i.removeChild(n)},n.onerror=function(e){r.reject(e)},i.appendChild(n)},b._DefaultImplementations={},b._DefaultImplementations.createImage=b._Implementations.createImage,b._DefaultImplementations.loadWithXhr=b._Implementations.loadWithXhr,b._DefaultImplementations.loadAndExecuteScript=b._Implementations.loadAndExecuteScript,b.DEFAULT=c(new b({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),b}),define("Core/EarthOrientationParameters",["../ThirdParty/when","./binarySearch","./defaultValue","./defined","./EarthOrientationParametersSample","./freezeObject","./JulianDate","./LeapSecond","./Resource","./RuntimeError","./TimeConstants","./TimeStandard"],function(e,t,r,n,i,a,o,s,u,c,l,d){"use strict";function f(t){if(t=r(t,r.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=r(t.addNewLeapSeconds,!0),n(t.data))p(this,t.data);else if(n(t.url)){var i=u.createIfNeeded(t.url),a=this;this._downloadPromise=e(i.fetchJson(),function(e){p(a,e)},function(){a._dataError="An error occurred while retrieving the EOP data from the URL "+i.url+"."})}else p(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function h(e,t){return o.compare(e.julianDate,t)}function p(e,r){if(!n(r.columnNames))return void(e._dataError="Error in loaded EOP data: The columnNames property is required.");if(!n(r.samples))return void(e._dataError="Error in loaded EOP data: The samples property is required.");var i=r.columnNames.indexOf("modifiedJulianDateUtc"),a=r.columnNames.indexOf("xPoleWanderRadians"),u=r.columnNames.indexOf("yPoleWanderRadians"),c=r.columnNames.indexOf("ut1MinusUtcSeconds"),f=r.columnNames.indexOf("xCelestialPoleOffsetRadians"),p=r.columnNames.indexOf("yCelestialPoleOffsetRadians"),m=r.columnNames.indexOf("taiMinusUtcSeconds");if(i<0||a<0||u<0||c<0||f<0||p<0||m<0)return void(e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns");var _=e._samples=r.samples,E=e._dates=[];e._dateColumn=i,e._xPoleWanderRadiansColumn=a,e._yPoleWanderRadiansColumn=u,e._ut1MinusUtcSecondsColumn=c,e._xCelestialPoleOffsetRadiansColumn=f,e._yCelestialPoleOffsetRadiansColumn=p,e._taiMinusUtcSecondsColumn=m,e._columnCount=r.columnNames.length,e._lastIndex=void 0;for(var y,g=e._addNewLeapSeconds,v=0,T=_.length;v<T;v+=e._columnCount){var w=_[v+i],R=_[v+m],A=w+l.MODIFIED_JULIAN_DATE_DIFFERENCE,S=new o(A,R,d.TAI);if(E.push(S),g){if(R!==y&&n(y)){var I=o.leapSeconds,O=t(I,S,h);if(O<0){var x=new s(S,R);I.splice(~O,0,x)}}y=R}}}function m(e,t,r,n,i){var a=r*n;i.xPoleWander=t[a+e._xPoleWanderRadiansColumn],i.yPoleWander=t[a+e._yPoleWanderRadiansColumn],i.xPoleOffset=t[a+e._xCelestialPoleOffsetRadiansColumn],i.yPoleOffset=t[a+e._yCelestialPoleOffsetRadiansColumn],i.ut1MinusUtc=t[a+e._ut1MinusUtcSecondsColumn]}function _(e,t,r){return t+e*(r-t)}function E(e,t,r,n,i,a,s){var u=e._columnCount;if(a>t.length-1)return s.xPoleWander=0,s.yPoleWander=0,s.xPoleOffset=0,s.yPoleOffset=0,s.ut1MinusUtc=0,s;var c=t[i],l=t[a];if(c.equals(l)||n.equals(c))return m(e,r,i,u,s),s;if(n.equals(l))return m(e,r,a,u,s),s;var d=o.secondsDifference(n,c)/o.secondsDifference(l,c),f=i*u,h=a*u,p=r[f+e._ut1MinusUtcSecondsColumn],E=r[h+e._ut1MinusUtcSecondsColumn],y=E-p;if(y>.5||y<-.5){var g=r[f+e._taiMinusUtcSecondsColumn],v=r[h+e._taiMinusUtcSecondsColumn];g!==v&&(l.equals(n)?p=E:E-=v-g)}return s.xPoleWander=_(d,r[f+e._xPoleWanderRadiansColumn],r[h+e._xPoleWanderRadiansColumn]),s.yPoleWander=_(d,r[f+e._yPoleWanderRadiansColumn],r[h+e._yPoleWanderRadiansColumn]),s.xPoleOffset=_(d,r[f+e._xCelestialPoleOffsetRadiansColumn],r[h+e._xCelestialPoleOffsetRadiansColumn]),s.yPoleOffset=_(d,r[f+e._yCelestialPoleOffsetRadiansColumn],r[h+e._yCelestialPoleOffsetRadiansColumn]),s.ut1MinusUtc=_(d,p,E),s}return f.NONE=a({getPromiseToLoad:function(){return e()},compute:function(e,t){return n(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new i(0,0,0,0,0),t}}),f.prototype.getPromiseToLoad=function(){return e(this._downloadPromise)},f.prototype.compute=function(e,r){if(n(this._samples)){if(n(r)||(r=new i(0,0,0,0,0)),0===this._samples.length)return r.xPoleWander=0,r.yPoleWander=0,r.xPoleOffset=0,r.yPoleOffset=0,r.ut1MinusUtc=0,r;var a=this._dates,s=this._lastIndex,u=0,l=0;if(n(s)){var d=a[s],f=a[s+1],h=o.lessThanOrEquals(d,e),p=!n(f),m=p||o.greaterThanOrEquals(f,e);if(h&&m)return u=s,!p&&f.equals(e)&&++u,l=u+1,E(this,a,this._samples,e,u,l,r),r}var _=t(a,e,o.compare,this._dateColumn);
return _>=0?(_<a.length-1&&a[_+1].equals(e)&&++_,u=_,l=_):(l=~_,u=l-1,u<0&&(u=0)),this._lastIndex=u,E(this,a,this._samples,e,u,l,r),r}if(n(this._dataError))throw new c(this._dataError)},f}),define("Core/buildModuleUrl",["../ThirdParty/Uri","./defined","./DeveloperError","./Resource","require"],function(e,t,r,n,i){"use strict";function a(){for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;++t){var n=e[t].getAttribute("src"),i=h.exec(n);if(null!==i)return i[1]}}function o(){if(t(l))return l;var e;return e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:a(),l=new n({url:e}),l.appendForwardSlash(),l}function s(e){return i.toUrl("../"+e)}function u(e){var t=o().getDerivedResource({url:e});return t.url}function c(e){t(d)||(d=t(define.amd)&&!define.amd.toUrlUndefined&&t(i.toUrl)?s:u),t(f)||(f=document.createElement("a"));var r=d(e);return f.href=r,f.href=f.href,f.href}var l,d,f,h=/((?:.*\/)|^)LSGlobe[\w-]*\.js(?:\W|$)/i;return c._cesiumScriptRegex=h,c._buildModuleUrlFromBaseUrl=u,c._clearBaseResource=function(){l=void 0},c.setBaseUrl=function(e){l=n.DEFAULT.getDerivedResource({url:e})},c}),define("Core/Iau2006XysSample",[],function(){"use strict";function e(e,t,r){this.x=e,this.y=t,this.s=r}return e}),define("Core/Iau2006XysData",["../ThirdParty/when","./buildModuleUrl","./defaultValue","./defined","./Iau2006XysSample","./JulianDate","./Resource","./TimeStandard"],function(e,t,r,n,i,a,o,s){"use strict";function u(e){e=r(e,r.EMPTY_OBJECT),this._xysFileUrlTemplate=o.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=r(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=r(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new a(this._sampleZeroJulianEphemerisDate,0,s.TAI),this._stepSizeDays=r(e.stepSizeDays,1),this._samplesPerXysFile=r(e.samplesPerXysFile,1e3),this._totalSamples=r(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,n=this._denominators=new Array(t+1),i=this._xTable=new Array(t+1),u=Math.pow(this._stepSizeDays,t),c=0;c<=t;++c){n[c]=u,i[c]=c*this._stepSizeDays;for(var l=0;l<=t;++l)l!==c&&(n[c]*=c-l);n[c]=1/n[c]}this._work=new Array(t+1),this._coef=new Array(t+1)}function c(e,t,r){var n=d;return n.dayNumber=t,n.secondsOfDay=r,a.daysDifference(n,e._sampleZeroDateTT)}function l(r,i){if(r._chunkDownloadsInProgress[i])return r._chunkDownloadsInProgress[i];var a=e.defer();r._chunkDownloadsInProgress[i]=a;var s,u=r._xysFileUrlTemplate;return s=n(u)?u.getDerivedResource({templateValues:{0:i}}):new o({url:t("Assets/IAU2006_XYS/IAU2006_XYS_"+i+".json")}),e(s.fetchJson(),function(e){r._chunkDownloadsInProgress[i]=!1;for(var t=r._samples,n=e.samples,o=i*r._samplesPerXysFile*3,s=0,u=n.length;s<u;++s)t[o+s]=n[s];a.resolve()}),a.promise}var d=new a(0,0,s.TAI);return u.prototype.preload=function(t,r,n,i){var a=c(this,t,r),o=c(this,n,i),s=a/this._stepSizeDays-this._interpolationOrder/2|0;s<0&&(s=0);var u=o/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;u>=this._totalSamples&&(u=this._totalSamples-1);for(var d=s/this._samplesPerXysFile|0,f=u/this._samplesPerXysFile|0,h=[],p=d;p<=f;++p)h.push(l(this,p));return e.all(h)},u.prototype.computeXysRadians=function(e,t,r){var a=c(this,e,t);if(!(a<0)){var o=a/this._stepSizeDays|0;if(!(o>=this._totalSamples)){var s=this._interpolationOrder,u=o-(s/2|0);u<0&&(u=0);var d=u+s;d>=this._totalSamples&&(d=this._totalSamples-1,u=d-s,u<0&&(u=0));var f=!1,h=this._samples;if(n(h[3*u])||(l(this,u/this._samplesPerXysFile|0),f=!0),n(h[3*d])||(l(this,d/this._samplesPerXysFile|0),f=!0),!f){n(r)?(r.x=0,r.y=0,r.s=0):r=new i(0,0,0);var p,m,_=a-u*this._stepSizeDays,E=this._work,y=this._denominators,g=this._coef,v=this._xTable;for(p=0;p<=s;++p)E[p]=_-v[p];for(p=0;p<=s;++p){for(g[p]=1,m=0;m<=s;++m)m!==p&&(g[p]*=E[m]);g[p]*=y[p];var T=3*(u+p);r.x+=g[p]*h[T++],r.y+=g[p]*h[T++],r.s+=g[p]*h[T]}return r}}}},u}),define("Core/Fullscreen",["./defined","./defineProperties"],function(e,t){"use strict";var r,n={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},i={};return t(i,{element:{get:function(){if(i.supportsFullscreen())return document[n.fullscreenElement]}},changeEventName:{get:function(){if(i.supportsFullscreen())return n.fullscreenchange}},errorEventName:{get:function(){if(i.supportsFullscreen())return n.fullscreenerror}},enabled:{get:function(){if(i.supportsFullscreen())return document[n.fullscreenEnabled]}},fullscreen:{get:function(){if(i.supportsFullscreen())return null!==i.element}}}),i.supportsFullscreen=function(){if(e(r))return r;r=!1;var t=document.body;if("function"==typeof t.requestFullscreen)return n.requestFullscreen="requestFullscreen",n.exitFullscreen="exitFullscreen",n.fullscreenEnabled="fullscreenEnabled",n.fullscreenElement="fullscreenElement",n.fullscreenchange="fullscreenchange",n.fullscreenerror="fullscreenerror",r=!0;for(var i,a=["webkit","moz","o","ms","khtml"],o=0,s=a.length;o<s;++o){var u=a[o];i=u+"RequestFullscreen","function"==typeof t[i]?(n.requestFullscreen=i,r=!0):(i=u+"RequestFullScreen","function"==typeof t[i]&&(n.requestFullscreen=i,r=!0)),i=u+"ExitFullscreen","function"==typeof document[i]?n.exitFullscreen=i:(i=u+"CancelFullScreen","function"==typeof document[i]&&(n.exitFullscreen=i)),i=u+"FullscreenEnabled",void 0!==document[i]?n.fullscreenEnabled=i:(i=u+"FullScreenEnabled",void 0!==document[i]&&(n.fullscreenEnabled=i)),i=u+"FullscreenElement",void 0!==document[i]?n.fullscreenElement=i:(i=u+"FullScreenElement",void 0!==document[i]&&(n.fullscreenElement=i)),i=u+"fullscreenchange",void 0!==document["on"+i]&&("ms"===u&&(i="MSFullscreenChange"),n.fullscreenchange=i),i=u+"fullscreenerror",void 0!==document["on"+i]&&("ms"===u&&(i="MSFullscreenError"),n.fullscreenerror=i)}return r},i.requestFullscreen=function(e,t){i.supportsFullscreen()&&e[n.requestFullscreen]({vrDisplay:t})},i.exitFullscreen=function(){i.supportsFullscreen()&&document[n.exitFullscreen]()},i}),define("Core/FeatureDetection",["./defaultValue","./defined","./Fullscreen"],function(e,t,r){"use strict";function n(e){for(var t=e.split("."),r=0,n=t.length;r<n;++r)t[r]=parseInt(t[r],10);return t}function i(){if(!t(T)&&(T=!1,!f())){var e=/ Chrome\/([\.0-9]+)/.exec(v.userAgent);null!==e&&(T=!0,w=n(e[1]))}return T}function a(){return i()&&w}function o(){if(!t(R)&&(R=!1,!i()&&!f()&&/ Safari\/[\.0-9]+/.test(v.userAgent))){var e=/ Version\/([\.0-9]+)/.exec(v.userAgent);null!==e&&(R=!0,A=n(e[1]))}return R}function s(){return o()&&A}function u(){if(!t(S)){S=!1;var e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(v.userAgent);null!==e&&(S=!0,I=n(e[1]),I.isNightly=!!e[2])}return S}function c(){return u()&&I}function l(){if(!t(O)){O=!1;var e;"Microsoft Internet Explorer"===v.appName?(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(v.userAgent),null!==e&&(O=!0,x=n(e[1]))):"Netscape"===v.appName&&(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(v.userAgent),null!==e&&(O=!0,x=n(e[1])))}return O}function d(){return l()&&x}function f(){if(!t(C)){C=!1;var e=/ Edge\/([\.0-9]+)/.exec(v.userAgent);null!==e&&(C=!0,N=n(e[1]))}return C}function h(){return f()&&N}function p(){if(!t(b)){b=!1;var e=/Firefox\/([\.0-9]+)/.exec(v.userAgent);null!==e&&(b=!0,M=n(e[1]))}return b}function m(){return t(U)||(U=/Windows/i.test(v.appVersion)),U}function _(){return p()&&M}function E(){return t(P)||(P=!1),P}function y(){if(!t(L)){var e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");var r=e.style.imageRendering;L=t(r)&&""!==r,L&&(D=r)}return L}function g(){return y()?D:void 0}var v;v="undefined"!=typeof navigator?navigator:{};var T,w,R,A,S,I,O,x,C,N,b,M,U,P,D,L,B={isChrome:i,chromeVersion:a,isSafari:o,safariVersion:s,isWebkit:u,webkitVersion:c,isInternetExplorer:l,internetExplorerVersion:d,isEdge:f,edgeVersion:h,isFirefox:p,firefoxVersion:_,isWindows:m,hardwareConcurrency:e(v.hardwareConcurrency,3),supportsPointerEvents:E,supportsImageRenderingPixelated:y,imageRenderingValue:g};return B.supportsFullscreen=function(){return r.supportsFullscreen()},B.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},B.supportsWebWorkers=function(){return"undefined"!=typeof Worker},B}),define("Core/Quaternion",["./Cartesian3","./Check","./defaultValue","./defined","./FeatureDetection","./freezeObject","./Math","./Matrix3"],function(e,t,r,n,i,a,o,s){"use strict";function u(e,t,n,i){this.x=r(e,0),this.y=r(t,0),this.z=r(n,0),this.w=r(i,0)}new e;u.fromAxisAngle=function(t,r,i){var a=r/2,o=Math.sin(a),s=new e;s=e.normalize(t,s);var c=s.x*o,l=s.y*o,d=s.z*o,f=Math.cos(a);return n(i)?(i.x=c,i.y=l,i.z=d,i.w=f,i):new u(c,l,d,f)};var c=[1,2,0],l=new Array(3);u.fromRotationMatrix=function(e,t){var r,i,a,o,d,f=e[s.COLUMN0ROW0],h=e[s.COLUMN1ROW1],p=e[s.COLUMN2ROW2],m=f+h+p;if(m>0)r=Math.sqrt(m+1),d=.5*r,r=.5/r,i=(e[s.COLUMN1ROW2]-e[s.COLUMN2ROW1])*r,a=(e[s.COLUMN2ROW0]-e[s.COLUMN0ROW2])*r,o=(e[s.COLUMN0ROW1]-e[s.COLUMN1ROW0])*r;else{var _=c,E=0;h>f&&(E=1),p>f&&p>h&&(E=2);var y=_[E],g=_[y];r=Math.sqrt(e[s.getElementIndex(E,E)]-e[s.getElementIndex(y,y)]-e[s.getElementIndex(g,g)]+1);var v=l;v[E]=.5*r,r=.5/r,d=(e[s.getElementIndex(g,y)]-e[s.getElementIndex(y,g)])*r,v[y]=(e[s.getElementIndex(y,E)]+e[s.getElementIndex(E,y)])*r,v[g]=(e[s.getElementIndex(g,E)]+e[s.getElementIndex(E,g)])*r,i=-v[0],a=-v[1],o=-v[2]}return n(t)?(t.x=i,t.y=a,t.z=o,t.w=d,t):new u(i,a,o,d)};var d=new u,f=new u,h=new u,p=new u;u.fromHeadingPitchRoll=function(t,r){return p=u.fromAxisAngle(e.UNIT_X,t.roll,d),h=u.fromAxisAngle(e.UNIT_Y,-t.pitch,r),r=u.multiply(h,p,h),f=u.fromAxisAngle(e.UNIT_Z,-t.heading,d),u.multiply(f,r,r)};var m=new e,_=new e,E=new u,y=new u,g=new u;u.packedLength=4,u.pack=function(e,t,n){return n=r(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t},u.unpack=function(e,t,i){return t=r(t,0),n(i)||(i=new u),i.x=e[t],i.y=e[t+1],i.z=e[t+2],i.w=e[t+3],i},u.packedInterpolationLength=3,u.convertPackedArrayForInterpolation=function(e,t,r,n){u.unpack(e,4*r,g),u.conjugate(g,g);for(var i=0,a=r-t+1;i<a;i++){var o=3*i;u.unpack(e,4*(t+i),E),u.multiply(E,g,E),E.w<0&&u.negate(E,E),u.computeAxis(E,m);var s=u.computeAngle(E);n[o]=m.x*s,n[o+1]=m.y*s,n[o+2]=m.z*s}},u.unpackInterpolationResult=function(t,r,i,a,o){n(o)||(o=new u),e.fromArray(t,0,_);var s=e.magnitude(_);return u.unpack(r,4*a,y),0===s?u.clone(u.IDENTITY,E):u.fromAxisAngle(_,s,E),u.multiply(E,y,o)},u.clone=function(e,t){if(n(e))return n(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new u(e.x,e.y,e.z,e.w)},u.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},u.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},u.magnitude=function(e){return Math.sqrt(u.magnitudeSquared(e))},u.normalize=function(e,t){var r=1/u.magnitude(e),n=e.x*r,i=e.y*r,a=e.z*r,o=e.w*r;return t.x=n,t.y=i,t.z=a,t.w=o,t},u.inverse=function(e,t){var r=u.magnitudeSquared(e);return t=u.conjugate(e,t),u.multiplyByScalar(t,1/r,t)},u.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},u.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},u.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},u.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},u.multiply=function(e,t,r){var n=e.x,i=e.y,a=e.z,o=e.w,s=t.x,u=t.y,c=t.z,l=t.w,d=o*s+n*l+i*c-a*u,f=o*u-n*c+i*l+a*s,h=o*c+n*u-i*s+a*l,p=o*l-n*s-i*u-a*c;return r.x=d,r.y=f,r.z=h,r.w=p,r},u.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},u.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},u.computeAxis=function(e,t){var r=e.w;if(Math.abs(r-1)<o.EPSILON6)return t.x=t.y=t.z=0,t;var n=1/Math.sqrt(1-r*r);return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},u.computeAngle=function(e){return Math.abs(e.w-1)<o.EPSILON6?0:2*Math.acos(e.w)};var v=new u;u.lerp=function(e,t,r,n){return v=u.multiplyByScalar(t,r,v),n=u.multiplyByScalar(e,1-r,n),u.add(v,n,n)};var T=new u,w=new u,R=new u;u.slerp=function(e,t,r,n){var i=u.dot(e,t),a=t;if(i<0&&(i=-i,a=T=u.negate(t,T)),1-i<o.EPSILON6)return u.lerp(e,a,r,n);var s=Math.acos(i);return w=u.multiplyByScalar(e,Math.sin((1-r)*s),w),R=u.multiplyByScalar(a,Math.sin(r*s),R),n=u.add(w,R,n),u.multiplyByScalar(n,1/Math.sin(s),n)},u.log=function(t,r){var n=o.acosClamped(t.w),i=0;return 0!==n&&(i=n/Math.sin(n)),e.multiplyByScalar(t,i,r)},u.exp=function(t,r){var n=e.magnitude(t),i=0;return 0!==n&&(i=Math.sin(n)/n),r.x=t.x*i,r.y=t.y*i,r.z=t.z*i,r.w=Math.cos(n),r};var A=new e,S=new e,I=new u,O=new u;u.computeInnerQuadrangle=function(t,r,n,i){var a=u.conjugate(r,I);u.multiply(a,n,O);var o=u.log(O,A);u.multiply(a,t,O);var s=u.log(O,S);return e.add(o,s,o),e.multiplyByScalar(o,.25,o),e.negate(o,o),u.exp(o,I),u.multiply(r,I,i)},u.squad=function(e,t,r,n,i,a){var o=u.slerp(e,t,i,I),s=u.slerp(r,n,i,O);return u.slerp(o,s,2*i*(1-i),a)};for(var x=new u,C=1.9011074535173003,N=i.supportsTypedArrays()?new Float32Array(8):[],b=i.supportsTypedArrays()?new Float32Array(8):[],M=i.supportsTypedArrays()?new Float32Array(8):[],U=i.supportsTypedArrays()?new Float32Array(8):[],P=0;P<7;++P){var D=P+1,L=2*D+1;N[P]=1/(D*L),b[P]=D/L}return N[7]=C/136,b[7]=8*C/17,u.fastSlerp=function(e,t,r,n){var i,a=u.dot(e,t);a>=0?i=1:(i=-1,a=-a);for(var o=a-1,s=1-r,c=r*r,l=s*s,d=7;d>=0;--d)M[d]=(N[d]*c-b[d])*o,U[d]=(N[d]*l-b[d])*o;var f=i*r*(1+M[0]*(1+M[1]*(1+M[2]*(1+M[3]*(1+M[4]*(1+M[5]*(1+M[6]*(1+M[7])))))))),h=s*(1+U[0]*(1+U[1]*(1+U[2]*(1+U[3]*(1+U[4]*(1+U[5]*(1+U[6]*(1+U[7])))))))),p=u.multiplyByScalar(e,h,x);return u.multiplyByScalar(t,f,n),u.add(p,n,n)},u.fastSquad=function(e,t,r,n,i,a){var o=u.fastSlerp(e,t,i,I),s=u.fastSlerp(r,n,i,O);return u.fastSlerp(o,s,2*i*(1-i),a)},u.equals=function(e,t){return e===t||n(e)&&n(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},u.equalsEpsilon=function(e,t,r){return e===t||n(e)&&n(t)&&Math.abs(e.x-t.x)<=r&&Math.abs(e.y-t.y)<=r&&Math.abs(e.z-t.z)<=r&&Math.abs(e.w-t.w)<=r},u.ZERO=a(new u(0,0,0,0)),u.IDENTITY=a(new u(0,0,0,1)),u.prototype.clone=function(e){return u.clone(this,e)},u.prototype.equals=function(e){return u.equals(this,e)},u.prototype.equalsEpsilon=function(e,t){return u.equalsEpsilon(this,e,t)},u.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},u}),define("Core/Transforms",["../ThirdParty/when","./Cartesian2","./Cartesian3","./Cartesian4","./Cartographic","./Check","./defaultValue","./defined","./DeveloperError","./EarthOrientationParameters","./EarthOrientationParametersSample","./Ellipsoid","./Iau2006XysData","./Iau2006XysSample","./JulianDate","./Math","./Matrix3","./Matrix4","./Quaternion","./TimeConstants"],function(e,t,r,n,i,a,o,s,u,c,l,d,f,h,p,m,_,E,y,g){"use strict";var v={},T={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},w={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},R={},A={east:new r,north:new r,up:new r,west:new r,south:new r,down:new r},S=new r,I=new r,O=new r;v.localFrameToFixedFrameGenerator=function(e,t){if(!T.hasOwnProperty(e)||!T[e].hasOwnProperty(t))throw new u("firstAxis and secondAxis must be east, north, up, west, south or down.");var n,i=T[e][t],a=e+t;return s(R[a])?n=R[a]:(n=function(n,a,u){if(s(u)||(u=new E),m.equalsEpsilon(n.x,0,m.EPSILON14)&&m.equalsEpsilon(n.y,0,m.EPSILON14)){var c=m.sign(n.z);r.unpack(w[e],0,S),"east"!==e&&"west"!==e&&r.multiplyByScalar(S,c,S),r.unpack(w[t],0,I),"east"!==t&&"west"!==t&&r.multiplyByScalar(I,c,I),r.unpack(w[i],0,O),"east"!==i&&"west"!==i&&r.multiplyByScalar(O,c,O)}else{a=o(a,d.WGS84),a.geodeticSurfaceNormal(n,A.up);var l=A.up,f=A.east;f.x=-n.y,f.y=n.x,f.z=0,r.normalize(f,A.east),r.cross(l,f,A.north),r.multiplyByScalar(A.up,-1,A.down),r.multiplyByScalar(A.east,-1,A.west),r.multiplyByScalar(A.north,-1,A.south),S=A[e],I=A[t],O=A[i]}return u[0]=S.x,u[1]=S.y,u[2]=S.z,u[3]=0,u[4]=I.x,u[5]=I.y,u[6]=I.z,u[7]=0,u[8]=O.x,u[9]=O.y,u[10]=O.z,u[11]=0,u[12]=n.x,u[13]=n.y,u[14]=n.z,u[15]=1,u},R[a]=n),n},v.eastNorthUpToFixedFrame=v.localFrameToFixedFrameGenerator("east","north"),v.northEastDownToFixedFrame=v.localFrameToFixedFrameGenerator("north","east"),v.northUpEastToFixedFrame=v.localFrameToFixedFrameGenerator("north","up"),v.northWestUpToFixedFrame=v.localFrameToFixedFrameGenerator("north","west");var x=new y,C=new r(1,1,1),N=new E;v.headingPitchRollToFixedFrame=function(e,t,n,i,a){i=o(i,v.eastNorthUpToFixedFrame);var s=y.fromHeadingPitchRoll(t,x),u=E.fromTranslationQuaternionRotationScale(r.ZERO,s,C,N);return a=i(e,n,a),E.multiply(a,u,a)};var b=new E,M=new _;v.headingPitchRollQuaternion=function(e,t,r,n,i){var a=v.headingPitchRollToFixedFrame(e,t,r,n,b),o=E.getRotation(a,M);return y.fromRotationMatrix(o,i)};var U=24110.54841,P=8640184.812866,D=.093104,L=-62e-7,B=1.1772758384668e-19,z=72921158553e-15,F=m.TWO_PI/86400,k=new p;v.computeTemeToPseudoFixedMatrix=function(e,t){k=p.addSeconds(e,-p.computeTaiMinusUtc(e),k);var r,n=k.dayNumber,i=k.secondsOfDay,a=n-2451545;r=i>=43200?(a+.5)/g.DAYS_PER_JULIAN_CENTURY:(a-.5)/g.DAYS_PER_JULIAN_CENTURY;var o=U+r*(P+r*(D+r*L)),u=o*F%m.TWO_PI,c=z+B*(n-2451545.5),l=(i+.5*g.SECONDS_PER_DAY)%g.SECONDS_PER_DAY,d=u+c*l,f=Math.cos(d),h=Math.sin(d);return s(t)?(t[0]=f,t[1]=-h,t[2]=0,t[3]=h,t[4]=f,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new _(f,h,0,-h,f,0,0,0,1)},v.iau2006XysData=new f,v.earthOrientationParameters=c.NONE;var q=32.184,G=2451545;v.preloadIcrfFixed=function(t){var r=t.start.dayNumber,n=t.start.secondsOfDay+q,i=t.stop.dayNumber,a=t.stop.secondsOfDay+q,o=v.iau2006XysData.preload(r,n,i,a),s=v.earthOrientationParameters.getPromiseToLoad();return e.all([o,s])},v.computeIcrfToFixedMatrix=function(e,t){s(t)||(t=new _);var r=v.computeFixedToIcrfMatrix(e,t);if(s(r))return _.transpose(r,t)};var V=new h(0,0,0),W=new l(0,0,0,0,0,0),X=new _,H=new _;v.computeFixedToIcrfMatrix=function(e,t){s(t)||(t=new _);var r=v.earthOrientationParameters.compute(e,W);if(s(r)){var n=e.dayNumber,i=e.secondsOfDay+q,a=v.iau2006XysData.computeXysRadians(n,i,V);if(s(a)){var o=a.x+r.xPoleOffset,u=a.y+r.yPoleOffset,c=1/(1+Math.sqrt(1-o*o-u*u)),l=X;l[0]=1-c*o*o,l[3]=-c*o*u,l[6]=o,l[1]=-c*o*u,l[4]=1-c*u*u,l[7]=u,l[2]=-o,l[5]=-u,l[8]=1-c*(o*o+u*u);var d=_.fromRotationZ(-a.s,H),f=_.multiply(l,d,X),h=e.dayNumber,E=e.secondsOfDay-p.computeTaiMinusUtc(e)+r.ut1MinusUtc,y=h-2451545,T=E/g.SECONDS_PER_DAY,w=.779057273264+T+.00273781191135448*(y+T);w=w%1*m.TWO_PI;var R=_.fromRotationZ(w,H),A=_.multiply(f,R,X),S=Math.cos(r.xPoleWander),I=Math.cos(r.yPoleWander),O=Math.sin(r.xPoleWander),x=Math.sin(r.yPoleWander),C=n-G+i/g.SECONDS_PER_DAY;C/=36525;var N=-47e-6*C*m.RADIANS_PER_DEGREE/3600,b=Math.cos(N),M=Math.sin(N),U=H;return U[0]=S*b,U[1]=S*M,U[2]=O,U[3]=-I*M+x*O*b,U[4]=I*b+x*O*M,U[5]=-x*S,U[6]=-x*M-I*O*b,U[7]=x*b-I*O*M,U[8]=I*S,_.multiply(A,U,t)}}};var Y=new n;v.pointToWindowCoordinates=function(e,t,r,n){return n=v.pointToGLWindowCoordinates(e,t,r,n),n.y=2*t[5]-n.y,n},v.pointToGLWindowCoordinates=function(e,r,i,a){s(a)||(a=new t);var o=Y;return E.multiplyByVector(e,n.fromElements(i.x,i.y,i.z,1,o),o),n.multiplyByScalar(o,1/o.w,o),E.multiplyByVector(r,o,o),t.fromCartesian4(o,a)};var j=new r,Z=new r,K=new r;v.rotationMatrixFromPositionVelocity=function(e,t,n,i){var a=o(n,d.WGS84).geodeticSurfaceNormal(e,j),u=r.cross(t,a,Z);r.equalsEpsilon(u,r.ZERO,m.EPSILON6)&&(u=r.clone(r.UNIT_X,u));var c=r.cross(u,t,K);return r.cross(t,c,u),r.negate(u,u),s(i)||(i=new _),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=u.x,i[4]=u.y,i[5]=u.z,i[6]=c.x,i[7]=c.y,i[8]=c.z,i};var J=new E(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),Q=new i,$=new r,ee=new r,te=new _,re=new E,ne=new E;return v.basisTo2D=function(e,t,n){var i=E.getTranslation(t,ee),a=e.ellipsoid,o=a.cartesianToCartographic(i,Q),s=e.project(o,$);r.fromElements(s.z,s.x,s.y,s);var u=v.eastNorthUpToFixedFrame(i,a,re),c=E.inverseTransformation(u,ne),l=E.getRotation(t,te),d=E.multiplyByMatrix3(c,l,n);return E.multiply(J,d,n),E.setTranslation(n,s,n),n},v.wgs84To2DModelMatrix=function(e,t,n){var i=e.ellipsoid,a=v.eastNorthUpToFixedFrame(t,i,re),o=E.inverseTransformation(a,ne),s=i.cartesianToCartographic(t,Q),u=e.project(s,$);r.fromElements(u.z,u.x,u.y,u);var c=E.fromTranslation(u,re);return E.multiply(J,o,n),E.multiply(c,n,n),n},v}),define("Core/EllipsoidTangentPlane",["./AxisAlignedBoundingBox","./Cartesian2","./Cartesian3","./Cartesian4","./defaultValue","./defined","./defineProperties","./DeveloperError","./Ellipsoid","./IntersectionTests","./Matrix4","./Plane","./Ray","./Transforms"],function(e,t,r,n,i,a,o,s,u,c,l,d,f,h){"use strict";function p(e,t){t=i(t,u.WGS84),e=t.scaleToGeodeticSurface(e);var n=h.eastNorthUpToFixedFrame(e,t);this._ellipsoid=t,this._origin=e,this._xAxis=r.fromCartesian4(l.getColumn(n,0,m)),this._yAxis=r.fromCartesian4(l.getColumn(n,1,m));var a=r.fromCartesian4(l.getColumn(n,2,m));this._plane=d.fromPointNormal(e,a)}var m=new n;o(p.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},origin:{get:function(){return this._origin}},plane:{get:function(){return this._plane}},xAxis:{get:function(){return this._xAxis}},yAxis:{get:function(){return this._yAxis}},zAxis:{get:function(){return this._plane.normal}}});var _=new e;p.fromPoints=function(t,r){var n=e.fromPoints(t,_);return new p(n.center,r)};var E=new f,y=new r;p.prototype.projectPointOntoPlane=function(e,n){var i=E;i.origin=e,r.normalize(e,i.direction);var o=c.rayPlane(i,this._plane,y);if(a(o)||(r.negate(i.direction,i.direction),o=c.rayPlane(i,this._plane,y)),a(o)){var s=r.subtract(o,this._origin,o),u=r.dot(this._xAxis,s),l=r.dot(this._yAxis,s);return a(n)?(n.x=u,n.y=l,n):new t(u,l)}},p.prototype.projectPointsOntoPlane=function(e,t){a(t)||(t=[]);for(var r=0,n=e.length,i=0;i<n;i++){var o=this.projectPointOntoPlane(e[i],t[r]);a(o)&&(t[r]=o,r++)}return t.length=r,t},p.prototype.projectPointToNearestOnPlane=function(e,n){a(n)||(n=new t);var i=E;i.origin=e,r.clone(this._plane.normal,i.direction);var o=c.rayPlane(i,this._plane,y);a(o)||(r.negate(i.direction,i.direction),o=c.rayPlane(i,this._plane,y));var s=r.subtract(o,this._origin,o),u=r.dot(this._xAxis,s),l=r.dot(this._yAxis,s);return n.x=u,n.y=l,n},p.prototype.projectPointsToNearestOnPlane=function(e,t){a(t)||(t=[]);var r=e.length;t.length=r;for(var n=0;n<r;n++)t[n]=this.projectPointToNearestOnPlane(e[n],t[n]);return t};var g=new r;return p.prototype.projectPointsOntoEllipsoid=function(e,t){var n=e.length;a(t)?t.length=n:t=new Array(n);for(var i=this._ellipsoid,o=this._origin,s=this._xAxis,u=this._yAxis,c=g,l=0;l<n;++l){var d=e[l];r.multiplyByScalar(s,d.x,c),a(t[l])||(t[l]=new r);var f=r.add(o,c,t[l]);r.multiplyByScalar(u,d.y,c),r.add(f,c,f),i.scaleToGeocentricSurface(f,f)}return t},p}),define("Core/OrientedBoundingBox",["./BoundingSphere","./Cartesian2","./Cartesian3","./Cartographic","./Check","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./EllipsoidTangentPlane","./Intersect","./Interval","./Math","./Matrix3","./Plane","./Rectangle"],function(e,t,r,n,i,a,o,s,u,c,l,d,f,h,p,m){"use strict";function _(e,t){this.center=r.clone(a(e,r.ZERO)),this.halfAxes=h.clone(a(t,h.ZERO))}function E(e,t,n,i,a,s,u,c){o(c)||(c=new _);var l=c.halfAxes;h.setColumn(l,0,e.xAxis,l),h.setColumn(l,1,e.yAxis,l),h.setColumn(l,2,e.zAxis,l);var d=I;d.x=(t+n)/2,d.y=(i+a)/2,d.z=(s+u)/2;var f=O;f.x=(n-t)/2,f.y=(a-i)/2,f.z=(u-s)/2;var p=c.center;return d=h.multiplyByVector(l,d,d),r.add(e.origin,d,p),h.multiplyByScale(l,f,l),c}_.packedLength=r.packedLength+h.packedLength,_.pack=function(e,t,n){return n=a(n,0),r.pack(e.center,t,n),h.pack(e.halfAxes,t,n+r.packedLength),t},_.unpack=function(e,t,n){return t=a(t,0),o(n)||(n=new _),r.unpack(e,t,n.center),h.unpack(e,t+r.packedLength,n.halfAxes),n};var y=new r,g=new r,v=new r,T=new r,w=new r,R=new r,A=new h,S={unitary:new h,diagonal:new h};_.fromPoints=function(e,t){if(o(t)||(t=new _),!o(e)||0===e.length)return t.halfAxes=h.ZERO,t.center=r.ZERO,t;var n,i=e.length,a=r.clone(e[0],y);for(n=1;n<i;n++)r.add(a,e[n],a);var s=1/i;r.multiplyByScalar(a,s,a);var u,c=0,l=0,d=0,f=0,p=0,m=0;for(n=0;n<i;n++)u=r.subtract(e[n],a,g),c+=u.x*u.x,l+=u.x*u.y,d+=u.x*u.z,f+=u.y*u.y,p+=u.y*u.z,m+=u.z*u.z;c*=s,l*=s,d*=s,f*=s,p*=s,m*=s;var E=A;E[0]=c,E[1]=l,E[2]=d,E[3]=l,E[4]=f,E[5]=p,E[6]=d,E[7]=p,E[8]=m;var I=h.computeEigenDecomposition(E,S),O=h.clone(I.unitary,t.halfAxes),x=h.getColumn(O,0,T),C=h.getColumn(O,1,w),N=h.getColumn(O,2,R),b=-Number.MAX_VALUE,M=-Number.MAX_VALUE,U=-Number.MAX_VALUE,P=Number.MAX_VALUE,D=Number.MAX_VALUE,L=Number.MAX_VALUE;for(n=0;n<i;n++)u=e[n],b=Math.max(r.dot(x,u),b),M=Math.max(r.dot(C,u),M),U=Math.max(r.dot(N,u),U),P=Math.min(r.dot(x,u),P),D=Math.min(r.dot(C,u),D),L=Math.min(r.dot(N,u),L);x=r.multiplyByScalar(x,.5*(P+b),x),C=r.multiplyByScalar(C,.5*(D+M),C),N=r.multiplyByScalar(N,.5*(L+U),N);var B=r.add(x,C,t.center);r.add(B,N,B);var z=v;return z.x=b-P,z.y=M-D,z.z=U-L,r.multiplyByScalar(z,.5,z),h.multiplyByScale(t.halfAxes,z,t.halfAxes),t};var I=new r,O=new r,x=new n,C=new r,N=[new n,new n,new n,new n,new n,new n,new n,new n],b=[new r,new r,new r,new r,new r,new r,new r,new r],M=[new t,new t,new t,new t,new t,new t,new t,new t];_.fromRectangle=function(e,t,r,n,i){t=a(t,0),r=a(r,0),n=a(n,u.WGS84);var o=m.center(e,x),s=n.cartographicToCartesian(o,C),l=new c(s,n),d=l.plane,f=N[0],h=N[1],_=N[2],y=N[3],g=N[4],v=N[5],T=N[6],w=N[7],R=o.longitude,A=e.south<0&&e.north>0?0:o.latitude;T.latitude=v.latitude=g.latitude=e.south,w.latitude=y.latitude=A,f.latitude=h.latitude=_.latitude=e.north,T.longitude=w.longitude=f.longitude=e.west,v.longitude=h.longitude=R,g.longitude=y.longitude=_.longitude=e.east,_.height=h.height=f.height=w.height=T.height=v.height=g.height=y.height=r,n.cartographicArrayToCartesianArray(N,b),l.projectPointsToNearestOnPlane(b,M);var S=Math.min(M[6].x,M[7].x,M[0].x),I=Math.max(M[2].x,M[3].x,M[4].x),O=Math.min(M[4].y,M[5].y,M[6].y),U=Math.max(M[0].y,M[1].y,M[2].y);_.height=f.height=g.height=T.height=t,n.cartographicArrayToCartesianArray(N,b);var P=Math.min(p.getPointDistance(d,b[0]),p.getPointDistance(d,b[2]),p.getPointDistance(d,b[4]),p.getPointDistance(d,b[6])),D=r;return E(l,S,I,O,U,P,D,i)},_.clone=function(e,t){if(o(e))return o(t)?(r.clone(e.center,t.center),h.clone(e.halfAxes,t.halfAxes),t):new _(e.center,e.halfAxes)},_.intersectPlane=function(e,t){var n=e.center,i=t.normal,a=e.halfAxes,o=i.x,s=i.y,u=i.z,c=Math.abs(o*a[h.COLUMN0ROW0]+s*a[h.COLUMN0ROW1]+u*a[h.COLUMN0ROW2])+Math.abs(o*a[h.COLUMN1ROW0]+s*a[h.COLUMN1ROW1]+u*a[h.COLUMN1ROW2])+Math.abs(o*a[h.COLUMN2ROW0]+s*a[h.COLUMN2ROW1]+u*a[h.COLUMN2ROW2]),d=r.dot(i,n)+t.distance;return d<=-c?l.OUTSIDE:d>=c?l.INSIDE:l.INTERSECTING};var U=new r,P=new r,D=new r,L=new r;_.distanceSquaredTo=function(e,t){var n=r.subtract(t,e.center,I),i=e.halfAxes,a=h.getColumn(i,0,U),o=h.getColumn(i,1,P),s=h.getColumn(i,2,D),u=r.magnitude(a),c=r.magnitude(o),l=r.magnitude(s);r.normalize(a,a),r.normalize(o,o),r.normalize(s,s);var d=L;d.x=r.dot(n,a),d.y=r.dot(n,o),d.z=r.dot(n,s);var f,p=0;return d.x<-u?(f=d.x+u,p+=f*f):d.x>u&&(f=d.x-u,p+=f*f),d.y<-c?(f=d.y+c,p+=f*f):d.y>c&&(f=d.y-c,p+=f*f),d.z<-l?(f=d.z+l,p+=f*f):d.z>l&&(f=d.z-l,p+=f*f),p};var B=new r,z=new r;_.computePlaneDistances=function(e,t,n,i){o(i)||(i=new d);var a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=e.center,c=e.halfAxes,l=h.getColumn(c,0,U),f=h.getColumn(c,1,P),p=h.getColumn(c,2,D),m=r.add(l,f,B);r.add(m,p,m),r.add(m,u,m);var _=r.subtract(m,t,z),E=r.dot(n,_);return a=Math.min(E,a),s=Math.max(E,s),r.add(u,l,m),r.add(m,f,m),r.subtract(m,p,m),r.subtract(m,t,_),E=r.dot(n,_),a=Math.min(E,a),s=Math.max(E,s),r.add(u,l,m),r.subtract(m,f,m),r.add(m,p,m),r.subtract(m,t,_),E=r.dot(n,_),a=Math.min(E,a),s=Math.max(E,s),r.add(u,l,m),r.subtract(m,f,m),r.subtract(m,p,m),r.subtract(m,t,_),E=r.dot(n,_),a=Math.min(E,a),s=Math.max(E,s),r.subtract(u,l,m),r.add(m,f,m),r.add(m,p,m),r.subtract(m,t,_),E=r.dot(n,_),a=Math.min(E,a),s=Math.max(E,s),r.subtract(u,l,m),r.add(m,f,m),r.subtract(m,p,m),r.subtract(m,t,_),E=r.dot(n,_),a=Math.min(E,a),s=Math.max(E,s),r.subtract(u,l,m),r.subtract(m,f,m),r.add(m,p,m),r.subtract(m,t,_),E=r.dot(n,_),a=Math.min(E,a),s=Math.max(E,s),r.subtract(u,l,m),r.subtract(m,f,m),r.subtract(m,p,m),r.subtract(m,t,_),E=r.dot(n,_),a=Math.min(E,a),s=Math.max(E,s),i.start=a,i.stop=s,i};var F=new e;return _.isOccluded=function(t,r){var n=e.fromOrientedBoundingBox(t,F);return!r.isBoundingSphereVisible(n)},_.prototype.intersectPlane=function(e){return _.intersectPlane(this,e)},_.prototype.distanceSquaredTo=function(e){return _.distanceSquaredTo(this,e)},_.prototype.computePlaneDistances=function(e,t,r){return _.computePlaneDistances(this,e,t,r)},_.prototype.isOccluded=function(e){return _.isOccluded(this,e)},_.equals=function(e,t){return e===t||o(e)&&o(t)&&r.equals(e.center,t.center)&&h.equals(e.halfAxes,t.halfAxes)},_.prototype.clone=function(e){return _.clone(this,e)},_.prototype.equals=function(e){return _.equals(this,e)},_}),define("Core/AttributeCompression",["./Cartesian2","./Cartesian3","./Check","./defined","./DeveloperError","./Math"],function(e,t,r,n,i,a){"use strict";function o(e){return e>>1^-(1&e)}var s={};s.octEncodeInRange=function(e,t,r){if(r.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),r.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0){var n=r.x,i=r.y;r.x=(1-Math.abs(i))*a.signNotZero(n),r.y=(1-Math.abs(n))*a.signNotZero(i)}return r.x=a.toSNorm(r.x,t),r.y=a.toSNorm(r.y,t),r},s.octEncode=function(e,t){return s.octEncodeInRange(e,255,t)},s.octDecodeInRange=function(e,r,n,i){if(i.x=a.fromSNorm(e,n),i.y=a.fromSNorm(r,n),i.z=1-(Math.abs(i.x)+Math.abs(i.y)),i.z<0){var o=i.x;i.x=(1-Math.abs(i.y))*a.signNotZero(o),i.y=(1-Math.abs(o))*a.signNotZero(i.y)}return t.normalize(i,i)},s.octDecode=function(e,t,r){return s.octDecodeInRange(e,t,255,r)},s.octPackFloat=function(e){return 256*e.x+e.y};var u=new e;return s.octEncodeFloat=function(e){return s.octEncode(e,u),s.octPackFloat(u)},s.octDecodeFloat=function(e,t){var r=e/256,n=Math.floor(r),i=256*(r-n);return s.octDecode(n,i,t)},s.octPack=function(e,t,r,n){var i=s.octEncodeFloat(e),a=s.octEncodeFloat(t),o=s.octEncode(r,u);return n.x=65536*o.x+i,n.y=65536*o.y+a,n},s.octUnpack=function(e,t,r,n){var i=e.x/65536,a=Math.floor(i),o=65536*(i-a);i=e.y/65536;var u=Math.floor(i),c=65536*(i-u);s.octDecodeFloat(o,t),s.octDecodeFloat(c,r),s.octDecode(a,u,n)},s.compressTextureCoordinates=function(e){var t=4095*e.x|0,r=4095*e.y|0;return 4096*t+r},s.decompressTextureCoordinates=function(e,t){var r=e/4096,n=Math.floor(r);return t.x=n/4095,t.y=(e-4096*n)/4095,t},s.zigZagDeltaDecode=function(e,t,r){for(var i=e.length,a=0,s=0,u=0,c=0;c<i;++c)a+=o(e[c]),s+=o(t[c]),e[c]=a,t[c]=s,n(r)&&(u+=o(r[c]),r[c]=u)},s}),define("Core/WebGLConstants",["./freezeObject"],function(e){"use strict";var t={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,
SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047};return e(t)}),define("Core/ComponentDatatype",["./defaultValue","./defined","./DeveloperError","./FeatureDetection","./freezeObject","./WebGLConstants"],function(e,t,r,n,i,a){"use strict";if(!n.supportsTypedArrays())return{};var o={BYTE:a.BYTE,UNSIGNED_BYTE:a.UNSIGNED_BYTE,SHORT:a.SHORT,UNSIGNED_SHORT:a.UNSIGNED_SHORT,INT:a.INT,UNSIGNED_INT:a.UNSIGNED_INT,FLOAT:a.FLOAT,DOUBLE:a.DOUBLE};return o.getSizeInBytes=function(e){switch(e){case o.BYTE:return Int8Array.BYTES_PER_ELEMENT;case o.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case o.SHORT:return Int16Array.BYTES_PER_ELEMENT;case o.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case o.INT:return Int32Array.BYTES_PER_ELEMENT;case o.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case o.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case o.DOUBLE:return Float64Array.BYTES_PER_ELEMENT}},o.fromTypedArray=function(e){return e instanceof Int8Array?o.BYTE:e instanceof Uint8Array?o.UNSIGNED_BYTE:e instanceof Int16Array?o.SHORT:e instanceof Uint16Array?o.UNSIGNED_SHORT:e instanceof Int32Array?o.INT:e instanceof Uint32Array?o.UNSIGNED_INT:e instanceof Float32Array?o.FLOAT:e instanceof Float64Array?o.DOUBLE:void 0},o.validate=function(e){return t(e)&&(e===o.BYTE||e===o.UNSIGNED_BYTE||e===o.SHORT||e===o.UNSIGNED_SHORT||e===o.INT||e===o.UNSIGNED_INT||e===o.FLOAT||e===o.DOUBLE)},o.createTypedArray=function(e,t){switch(e){case o.BYTE:return new Int8Array(t);case o.UNSIGNED_BYTE:return new Uint8Array(t);case o.SHORT:return new Int16Array(t);case o.UNSIGNED_SHORT:return new Uint16Array(t);case o.INT:return new Int32Array(t);case o.UNSIGNED_INT:return new Uint32Array(t);case o.FLOAT:return new Float32Array(t);case o.DOUBLE:return new Float64Array(t)}},o.createArrayBufferView=function(t,r,n,i){switch(n=e(n,0),i=e(i,(r.byteLength-n)/o.getSizeInBytes(t)),t){case o.BYTE:return new Int8Array(r,n,i);case o.UNSIGNED_BYTE:return new Uint8Array(r,n,i);case o.SHORT:return new Int16Array(r,n,i);case o.UNSIGNED_SHORT:return new Uint16Array(r,n,i);case o.INT:return new Int32Array(r,n,i);case o.UNSIGNED_INT:return new Uint32Array(r,n,i);case o.FLOAT:return new Float32Array(r,n,i);case o.DOUBLE:return new Float64Array(r,n,i)}},o.fromName=function(e){switch(e){case"BYTE":return o.BYTE;case"UNSIGNED_BYTE":return o.UNSIGNED_BYTE;case"SHORT":return o.SHORT;case"UNSIGNED_SHORT":return o.UNSIGNED_SHORT;case"INT":return o.INT;case"UNSIGNED_INT":return o.UNSIGNED_INT;case"FLOAT":return o.FLOAT;case"DOUBLE":return o.DOUBLE}},i(o)}),define("Core/TerrainQuantization",["./freezeObject"],function(e){"use strict";var t={NONE:0,BITS12:1};return e(t)}),define("Core/TerrainEncoding",["./AttributeCompression","./Cartesian2","./Cartesian3","./ComponentDatatype","./defaultValue","./defined","./Math","./Matrix4","./TerrainQuantization"],function(e,t,r,n,i,a,o,s,u){"use strict";function c(e,t,n,o,c,f){var _,E,y,g;if(a(e)&&a(t)&&a(n)&&a(o)){var v=e.minimum,T=e.maximum,w=r.subtract(T,v,d),R=n-t,A=Math.max(r.maximumComponent(w),R);_=A<m-1?u.BITS12:u.NONE,E=e.center,y=s.inverseTransformation(o,new s);var S=r.negate(v,l);s.multiply(s.fromTranslation(S,h),y,y);var I=l;I.x=1/w.x,I.y=1/w.y,I.z=1/w.z,s.multiply(s.fromScale(I,h),y,y),g=s.clone(o),s.setTranslation(g,r.ZERO,g),o=s.clone(o,new s);var O=s.fromTranslation(v,h),x=s.fromScale(w,p),C=s.multiply(O,x,h);s.multiply(o,C,o),s.multiply(g,C,g)}this.quantization=_,this.minimumHeight=t,this.maximumHeight=n,this.center=E,this.toScaledENU=y,this.fromScaledENU=o,this.matrix=g,this.hasVertexNormals=c,this.hasWebMercatorT=i(f,!1)}var l=new r,d=new r,f=new t,h=new s,p=new s,m=Math.pow(2,12);c.prototype.encode=function(n,i,a,c,d,h,p){var m=c.x,_=c.y;if(this.quantization===u.BITS12){a=s.multiplyByPoint(this.toScaledENU,a,l),a.x=o.clamp(a.x,0,1),a.y=o.clamp(a.y,0,1),a.z=o.clamp(a.z,0,1);var E=this.maximumHeight-this.minimumHeight,y=o.clamp((d-this.minimumHeight)/E,0,1);t.fromElements(a.x,a.y,f);var g=e.compressTextureCoordinates(f);t.fromElements(a.z,y,f);var v=e.compressTextureCoordinates(f);t.fromElements(m,_,f);var T=e.compressTextureCoordinates(f);if(n[i++]=g,n[i++]=v,n[i++]=T,this.hasWebMercatorT){t.fromElements(p,0,f);var w=e.compressTextureCoordinates(f);n[i++]=w}}else r.subtract(a,this.center,l),n[i++]=l.x,n[i++]=l.y,n[i++]=l.z,n[i++]=d,n[i++]=m,n[i++]=_,this.hasWebMercatorT&&(n[i++]=p);return this.hasVertexNormals&&(n[i++]=e.octPackFloat(h)),i},c.prototype.decodePosition=function(t,n,i){if(a(i)||(i=new r),n*=this.getStride(),this.quantization===u.BITS12){var o=e.decompressTextureCoordinates(t[n],f);i.x=o.x,i.y=o.y;var c=e.decompressTextureCoordinates(t[n+1],f);return i.z=c.x,s.multiplyByPoint(this.fromScaledENU,i,i)}return i.x=t[n],i.y=t[n+1],i.z=t[n+2],r.add(i,this.center,i)},c.prototype.decodeTextureCoordinates=function(r,n,i){return a(i)||(i=new t),n*=this.getStride(),this.quantization===u.BITS12?e.decompressTextureCoordinates(r[n+2],i):t.fromElements(r[n+4],r[n+5],i)},c.prototype.decodeHeight=function(t,r){if(r*=this.getStride(),this.quantization===u.BITS12){var n=e.decompressTextureCoordinates(t[r+1],f);return n.y*(this.maximumHeight-this.minimumHeight)+this.minimumHeight}return t[r+3]},c.prototype.getOctEncodedNormal=function(e,r,n){var i=this.getStride();r=(r+1)*i-1;var a=e[r]/256,o=Math.floor(a),s=256*(a-o);return t.fromElements(o,s,n)},c.prototype.getStride=function(){var e;switch(this.quantization){case u.BITS12:e=3;break;default:e=6}return this.hasWebMercatorT&&++e,this.hasVertexNormals&&++e,e};var _={position3DAndHeight:0,textureCoordAndEncodedNormals:1},E={compressed0:0,compressed1:1};return c.prototype.getAttributes=function(e){var t,r=n.FLOAT,i=n.getSizeInBytes(r);if(this.quantization===u.NONE){var a=4,o=2;return this.hasWebMercatorT&&++o,this.hasVertexNormals&&++o,t=(a+o)*i,[{index:_.position3DAndHeight,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:a,offsetInBytes:0,strideInBytes:t},{index:_.textureCoordAndEncodedNormals,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:o,offsetInBytes:a*i,strideInBytes:t}]}var s=3,c=0;return(this.hasWebMercatorT||this.hasVertexNormals)&&++s,this.hasWebMercatorT&&this.hasVertexNormals?(++c,t=(s+c)*i,[{index:E.compressed0,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:s,offsetInBytes:0,strideInBytes:t},{index:E.compressed1,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:c,offsetInBytes:s*i,strideInBytes:t}]):[{index:E.compressed0,vertexBuffer:e,componentDatatype:r,componentsPerAttribute:s}]},c.prototype.getAttributeLocations=function(){return this.quantization===u.NONE?_:E},c.clone=function(e,t){return a(t)||(t=new c),t.quantization=e.quantization,t.minimumHeight=e.minimumHeight,t.maximumHeight=e.maximumHeight,t.center=r.clone(e.center),t.toScaledENU=s.clone(e.toScaledENU),t.fromScaledENU=s.clone(e.fromScaledENU),t.matrix=s.clone(e.matrix),t.hasVertexNormals=e.hasVertexNormals,t.hasWebMercatorT=e.hasWebMercatorT,t},c}),define("Core/WebMercatorProjection",["./Cartesian3","./Cartographic","./defaultValue","./defined","./defineProperties","./DeveloperError","./Ellipsoid","./Math"],function(e,t,r,n,i,a,o,s){"use strict";function u(e){this._ellipsoid=r(e,o.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}return i(u.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),u.mercatorAngleToGeodeticLatitude=function(e){return s.PI_OVER_TWO-2*Math.atan(Math.exp(-e))},u.geodeticLatitudeToMercatorAngle=function(e){e>u.MaximumLatitude?e=u.MaximumLatitude:e<-u.MaximumLatitude&&(e=-u.MaximumLatitude);var t=Math.sin(e);return.5*Math.log((1+t)/(1-t))},u.MaximumLatitude=u.mercatorAngleToGeodeticLatitude(Math.PI),u.prototype.project=function(t,r){var i=this._semimajorAxis,a=t.longitude*i,o=u.geodeticLatitudeToMercatorAngle(t.latitude)*i,s=t.height;return n(r)?(r.x=a,r.y=o,r.z=s,r):new e(a,o,s)},u.prototype.unproject=function(e,r){var i=this._oneOverSemimajorAxis,a=e.x*i,o=u.mercatorAngleToGeodeticLatitude(e.y*i),s=e.z;return n(r)?(r.longitude=a,r.latitude=o,r.height=s,r):new t(a,o,s)},u}),define("Core/HeightmapTessellator",["./AxisAlignedBoundingBox","./BoundingSphere","./Cartesian2","./Cartesian3","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./EllipsoidalOccluder","./freezeObject","./Math","./Matrix4","./OrientedBoundingBox","./Rectangle","./TerrainEncoding","./Transforms","./WebMercatorProjection"],function(e,t,r,n,i,a,o,s,u,c,l,d,f,h,p,m,_){"use strict";var E={};E.DEFAULT_STRUCTURE=c({heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1});var y=new n,g=new d,v=new n,T=new n;return E.computeVertices=function(o){var c,w,R,A,S=Math.cos,I=Math.sin,O=Math.sqrt,x=Math.atan,C=Math.exp,N=l.PI_OVER_TWO,b=l.toRadians,M=o.heightmap,U=o.width,P=o.height,D=o.skirtHeight,L=i(o.isGeographic,!0),B=i(o.ellipsoid,s.WGS84),z=1/B.maximumRadius,F=o.nativeRectangle,k=o.rectangle;a(k)?(c=k.west,w=k.south,R=k.east,A=k.north):L?(c=b(F.west),w=b(F.south),R=b(F.east),A=b(F.north)):(c=F.west*z,w=N-2*x(C(-F.south*z)),R=F.east*z,A=N-2*x(C(-F.north*z)));var q=o.relativeToCenter,G=a(q);q=G?q:n.ZERO;var V=i(o.exaggeration,1),W=i(o.includeWebMercatorT,!1),X=i(o.structure,E.DEFAULT_STRUCTURE),H=i(X.heightScale,E.DEFAULT_STRUCTURE.heightScale),Y=i(X.heightOffset,E.DEFAULT_STRUCTURE.heightOffset),j=i(X.elementsPerHeight,E.DEFAULT_STRUCTURE.elementsPerHeight),Z=i(X.stride,E.DEFAULT_STRUCTURE.stride),K=i(X.elementMultiplier,E.DEFAULT_STRUCTURE.elementMultiplier),J=i(X.isBigEndian,E.DEFAULT_STRUCTURE.isBigEndian),Q=h.computeWidth(F),$=h.computeHeight(F),ee=Q/(U-1),te=$/(P-1);L||(Q*=z,$*=z);var re,ne,ie=B.radiiSquared,ae=ie.x,oe=ie.y,se=ie.z,ue=65536,ce=-65536,le=m.eastNorthUpToFixedFrame(q,B),de=d.inverseTransformation(le,g);W&&(re=_.geodeticLatitudeToMercatorAngle(w),ne=1/(_.geodeticLatitudeToMercatorAngle(A)-re));var fe=v;fe.x=Number.POSITIVE_INFINITY,fe.y=Number.POSITIVE_INFINITY,fe.z=Number.POSITIVE_INFINITY;var he=T;he.x=Number.NEGATIVE_INFINITY,he.y=Number.NEGATIVE_INFINITY,he.z=Number.NEGATIVE_INFINITY;var pe=Number.POSITIVE_INFINITY,me=U+(D>0?2:0),_e=P+(D>0?2:0),Ee=me*_e,ye=new Array(Ee),ge=new Array(Ee),ve=new Array(Ee),Te=W?new Array(Ee):[],we=0,Re=P,Ae=0,Se=U;D>0&&(--we,++Re,--Ae,++Se);for(var Ie=0,Oe=we;Oe<Re;++Oe){var xe=Oe;xe<0&&(xe=0),xe>=P&&(xe=P-1);var Ce=F.north-te*xe;Ce=L?b(Ce):N-2*x(C(-Ce*z));var Ne=S(Ce),be=I(Ce),Me=se*be,Ue=(Ce-w)/(A-w);Ue=l.clamp(Ue,0,1);var Pe;W&&(Pe=(_.geodeticLatitudeToMercatorAngle(Ce)-re)*ne);for(var De=Ae;De<Se;++De){var Le=De;Le<0&&(Le=0),Le>=U&&(Le=U-1);var Be=F.west+ee*Le;L?Be=b(Be):Be*=z;var ze,Fe=xe*(U*Z)+Le*Z;if(1===j)ze=M[Fe];else{ze=0;var ke;if(J)for(ke=0;ke<j;++ke)ze=ze*K+M[Fe+ke];else for(ke=j-1;ke>=0;--ke)ze=ze*K+M[Fe+ke]}ze=(ze*H+Y)*V;var qe=(Be-c)/(R-c);if(qe=l.clamp(qe,0,1),ve[Ie]=new r(qe,Ue),ce=Math.max(ce,ze),ue=Math.min(ue,ze),De!==Le||Oe!==xe){var Ge=1e-5;De<0?Be-=Ge*Q:Be+=Ge*Q,Oe<0?Ce+=Ge*$:Ce-=Ge*$,Ne=S(Ce),be=I(Ce),Me=se*be,ze-=D}var Ve=Ne*S(Be),We=Ne*I(Be),Xe=ae*Ve,He=oe*We,Ye=O(Xe*Ve+He*We+Me*be),je=1/Ye,Ze=Xe*je,Ke=He*je,Je=Me*je,Qe=new n;Qe.x=Ze+Ve*ze,Qe.y=Ke+We*ze,Qe.z=Je+be*ze,ye[Ie]=Qe,ge[Ie]=ze,W&&(Te[Ie]=Pe),Ie++,d.multiplyByPoint(de,Qe,y),n.minimumByComponent(y,fe,fe),n.maximumByComponent(y,he,he),pe=Math.min(pe,ze)}}var $e,et=t.fromPoints(ye);a(k)&&k.width<l.PI_OVER_TWO+l.EPSILON5&&($e=f.fromRectangle(k,ue,ce,B));var tt;if(G){var rt=new u(B);tt=rt.computeHorizonCullingPoint(q,ye)}for(var nt=new e(fe,he,q),it=new p(nt,pe,ce,le,!1,W),at=new Float32Array(Ee*it.getStride()),ot=0,st=0;st<Ee;++st)ot=it.encode(at,ot,ye[st],ve[st],ge[st],void 0,Te[st]);return{vertices:at,maximumHeight:ce,minimumHeight:ue,encoding:it,boundingSphere3D:et,orientedBoundingBox:$e,occludeePointInScaledSpace:tt}},E}),define("Core/formatError",["./defined"],function(e){"use strict";function t(t){var r,n=t.name,i=t.message;r=e(n)&&e(i)?n+": "+i:t.toString();var a=t.stack;return e(a)&&(r+="\n"+a),r}return t}),define("Workers/createTaskProcessorWorker",["../Core/defaultValue","../Core/defined","../Core/formatError"],function(e,t,r){"use strict";function n(n){var i,a=[],o={id:void 0,result:void 0,error:void 0};return function(s){var u=s.data;a.length=0,o.id=u.id,o.error=void 0,o.result=void 0;try{o.result=n(u.parameters,a)}catch(e){e instanceof Error?o.error={name:e.name,message:e.message,stack:e.stack}:o.error=e}t(i)||(i=e(self.webkitPostMessage,self.postMessage)),u.canTransferArrayBuffer||(a.length=0);try{i(o,a)}catch(e){o.result=void 0,o.error="postMessage failed with error: "+r(e)+"\n  with responseMessage: "+JSON.stringify(o),i(o)}}}return n}),define("Workers/LSJPNode",[],function(){"use strict";function e(){this.children=[],this.childRanges=[],this.strDataPath="",this.bdSphere=[],this.enRangeMode=0,this.arryMaterials=[],this.nodeMeshes=[]}return e}),define("Workers/LSJPNodeMat",[],function(){"use strict";function e(){this.id=-1,this.index=-1,this.imgUrl="",this.imgBlob=null,this.width=0,this.height=0,this.pixelFormat=0,this.eftype=0,this.bUrl=!0,this.diffuseR=1,this.diffuseG=1,this.diffuseB=1}return e}),define("Workers/LSJPNodeMesh",[],function(){"use strict";function e(){this.matIndex=-1,this.indices=null,this.verts=null,this.normals=null,this.colors=null,this.colorPerNum=1,this.uvs=[]}return e}),define("Workers/LSJPParser",["./LSJPNode","./LSJPNodeMat","./LSJPNodeMesh"],function(e,t,r){"use strict";function n(){}return n.prototype.parseMaterials=function(e,r){for(var n=r.readUInt32(),i=0;i<n;i++){var a=new t;a.index=i,a.id=i,e.arryMaterials.push(a);var o=(r.readUChar8Array2(4),r.readUChar8Array2(4));r.readUChar8Array2(4),r.readFloat();a.diffuseR=o[0]/255,a.diffuseG=o[1]/255,a.diffuseB=o[2]/255;for(var s=r.readUInt32(),u=0;u<s;u++){var c=r.readUInt32();if(0==c){var l=r.readString();if(0==u){var d,f=l.substring(l.lastIndexOf("."),l.length).toLowerCase();if(".jpeg"==f||".jpg"==f)d="jpeg";else if(".png"==f)d="png";else if(".gif"==f)d="gif";else if(".icon"==f)d="x-icon";else if(".dxt"==f||".etc"==f||".pvr"==f){d="compressed";var h=r.readUInt32(),p=r.readUInt32(),m=r.readUInt32(),_=r.readUInt32(),E=r.readUChar8Array2(h-12);a.width=p,a.height=m,a.pixelFormat=_,a.imgBlob=E,a.eftype=d,a.bUrl=!1;continue}var h=r.readUInt32(),E=r.readUChar8Array2(h);a.imgBlob=new Blob([E],{type:d}),a.bUrl=!1}}else{var y=r.readString();0==u&&(a.imgUrl=y,a.bUrl=!0)}}}},n.prototype.parseNode=function(t,n){for(var i=n.readUInt32(),a=0;a<i;a++){var o=n.readUInt32(),s=new e;t.children.push(s),0==o?s.strDataPath=n.readString():this.parseNode(s,n)}t.enRangeMode=n.readUInt32();var u=n.readUInt32(),a=0,c=0;for(a=0;a<u;a++)t.childRanges.push(n.readDouble()),t.childRanges.push(n.readDouble());t.bdSphere.push(n.readDouble()),t.bdSphere.push(n.readDouble()),t.bdSphere.push(n.readDouble()),t.bdSphere.push(n.readDouble());var l=n.readUInt32();for(a=0;a<l;a++){var d=new r;t.nodeMeshes.push(d),d.matIndex=n.readUInt32();var f=(n.readUInt32(),n.readUInt32());if(f>0){var h=n.readUInt32();if(4==h){var p=n.readUInt32Array(f);for(d.indices=new Uint32Array(f),c=0;c<f;c++)d.indices[c]=p.getUint32(4*c,!0)}else if(2==h){var p=n.readUInt16Array(f);for(d.indices=new Uint16Array(f),c=0;c<f;c++)d.indices[c]=p.getUint16(2*c,!0)}}var m=n.readUInt32();if(m>0){var _=3*m,E=n.readFloat32Array(_);for(d.verts=new Float32Array(_),c=0;c<_;c++)d.verts[c]=E.getFloat32(4*c,!0)}var y=n.readUInt32();if(y>0){var _=3*y,g=n.readFloat32Array(_);for(d.normals=new Float32Array(_),c=0;c<_;c++)d.normals[c]=g.getFloat32(4*c,!0)}for(var v=n.readUInt32(),T=0;T<v;T++){var w=n.readUInt32();if(w>0){var _=2*w,R=n.readFloat32Array(_),A=new Float32Array(_);for(c=0;c<_;c++)A[c]=R.getFloat32(4*c,!0);d.uvs.push(A)}}var S=n.readUInt32();if(S>0){var _=S;for(d.colors=new Uint32Array(_),d.colorPerNum=1,c=0;c<_;c++)d.colors[c]=n.readUInt32()}var I=n.readUInt32();if(I>0){var _=I;n.readUInt32Array(_)}}},n.prototype.parse=function(e,t){t.readUInt32();this.parseMaterials(e,t),this.parseNode(e,t)},n}),define("Workers/LSJMemStream",[],function(){"use strict";function e(e){this.curOffset=0,this.data=e,this.bLittleEndian=this.isLittleEndian()}return e.prototype.TWO_POW_MINUS23=Math.pow(2,-23),e.prototype.TWO_POW_MINUS126=Math.pow(2,-126),e.prototype.isLittleEndian=function(){var e=new ArrayBuffer(2),t=new Uint8Array(e),r=new Uint16Array(e);return t[0]=1,1===r[0]},e.prototype.readByte_1=function(){return 255&this.data[this.curOffset++]},e.prototype.readUChar8_1=function(){return 255&this.data[this.curOffset++]},e.prototype.readUInt32_1=function(){var e=this.readByte();return e|=this.readByte()<<8,e|=this.readByte()<<16,e|this.readByte()<<24},e.prototype.readInt32_1=function(){var e=this.readByte();return e|=this.readByte()<<8,e|=this.readByte()<<16,e|this.readByte()<<24},e.prototype.readFloat_1=function(){var e=this.readByte();e+=this.readByte()<<8;var t=this.readByte(),r=this.readByte();e+=(127&t)<<16;var n=(127&r)<<1|(128&t)>>>7,i=128&r?-1:1;return 255===n?0!==e?NaN:i*(1/0):n>0?i*(1+e*this.TWO_POW_MINUS23)*Math.pow(2,n-127):0!==e?i*e*this.TWO_POW_MINUS126:0*i},e.prototype.readUChar8=function(){var e=new Uint8Array(this.data,this.curOffset,1);return this.curOffset+=1,e[0]},e.prototype.readUInt32=function(){var e=new DataView(this.data,this.curOffset,4),t=e.getUint32(0,!0);return this.curOffset+=4,t},e.prototype.readInt32=function(){var e=new DataView(this.data,this.curOffset,4);return this.curOffset+=4,e.getInt32(0,!0)},e.prototype.readInt16=function(){var e=new DataView(this.data,this.curOffset,2);return this.curOffset+=2,e.getInt16(0,!0)},e.prototype.readUInt16=function(){var e=new DataView(this.data,this.curOffset,2);return this.curOffset+=2,e.getUint16(0,!0)},e.prototype.readFloat=function(){var e=new DataView(this.data,this.curOffset,4);return this.curOffset+=4,e.getFloat32(0,!0)},e.prototype.readDouble=function(){var e=new DataView(this.data,this.curOffset,8);return this.curOffset+=8,e.getFloat64(0,!0)},e.prototype.readFloat32Array=function(e){var t=4*e,r=new DataView(this.data,this.curOffset,t);return this.curOffset+=t,r},e.prototype.readFloat64Array=function(e){var t=8*e,r=new DataView(this.data,this.curOffset,t);return this.curOffset+=t,r},e.prototype.readUInt16Array=function(e){var t=2*e,r=new DataView(this.data,this.curOffset,t);return this.curOffset+=t,r},e.prototype.readUInt32Array=function(e){var t=4*e,r=new DataView(this.data,this.curOffset,t);return this.curOffset+=t,r},e.prototype.readUChar8Array=function(e){var t=1*e,r=new DataView(this.data,this.curOffset,t);return this.curOffset+=t,r},e.prototype.readUChar8Array2=function(e){var t=new Uint8Array(this.data,this.curOffset,e);return this.curOffset+=e,t},e.prototype.readString=function(){for(var e=this.readUInt32(),t=new Uint8Array(this.data,this.curOffset,e),r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return this.curOffset+=e,r},e}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("ThirdParty/jszip.min",[],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.JSZip=e()}}(function(){return function e(t,r,n){function i(o,s){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){var r=t[o][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,i,a,o,s,u,c="",l=0;l<e.length;)t=e.charCodeAt(l++),r=e.charCodeAt(l++),i=e.charCodeAt(l++),a=t>>2,o=(3&t)<<4|r>>4,s=(15&r)<<2|i>>6,u=63&i,isNaN(r)?s=u=64:isNaN(i)&&(u=64),c=c+n.charAt(a)+n.charAt(o)+n.charAt(s)+n.charAt(u);return c;
},r.decode=function(e){var t,r,i,a,o,s,u,c="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)a=n.indexOf(e.charAt(l++)),o=n.indexOf(e.charAt(l++)),s=n.indexOf(e.charAt(l++)),u=n.indexOf(e.charAt(l++)),t=a<<2|o>>4,r=(15&o)<<4|s>>2,i=(3&s)<<6|u,c+=String.fromCharCode(t),64!=s&&(c+=String.fromCharCode(r)),64!=u&&(c+=String.fromCharCode(i));return c}},{}],2:[function(e,t){"use strict";function r(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}r.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=r},{}],3:[function(e,t,r){"use strict";r.STORE={magic:"\0\0",compress:function(e){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null},r.DEFLATE=e("./flate")},{"./flate":8}],4:[function(e,t){"use strict";var r=e("./utils"),n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(e,t){if("undefined"==typeof e||!e.length)return 0;var i="string"!==r.getTypeOf(e);"undefined"==typeof t&&(t=0);var a=0,o=0,s=0;t^=-1;for(var u=0,c=e.length;c>u;u++)s=i?e[u]:e.charCodeAt(u),o=255&(t^s),a=n[o],t=t>>>8^a;return-1^t}},{"./utils":21}],5:[function(e,t){"use strict";function r(){this.data=null,this.length=0,this.index=0}var n=e("./utils");r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<e||0>e)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1)}},t.exports=r},{"./utils":21}],6:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!1,r.date=null,r.compression=null,r.comment=null},{}],7:[function(e,t,r){"use strict";var n=e("./utils");r.string2binary=function(e){return n.string2binary(e)},r.string2Uint8Array=function(e){return n.transformTo("uint8array",e)},r.uint8Array2String=function(e){return n.transformTo("string",e)},r.string2Blob=function(e){var t=n.transformTo("arraybuffer",e);return n.arrayBuffer2Blob(t)},r.arrayBuffer2Blob=function(e){return n.arrayBuffer2Blob(e)},r.transformTo=function(e,t){return n.transformTo(e,t)},r.getTypeOf=function(e){return n.getTypeOf(e)},r.checkSupport=function(e){return n.checkSupport(e)},r.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,r.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,r.pretty=function(e){return n.pretty(e)},r.findCompression=function(e){return n.findCompression(e)},r.isRegExp=function(e){return n.isRegExp(e)}},{"./utils":21}],8:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako");r.uncompressInputType=n?"uint8array":"array",r.compressInputType=n?"uint8array":"array",r.magic="\b\0",r.compress=function(e){return i.deflateRaw(e)},r.uncompress=function(e){return i.inflateRaw(e)}},{pako:24}],9:[function(e,t){"use strict";function r(e,t){return this instanceof r?(this.files={},this.comment=null,this.root="",e&&this.load(e,t),void(this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e})):new r(e,t)}var n=e("./base64");r.prototype=e("./object"),r.prototype.load=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.utils=e("./deprecatedPublicUtils"),r.base64={encode:function(e){return n.encode(e)},decode:function(e){return n.decode(e)}},r.compressions=e("./compressions"),t.exports=r},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(e,t){"use strict";var r=e("./base64"),n=e("./zipEntries");t.exports=function(e,t){var i,a,o,s;for(t=t||{},t.base64&&(e=r.decode(e)),a=new n(e,t),i=a.files,o=0;o<i.length;o++)s=i[o],this.file(s.fileName,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileComment.length?s.fileComment:null,createFolders:t.createFolders});return a.zipComment.length&&(this.comment=a.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(e,t){(function(e){"use strict";t.exports=function(t,r){return new e(t,r)},t.exports.test=function(t){return e.isBuffer(t)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(e,t){"use strict";function r(e){this.data=e,this.length=this.data.length,this.index=0}var n=e("./uint8ArrayReader");r.prototype=new n,r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./uint8ArrayReader":18}],13:[function(e,t){"use strict";var r=e("./support"),n=e("./utils"),i=e("./crc32"),a=e("./signature"),o=e("./defaults"),s=e("./base64"),u=e("./compressions"),c=e("./compressedObject"),l=e("./nodeBuffer"),d=e("./utf8"),f=e("./stringWriter"),h=e("./uint8ArrayWriter"),p=function(e){if(e._data instanceof c&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===n.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},m=function(e){var t=p(e),i=n.getTypeOf(t);return"string"===i?!e.options.binary&&r.nodebuffer?l(t,"utf-8"):e.asBinary():t},_=function(e){var t=p(this);return null===t||"undefined"==typeof t?"":(this.options.base64&&(t=s.decode(t)),t=e&&this.options.binary?I.utf8decode(t):n.transformTo("string",t),e||this.options.binary||(t=n.transformTo("string",I.utf8encode(t))),t)},E=function(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this._data=t,this.options=r,this._initialMetadata={dir:r.dir,date:r.date}};E.prototype={asText:function(){return _.call(this,!0)},asBinary:function(){return _.call(this,!1)},asNodeBuffer:function(){var e=m(this);return n.transformTo("nodebuffer",e)},asUint8Array:function(){var e=m(this);return n.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var y=function(e,t){var r,n="";for(r=0;t>r;r++)n+=String.fromCharCode(255&e),e>>>=8;return n},g=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&"undefined"==typeof r[t]&&(r[t]=arguments[e][t]);return r},v=function(e){return e=e||{},e.base64!==!0||null!==e.binary&&void 0!==e.binary||(e.binary=!0),e=g(e,o),e.date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e},T=function(e,t,r){var i,a=n.getTypeOf(t);if(r=v(r),r.createFolders&&(i=w(e))&&R.call(this,i,!0),r.dir||null===t||"undefined"==typeof t)r.base64=!1,r.binary=!1,t=null;else if("string"===a)r.binary&&!r.base64&&r.optimizedBinaryString!==!0&&(t=n.string2binary(t));else{if(r.base64=!1,r.binary=!0,!(a||t instanceof c))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===a&&(t=n.transformTo("uint8array",t))}var o=new E(e,t,r);return this.files[e]=o,o},w=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},R=function(e,t){return"/"!=e.slice(-1)&&(e+="/"),t="undefined"!=typeof t&&t,this.files[e]||T.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},A=function(e,t){var r,a=new c;return e._data instanceof c?(a.uncompressedSize=e._data.uncompressedSize,a.crc32=e._data.crc32,0===a.uncompressedSize||e.dir?(t=u.STORE,a.compressedContent="",a.crc32=0):e._data.compressionMethod===t.magic?a.compressedContent=e._data.getCompressedContent():(r=e._data.getContent(),a.compressedContent=t.compress(n.transformTo(t.compressInputType,r)))):(r=m(e),(!r||0===r.length||e.dir)&&(t=u.STORE,r=""),a.uncompressedSize=r.length,a.crc32=i(r),a.compressedContent=t.compress(n.transformTo(t.compressInputType,r))),a.compressedSize=a.compressedContent.length,a.compressionMethod=t.magic,a},S=function(e,t,r,o){var s,u,c,l,f=(r.compressedContent,n.transformTo("string",d.utf8encode(t.name))),h=t.comment||"",p=n.transformTo("string",d.utf8encode(h)),m=f.length!==t.name.length,_=p.length!==h.length,E=t.options,g="",v="",T="";c=t._initialMetadata.dir!==t.dir?t.dir:E.dir,l=t._initialMetadata.date!==t.date?t.date:E.date,s=l.getHours(),s<<=6,s|=l.getMinutes(),s<<=5,s|=l.getSeconds()/2,u=l.getFullYear()-1980,u<<=4,u|=l.getMonth()+1,u<<=5,u|=l.getDate(),m&&(v=y(1,1)+y(i(f),4)+f,g+="up"+y(v.length,2)+v),_&&(T=y(1,1)+y(this.crc32(p),4)+p,g+="uc"+y(T.length,2)+T);var w="";w+="\n\0",w+=m||_?"\0\b":"\0\0",w+=r.compressionMethod,w+=y(s,2),w+=y(u,2),w+=y(r.crc32,4),w+=y(r.compressedSize,4),w+=y(r.uncompressedSize,4),w+=y(f.length,2),w+=y(g.length,2);var R=a.LOCAL_FILE_HEADER+w+f+g,A=a.CENTRAL_FILE_HEADER+"\0"+w+y(p.length,2)+"\0\0\0\0"+(c===!0?"\0\0\0":"\0\0\0\0")+y(o,4)+f+g+p;return{fileRecord:R,dirRecord:A,compressedObject:r}},I={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t,r,n,i,a=[];for(t in this.files)this.files.hasOwnProperty(t)&&(n=this.files[t],i=new E(n.name,n._data,g(n.options)),r=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(r,i)&&a.push(i));return a},file:function(e,t,r){if(1===arguments.length){if(n.isRegExp(e)){var i=e;return this.filter(function(e,t){return!t.dir&&i.test(e)})}return this.filter(function(t,r){return!r.dir&&t===e})[0]||null}return e=this.root+e,T.call(this,e,t,r),this},folder:function(e){if(!e)return this;if(n.isRegExp(e))return this.filter(function(t,r){return r.dir&&e.test(t)});var t=this.root+e,r=R.call(this,t),i=this.clone();return i.root=r.name,i},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter(function(t,r){return r.name.slice(0,e.length)===e}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(e){e=g(e||{},{base64:!0,compression:"STORE",type:"base64",comment:null}),n.checkSupport(e.type);var t,r,i=[],o=0,c=0,l=n.transformTo("string",this.utf8encode(e.comment||this.comment||""));for(var d in this.files)if(this.files.hasOwnProperty(d)){var p=this.files[d],m=p.options.compression||e.compression.toUpperCase(),_=u[m];if(!_)throw new Error(m+" is not a valid compression method !");var E=A.call(this,p,_),v=S.call(this,d,p,E,o);o+=v.fileRecord.length+E.compressedSize,c+=v.dirRecord.length,i.push(v)}var T="";T=a.CENTRAL_DIRECTORY_END+"\0\0\0\0"+y(i.length,2)+y(i.length,2)+y(c,4)+y(o,4)+y(l.length,2)+l;var w=e.type.toLowerCase();for(t="uint8array"===w||"arraybuffer"===w||"blob"===w||"nodebuffer"===w?new h(o+c+T.length):new f(o+c+T.length),r=0;r<i.length;r++)t.append(i[r].fileRecord),t.append(i[r].compressedObject.compressedContent);for(r=0;r<i.length;r++)t.append(i[r].dirRecord);t.append(T);var R=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return n.transformTo(e.type.toLowerCase(),R);case"blob":return n.arrayBuffer2Blob(n.transformTo("arraybuffer",R));case"base64":return e.base64?s.encode(R):R;default:return R}},crc32:function(e,t){return i(e,t)},utf8encode:function(e){return n.transformTo("string",d.utf8encode(e))},utf8decode:function(e){return d.utf8decode(e)}};t.exports=I},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],15:[function(e,t){"use strict";function r(e,t){this.data=e,t||(this.data=i.string2binary(this.data)),this.length=this.data.length,this.index=0}var n=e("./dataReader"),i=e("./utils");r.prototype=new n,r.prototype.byteAt=function(e){return this.data.charCodeAt(e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./dataReader":5,"./utils":21}],16:[function(e,t){"use strict";var r=e("./utils"),n=function(){this.data=[]};n.prototype={append:function(e){e=r.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}},t.exports=n},{"./utils":21}],17:[function(e,t,r){(function(e){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof e,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var t=new ArrayBuffer(0);try{r.blob=0===new Blob([t],{type:"application/zip"}).size}catch(e){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=new n;i.append(t),r.blob=0===i.getBlob("application/zip").size}catch(e){r.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(e,t){"use strict";function r(e){e&&(this.data=e,this.length=this.data.length,this.index=0)}var n=e("./dataReader");r.prototype=new n,r.prototype.byteAt=function(e){return this.data[e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===t&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a;return-1},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./dataReader":5}],19:[function(e,t){"use strict";var r=e("./utils"),n=function(e){this.data=new Uint8Array(e),this.index=0};n.prototype={append:function(e){0!==e.length&&(e=r.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},t.exports=n},{"./utils":21}],20:[function(e,t,r){"use strict";for(var n=e("./utils"),i=e("./support"),a=e("./nodeBuffer"),o=new Array(256),s=0;256>s;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;o[254]=o[254]=1;var u=function(e){var t,r,n,a,o,s=e.length,u=0;for(a=0;s>a;a++)r=e.charCodeAt(a),55296===(64512&r)&&s>a+1&&(n=e.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),u+=128>r?1:2048>r?2:65536>r?3:4;for(t=i.uint8array?new Uint8Array(u):new Array(u),o=0,a=0;u>o;a++)r=e.charCodeAt(a),55296===(64512&r)&&s>a+1&&(n=e.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),128>r?t[o++]=r:2048>r?(t[o++]=192|r>>>6,t[o++]=128|63&r):65536>r?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},c=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&128===(192&e[r]);)r--;return 0>r?t:0===r?t:r+o[e[r]]>t?r:t},l=function(e){var t,r,i,a,s=e.length,u=new Array(2*s);for(r=0,t=0;s>t;)if(i=e[t++],128>i)u[r++]=i;else if(a=o[i],a>4)u[r++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&s>t;)i=i<<6|63&e[t++],a--;a>1?u[r++]=65533:65536>i?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return u.length!==r&&(u.subarray?u=u.subarray(0,r):u.length=r),n.applyFromCharCode(u)};r.utf8encode=function(e){return i.nodebuffer?a(e,"utf-8"):u(e)},r.utf8decode=function(e){if(i.nodebuffer)return n.transformTo("nodebuffer",e).toString("utf-8");e=n.transformTo(i.uint8array?"uint8array":"array",e);for(var t=[],r=0,a=e.length,o=65536;a>r;){var s=c(e,Math.min(r+o,a));t.push(l(i.uint8array?e.subarray(r,s):e.slice(r,s))),r=s}return t.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(e,t,r){"use strict";function n(e){return e}function i(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}function a(e){var t=65536,n=[],i=e.length,a=r.getTypeOf(e),o=0,s=!0;try{switch(a){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,c(0))}}catch(e){s=!1}if(!s){for(var u="",l=0;l<e.length;l++)u+=String.fromCharCode(e[l]);return u}for(;i>o&&t>1;)try{n.push("array"===a||"nodebuffer"===a?String.fromCharCode.apply(null,e.slice(o,Math.min(o+t,i))):String.fromCharCode.apply(null,e.subarray(o,Math.min(o+t,i)))),o+=t}catch(e){t=Math.floor(t/2)}return n.join("")}function o(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}var s=e("./support"),u=e("./compressions"),c=e("./nodeBuffer");r.string2binary=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(255&e.charCodeAt(r));return t},r.arrayBuffer2Blob=function(e){r.checkSupport("blob");try{return new Blob([e],{type:"application/zip"})}catch(r){try{var t=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,n=new t;return n.append(e),n.getBlob("application/zip")}catch(e){throw new Error("Bug : can't construct the Blob.")}}},r.applyFromCharCode=a;var l={};l.string={string:n,array:function(e){return i(e,new Array(e.length))},arraybuffer:function(e){return l.string.uint8array(e).buffer},uint8array:function(e){return i(e,new Uint8Array(e.length))},nodebuffer:function(e){return i(e,c(e.length))}},l.array={string:a,array:n,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return c(e)}},l.arraybuffer={string:function(e){return a(new Uint8Array(e))},array:function(e){return o(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:n,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return c(new Uint8Array(e))}},l.uint8array={string:a,array:function(e){return o(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:n,nodebuffer:function(e){return c(e)}},l.nodebuffer={string:a,array:function(e){return o(e,new Array(e.length))},arraybuffer:function(e){return l.nodebuffer.uint8array(e).buffer},uint8array:function(e){return o(e,new Uint8Array(e.length))},nodebuffer:n},r.transformTo=function(e,t){if(t||(t=""),!e)return t;r.checkSupport(e);var n=r.getTypeOf(t),i=l[n][e](t);return i},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":s.nodebuffer&&c.test(e)?"nodebuffer":s.uint8array&&e instanceof Uint8Array?"uint8array":s.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){var t=s[e.toLowerCase()];if(!t)throw new Error(e+" is not supported by this browser")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)t=e.charCodeAt(r),n+="\\x"+(16>t?"0":"")+t.toString(16).toUpperCase();return n},r.findCompression=function(e){for(var t in u)if(u.hasOwnProperty(t)&&u[t].magic===e)return u[t];return null},r.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(e,t){"use strict";function r(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}var n=e("./stringReader"),i=e("./nodeBufferReader"),a=e("./uint8ArrayReader"),o=e("./utils"),s=e("./signature"),u=e("./zipEntry"),c=e("./support"),l=e("./object");r.prototype={checkSignature:function(e){var t=this.reader.readString(4);if(t!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+o.pretty(t)+", expected "+o.pretty(e)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=l.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44,i=0;n>i;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readString(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===s.CENTRAL_FILE_HEADER;)e=new u({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(-1===e)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(e),this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===e)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(e){var t=o.getTypeOf(e);this.reader="string"!==t||c.uint8array?"nodebuffer"===t?new i(e):new a(o.transformTo("uint8array",e)):new n(e,this.loadOptions.optimizedBinaryString)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=r},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(e,t){"use strict";function r(e,t){this.options=e,this.loadOptions=t}var n=e("./stringReader"),i=e("./utils"),a=e("./compressedObject"),o=e("./object");r.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(e,t,r){return function(){var n=e.index;e.setIndex(t);var i=e.readData(r);return e.setIndex(n),i}},prepareContent:function(e,t,r,n,a){return function(){var e=i.transformTo(n.uncompressInputType,this.getCompressedContent()),t=n.uncompress(e);if(t.length!==a)throw new Error("Bug : uncompressed data size mismatch");return t}},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readString(this.fileNameLength),e.skip(r),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(t=i.findCompression(this.compressionMethod),null===t)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=i.transformTo("string",this.decompressed.getContent()),o.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readString(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readString(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readString(this.fileCommentLength),this.dir=!!(16&this.externalFileAttributes)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=new n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index;for(this.extraFields=this.extraFields||{};e.index<i+this.extraFieldsLength;)t=e.readInt(2),r=e.readInt(2),n=e.readString(r),this.extraFields[t]={id:t,length:r,value:n}},handleUTF8:function(){if(this.useUTF8())this.fileName=o.utf8decode(this.fileName),this.fileComment=o.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();null!==e&&(this.fileName=e);var t=this.findExtraFieldUnicodeComment();null!==t&&(this.fileComment=t)}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=new n(e.value);return 1!==t.readInt(1)?null:o.crc32(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readString(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=new n(e.value);return 1!==t.readInt(1)?null:o.crc32(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readString(e.length-5))}return null}},t.exports=r},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(e,t){"use strict";var r=e("./lib/utils/common").assign,n=e("./lib/deflate"),i=e("./lib/inflate"),a=e("./lib/zlib/constants"),o={};r(o,n,i,a),t.exports=o},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(e,t,r){"use strict";function n(e,t){var r=new y(t);if(r.push(e,!0),r.err)throw r.msg;return r.result}function i(e,t){return t=t||{},t.raw=!0,n(e,t)}function a(e,t){return t=t||{},t.gzip=!0,n(e,t)}var o=e("./zlib/deflate.js"),s=e("./utils/common"),u=e("./utils/strings"),c=e("./zlib/messages"),l=e("./zlib/zstream"),d=0,f=4,h=0,p=1,m=-1,_=0,E=8,y=function(e){this.options=s.assign({level:m,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==h)throw new Error(c[r]);t.header&&o.deflateSetHeader(this.strm,t.header)};y.prototype.push=function(e,t){var r,n,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:t===!0?f:d,i.input="string"==typeof e?u.string2buf(e):e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new s.Buf8(a),i.next_out=0,i.avail_out=a),r=o.deflate(i,n),r!==p&&r!==h)return this.onEnd(r),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&n===f)&&this.onData("string"===this.options.to?u.buf2binstring(s.shrinkBuf(i.output,i.next_out)):s.shrinkBuf(i.output,i.next_out))}while((i.avail_in>0||0===i.avail_out)&&r!==p);return n!==f||(r=o.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===h)},y.prototype.onData=function(e){this.chunks.push(e)},y.prototype.onEnd=function(e){e===h&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=y,r.deflate=n,r.deflateRaw=i,r.gzip=a},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(e,t,r){"use strict";function n(e,t){var r=new f(t);if(r.push(e,!0),
r.err)throw r.msg;return r.result}function i(e,t){return t=t||{},t.raw=!0,n(e,t)}var a=e("./zlib/inflate.js"),o=e("./utils/common"),s=e("./utils/strings"),u=e("./zlib/constants"),c=e("./zlib/messages"),l=e("./zlib/zstream"),d=e("./zlib/gzheader"),f=function(e){this.options=o.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=a.inflateInit2(this.strm,t.windowBits);if(r!==u.Z_OK)throw new Error(c[r]);this.header=new d,a.inflateGetHeader(this.strm,this.header)};f.prototype.push=function(e,t){var r,n,i,c,l,d=this.strm,f=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:t===!0?u.Z_FINISH:u.Z_NO_FLUSH,d.input="string"==typeof e?s.binstring2buf(e):e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new o.Buf8(f),d.next_out=0,d.avail_out=f),r=a.inflate(d,u.Z_NO_FLUSH),r!==u.Z_STREAM_END&&r!==u.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0===d.avail_out||r===u.Z_STREAM_END||0===d.avail_in&&n===u.Z_FINISH)&&("string"===this.options.to?(i=s.utf8border(d.output,d.next_out),c=d.next_out-i,l=s.buf2string(d.output,i),d.next_out=c,d.avail_out=f-c,c&&o.arraySet(d.output,d.output,i,c,0),this.onData(l)):this.onData(o.shrinkBuf(d.output,d.next_out)))}while(d.avail_in>0&&r!==u.Z_STREAM_END);return r===u.Z_STREAM_END&&(n=u.Z_FINISH),n!==u.Z_FINISH||(r=a.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===u.Z_OK)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===u.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=f,r.inflate=n,r.inflateRaw=i,r.ungzip=n},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(r,r+n),i);for(var a=0;n>a;a++)e[i+a]=t[r+a]},flattenChunks:function(e){var t,r,n,i,a,o;for(n=0,t=0,r=e.length;r>t;t++)n+=e[t].length;for(o=new Uint8Array(n),i=0,t=0,r=e.length;r>t;t++)a=e[t],o.set(a,i),i+=a.length;return o}},a={arraySet:function(e,t,r,n,i){for(var a=0;n>a;a++)e[i+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(n)},{}],28:[function(e,t,r){"use strict";function n(e,t){if(65537>t&&(e.subarray&&o||!e.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var r="",n=0;t>n;n++)r+=String.fromCharCode(e[n]);return r}var i=e("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new i.Buf8(256),u=0;256>u;u++)s[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;s[254]=s[254]=1,r.string2buf=function(e){var t,r,n,a,o,s=e.length,u=0;for(a=0;s>a;a++)r=e.charCodeAt(a),55296===(64512&r)&&s>a+1&&(n=e.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),u+=128>r?1:2048>r?2:65536>r?3:4;for(t=new i.Buf8(u),o=0,a=0;u>o;a++)r=e.charCodeAt(a),55296===(64512&r)&&s>a+1&&(n=e.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),128>r?t[o++]=r:2048>r?(t[o++]=192|r>>>6,t[o++]=128|63&r):65536>r?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},r.buf2binstring=function(e){return n(e,e.length)},r.binstring2buf=function(e){for(var t=new i.Buf8(e.length),r=0,n=t.length;n>r;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,i,a,o,u=t||e.length,c=new Array(2*u);for(i=0,r=0;u>r;)if(a=e[r++],128>a)c[i++]=a;else if(o=s[a],o>4)c[i++]=65533,r+=o-1;else{for(a&=2===o?31:3===o?15:7;o>1&&u>r;)a=a<<6|63&e[r++],o--;o>1?c[i++]=65533:65536>a?c[i++]=a:(a-=65536,c[i++]=55296|a>>10&1023,c[i++]=56320|1023&a)}return n(c,i)},r.utf8border=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&128===(192&e[r]);)r--;return 0>r?t:0===r?t:r+s[e[r]]>t?r:t}},{"./common":27}],29:[function(e,t){"use strict";function r(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){o=r>2e3?2e3:r,r-=o;do i=i+t[n++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0}t.exports=r},{}],30:[function(e,t){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(e,t){"use strict";function r(){for(var e,t=[],r=0;256>r;r++){e=r;for(var n=0;8>n;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}function n(e,t,r,n){var a=i,o=n+r;e^=-1;for(var s=n;o>s;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}var i=r();t.exports=n},{}],32:[function(e,t,r){"use strict";function n(e,t){return e.msg=M[t],t}function i(e){return(e<<1)-(e>4?9:0)}function a(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(x.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function s(e,t){C._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,o(e.strm)}function u(e,t){e.pending_buf[e.pending++]=t}function c(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function l(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,x.arraySet(t,e.input,e.next_in,i,r),1===e.state.wrap?e.adler=N(e.adler,t,i,r):2===e.state.wrap&&(e.adler=b(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function d(e,t){var r,n,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-ce?e.strstart-(e.w_size-ce):0,c=e.window,l=e.w_mask,d=e.prev,f=e.strstart+ue,h=c[a+o-1],p=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do if(r=t,c[r+o]===p&&c[r+o-1]===h&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do;while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&f>a);if(n=ue-(f-a),a=f-ue,n>o){if(e.match_start=t,o=n,n>=s)break;h=c[a+o-1],p=c[a+o]}}while((t=d[t&l])>u&&0!==--i);return o<=e.lookahead?o:e.lookahead}function f(e){var t,r,n,i,a,o=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-ce)){x.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,r=e.hash_size,t=r;do n=e.head[--t],e.head[t]=n>=o?n-o:0;while(--r);r=o,t=r;do n=e.prev[--t],e.prev[t]=n>=o?n-o:0;while(--r);i+=o}if(0===e.strm.avail_in)break;if(r=l(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=se)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+se-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<se)););}while(e.lookahead<ce&&0!==e.strm.avail_in)}function h(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(f(e),0===e.lookahead&&t===U)return ye;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,s(e,!1),0===e.strm.avail_out))return ye;if(e.strstart-e.block_start>=e.w_size-ce&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===L?(s(e,!0),0===e.strm.avail_out?ve:Te):e.strstart>e.block_start&&(s(e,!1),0===e.strm.avail_out)?ye:ye}function p(e,t){for(var r,n;;){if(e.lookahead<ce){if(f(e),e.lookahead<ce&&t===U)return ye;if(0===e.lookahead)break}if(r=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-ce&&(e.match_length=d(e,r)),e.match_length>=se)if(n=C._tr_tally(e,e.strstart-e.match_start,e.match_length-se),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=se){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=e.strstart<se-1?e.strstart:se-1,t===L?(s(e,!0),0===e.strm.avail_out?ve:Te):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:ge}function m(e,t){for(var r,n,i;;){if(e.lookahead<ce){if(f(e),e.lookahead<ce&&t===U)return ye;if(0===e.lookahead)break}if(r=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=se-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-ce&&(e.match_length=d(e,r),e.match_length<=5&&(e.strategy===W||e.match_length===se&&e.strstart-e.match_start>4096)&&(e.match_length=se-1)),e.prev_length>=se&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-se,n=C._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-se),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=se-1,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return ye}else if(e.match_available){if(n=C._tr_tally(e,0,e.window[e.strstart-1]),n&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ye}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=C._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<se-1?e.strstart:se-1,t===L?(s(e,!0),0===e.strm.avail_out?ve:Te):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:ge}function _(e,t){for(var r,n,i,a,o=e.window;;){if(e.lookahead<=ue){if(f(e),e.lookahead<=ue&&t===U)return ye;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=se&&e.strstart>0&&(i=e.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){a=e.strstart+ue;do;while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&a>i);e.match_length=ue-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=se?(r=C._tr_tally(e,1,e.match_length-se),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===L?(s(e,!0),0===e.strm.avail_out?ve:Te):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:ge}function E(e,t){for(var r;;){if(0===e.lookahead&&(f(e),0===e.lookahead)){if(t===U)return ye;break}if(e.match_length=0,r=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===L?(s(e,!0),0===e.strm.avail_out?ve:Te):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:ge}function y(e){e.window_size=2*e.w_size,a(e.head),e.max_lazy_match=O[e.level].max_lazy,e.good_match=O[e.level].good_length,e.nice_match=O[e.level].nice_length,e.max_chain_length=O[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=se-1,e.match_available=0,e.ins_h=0}function g(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new x.Buf16(2*ae),this.dyn_dtree=new x.Buf16(2*(2*ne+1)),this.bl_tree=new x.Buf16(2*(2*ie+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new x.Buf16(oe+1),this.heap=new x.Buf16(2*re+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new x.Buf16(2*re+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Z,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?de:_e,e.adler=2===t.wrap?0:1,t.last_flush=U,C._tr_init(t),z):n(e,k)}function T(e){var t=v(e);return t===z&&y(e.state),t}function w(e,t){return e&&e.state?2!==e.state.wrap?k:(e.state.gzhead=t,z):k}function R(e,t,r,i,a,o){if(!e)return k;var s=1;if(t===V&&(t=6),0>i?(s=0,i=-i):i>15&&(s=2,i-=16),1>a||a>J||r!==K||8>i||i>15||0>t||t>9||0>o||o>Y)return n(e,k);8===i&&(i=9);var u=new g;return e.state=u,u.strm=e,u.wrap=s,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+se-1)/se),u.window=new x.Buf8(2*u.w_size),u.head=new x.Buf16(u.hash_size),u.prev=new x.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new x.Buf8(u.pending_buf_size),u.d_buf=u.lit_bufsize>>1,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=o,u.method=r,T(e)}function A(e,t){return R(e,t,K,Q,$,j)}function S(e,t){var r,s,l,d;if(!e||!e.state||t>B||0>t)return e?n(e,k):k;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===Ee&&t!==L)return n(e,0===e.avail_out?G:k);if(s.strm=e,r=s.last_flush,s.last_flush=t,s.status===de)if(2===s.wrap)e.adler=0,u(s,31),u(s,139),u(s,8),s.gzhead?(u(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),u(s,255&s.gzhead.time),u(s,s.gzhead.time>>8&255),u(s,s.gzhead.time>>16&255),u(s,s.gzhead.time>>24&255),u(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),u(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(u(s,255&s.gzhead.extra.length),u(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=b(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=fe):(u(s,0),u(s,0),u(s,0),u(s,0),u(s,0),u(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),u(s,we),s.status=_e);else{var f=K+(s.w_bits-8<<4)<<8,h=-1;h=s.strategy>=X||s.level<2?0:s.level<6?1:6===s.level?2:3,f|=h<<6,0!==s.strstart&&(f|=le),f+=31-f%31,s.status=_e,c(s,f),0!==s.strstart&&(c(s,e.adler>>>16),c(s,65535&e.adler)),e.adler=1}if(s.status===fe)if(s.gzhead.extra){for(l=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>l&&(e.adler=b(e.adler,s.pending_buf,s.pending-l,l)),o(e),l=s.pending,s.pending!==s.pending_buf_size));)u(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>l&&(e.adler=b(e.adler,s.pending_buf,s.pending-l,l)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=he)}else s.status=he;if(s.status===he)if(s.gzhead.name){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(e.adler=b(e.adler,s.pending_buf,s.pending-l,l)),o(e),l=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,u(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>l&&(e.adler=b(e.adler,s.pending_buf,s.pending-l,l)),0===d&&(s.gzindex=0,s.status=pe)}else s.status=pe;if(s.status===pe)if(s.gzhead.comment){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(e.adler=b(e.adler,s.pending_buf,s.pending-l,l)),o(e),l=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,u(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>l&&(e.adler=b(e.adler,s.pending_buf,s.pending-l,l)),0===d&&(s.status=me)}else s.status=me;if(s.status===me&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&o(e),s.pending+2<=s.pending_buf_size&&(u(s,255&e.adler),u(s,e.adler>>8&255),e.adler=0,s.status=_e)):s.status=_e),0!==s.pending){if(o(e),0===e.avail_out)return s.last_flush=-1,z}else if(0===e.avail_in&&i(t)<=i(r)&&t!==L)return n(e,G);if(s.status===Ee&&0!==e.avail_in)return n(e,G);if(0!==e.avail_in||0!==s.lookahead||t!==U&&s.status!==Ee){var p=s.strategy===X?E(s,t):s.strategy===H?_(s,t):O[s.level].func(s,t);if((p===ve||p===Te)&&(s.status=Ee),p===ye||p===ve)return 0===e.avail_out&&(s.last_flush=-1),z;if(p===ge&&(t===P?C._tr_align(s):t!==B&&(C._tr_stored_block(s,0,0,!1),t===D&&(a(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),o(e),0===e.avail_out))return s.last_flush=-1,z}return t!==L?z:s.wrap<=0?F:(2===s.wrap?(u(s,255&e.adler),u(s,e.adler>>8&255),u(s,e.adler>>16&255),u(s,e.adler>>24&255),u(s,255&e.total_in),u(s,e.total_in>>8&255),u(s,e.total_in>>16&255),u(s,e.total_in>>24&255)):(c(s,e.adler>>>16),c(s,65535&e.adler)),o(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?z:F)}function I(e){var t;return e&&e.state?(t=e.state.status,t!==de&&t!==fe&&t!==he&&t!==pe&&t!==me&&t!==_e&&t!==Ee?n(e,k):(e.state=null,t===_e?n(e,q):z)):k}var O,x=e("../utils/common"),C=e("./trees"),N=e("./adler32"),b=e("./crc32"),M=e("./messages"),U=0,P=1,D=3,L=4,B=5,z=0,F=1,k=-2,q=-3,G=-5,V=-1,W=1,X=2,H=3,Y=4,j=0,Z=2,K=8,J=9,Q=15,$=8,ee=29,te=256,re=te+1+ee,ne=30,ie=19,ae=2*re+1,oe=15,se=3,ue=258,ce=ue+se+1,le=32,de=42,fe=69,he=73,pe=91,me=103,_e=113,Ee=666,ye=1,ge=2,ve=3,Te=4,we=3,Re=function(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i};O=[new Re(0,0,0,0,h),new Re(4,4,8,4,p),new Re(4,5,16,8,p),new Re(4,6,32,32,p),new Re(4,4,16,16,m),new Re(8,16,32,32,m),new Re(8,16,128,128,m),new Re(8,32,128,256,m),new Re(32,128,258,1024,m),new Re(32,258,258,4096,m)],r.deflateInit=A,r.deflateInit2=R,r.deflateReset=T,r.deflateResetKeep=v,r.deflateSetHeader=w,r.deflate=S,r.deflateEnd=I,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(e,t){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=r},{}],34:[function(e,t){"use strict";var r=30,n=12;t.exports=function(e,t){var i,a,o,s,u,c,l,d,f,h,p,m,_,E,y,g,v,T,w,R,A,S,I,O,x;i=e.state,a=e.next_in,O=e.input,o=a+(e.avail_in-5),s=e.next_out,x=e.output,u=s-(t-e.avail_out),c=s+(e.avail_out-257),l=i.dmax,d=i.wsize,f=i.whave,h=i.wnext,p=i.window,m=i.hold,_=i.bits,E=i.lencode,y=i.distcode,g=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;e:do{15>_&&(m+=O[a++]<<_,_+=8,m+=O[a++]<<_,_+=8),T=E[m&g];t:for(;;){if(w=T>>>24,m>>>=w,_-=w,w=T>>>16&255,0===w)x[s++]=65535&T;else{if(!(16&w)){if(0===(64&w)){T=E[(65535&T)+(m&(1<<w)-1)];continue t}if(32&w){i.mode=n;break e}e.msg="invalid literal/length code",i.mode=r;break e}R=65535&T,w&=15,w&&(w>_&&(m+=O[a++]<<_,_+=8),R+=m&(1<<w)-1,m>>>=w,_-=w),15>_&&(m+=O[a++]<<_,_+=8,m+=O[a++]<<_,_+=8),T=y[m&v];r:for(;;){if(w=T>>>24,m>>>=w,_-=w,w=T>>>16&255,!(16&w)){if(0===(64&w)){T=y[(65535&T)+(m&(1<<w)-1)];continue r}e.msg="invalid distance code",i.mode=r;break e}if(A=65535&T,w&=15,w>_&&(m+=O[a++]<<_,_+=8,w>_&&(m+=O[a++]<<_,_+=8)),A+=m&(1<<w)-1,A>l){e.msg="invalid distance too far back",i.mode=r;break e}if(m>>>=w,_-=w,w=s-u,A>w){if(w=A-w,w>f&&i.sane){e.msg="invalid distance too far back",i.mode=r;break e}if(S=0,I=p,0===h){if(S+=d-w,R>w){R-=w;do x[s++]=p[S++];while(--w);S=s-A,I=x}}else if(w>h){if(S+=d+h-w,w-=h,R>w){R-=w;do x[s++]=p[S++];while(--w);if(S=0,R>h){w=h,R-=w;do x[s++]=p[S++];while(--w);S=s-A,I=x}}}else if(S+=h-w,R>w){R-=w;do x[s++]=p[S++];while(--w);S=s-A,I=x}for(;R>2;)x[s++]=I[S++],x[s++]=I[S++],x[s++]=I[S++],R-=3;R&&(x[s++]=I[S++],R>1&&(x[s++]=I[S++]))}else{S=s-A;do x[s++]=x[S++],x[s++]=x[S++],x[s++]=x[S++],R-=3;while(R>2);R&&(x[s++]=x[S++],R>1&&(x[s++]=x[S++]))}break}}break}}while(o>a&&c>s);R=_>>3,a-=R,_-=R<<3,m&=(1<<_)-1,e.next_in=a,e.next_out=s,e.avail_in=o>a?5+(o-a):5-(a-o),e.avail_out=c>s?257+(c-s):257-(s-c),i.hold=m,i.bits=_}},{}],35:[function(e,t,r){"use strict";function n(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new E.Buf16(320),this.work=new E.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=L,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new E.Buf32(pe),t.distcode=t.distdyn=new E.Buf32(me),t.sane=1,t.back=-1,x):b}function o(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,a(e)):b}function s(e,t){var r,n;return e&&e.state?(n=e.state,0>t?(r=0,t=-t):(r=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?b:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,o(e))):b}function u(e,t){var r,n;return e?(n=new i,e.state=n,n.window=null,r=s(e,t),r!==x&&(e.state=null),r):b}function c(e){return u(e,Ee)}function l(e){if(ye){var t;for(m=new E.Buf32(512),_=new E.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(T(R,e.lens,0,288,m,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;T(A,e.lens,0,32,_,0,e.work,{bits:5}),ye=!1}e.lencode=m,e.lenbits=9,e.distcode=_,e.distbits=5}function d(e,t,r,n){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new E.Buf8(a.wsize)),n>=a.wsize?(E.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),E.arraySet(a.window,t,r-n,i,a.wnext),n-=i,n?(E.arraySet(a.window,t,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function f(e,t){var r,i,a,o,s,u,c,f,h,p,m,_,pe,me,_e,Ee,ye,ge,ve,Te,we,Re,Ae,Se,Ie=0,Oe=new E.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return b;r=e.state,r.mode===Y&&(r.mode=j),s=e.next_out,a=e.output,c=e.avail_out,o=e.next_in,i=e.input,u=e.avail_in,f=r.hold,h=r.bits,p=u,m=c,Re=x;e:for(;;)switch(r.mode){case L:if(0===r.wrap){r.mode=j;break}for(;16>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}if(2&r.wrap&&35615===f){r.check=0,Oe[0]=255&f,Oe[1]=f>>>8&255,r.check=g(r.check,Oe,2,0),f=0,h=0,r.mode=B;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=de;break}if((15&f)!==D){e.msg="unknown compression method",r.mode=de;break}if(f>>>=4,h-=4,we=(15&f)+8,0===r.wbits)r.wbits=we;else if(we>r.wbits){e.msg="invalid window size",r.mode=de;break}r.dmax=1<<we,e.adler=r.check=1,r.mode=512&f?X:Y,f=0,h=0;break;case B:for(;16>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}if(r.flags=f,(255&r.flags)!==D){e.msg="unknown compression method",r.mode=de;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=de;break}r.head&&(r.head.text=f>>8&1),512&r.flags&&(Oe[0]=255&f,Oe[1]=f>>>8&255,r.check=g(r.check,Oe,2,0)),f=0,h=0,r.mode=z;case z:for(;32>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}r.head&&(r.head.time=f),512&r.flags&&(Oe[0]=255&f,Oe[1]=f>>>8&255,Oe[2]=f>>>16&255,Oe[3]=f>>>24&255,r.check=g(r.check,Oe,4,0)),f=0,h=0,r.mode=F;case F:for(;16>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}r.head&&(r.head.xflags=255&f,r.head.os=f>>8),512&r.flags&&(Oe[0]=255&f,Oe[1]=f>>>8&255,r.check=g(r.check,Oe,2,0)),f=0,h=0,r.mode=k;case k:if(1024&r.flags){for(;16>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}r.length=f,r.head&&(r.head.extra_len=f),512&r.flags&&(Oe[0]=255&f,Oe[1]=f>>>8&255,r.check=g(r.check,Oe,2,0)),f=0,h=0}else r.head&&(r.head.extra=null);r.mode=q;case q:if(1024&r.flags&&(_=r.length,_>u&&(_=u),_&&(r.head&&(we=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),E.arraySet(r.head.extra,i,o,_,we)),512&r.flags&&(r.check=g(r.check,i,_,o)),u-=_,o+=_,r.length-=_),r.length))break e;r.length=0,r.mode=G;case G:if(2048&r.flags){if(0===u)break e;_=0;do we=i[o+_++],r.head&&we&&r.length<65536&&(r.head.name+=String.fromCharCode(we));while(we&&u>_);if(512&r.flags&&(r.check=g(r.check,i,_,o)),u-=_,o+=_,we)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=V;case V:if(4096&r.flags){if(0===u)break e;_=0;do we=i[o+_++],r.head&&we&&r.length<65536&&(r.head.comment+=String.fromCharCode(we));while(we&&u>_);if(512&r.flags&&(r.check=g(r.check,i,_,o)),u-=_,o+=_,we)break e}else r.head&&(r.head.comment=null);r.mode=W;case W:if(512&r.flags){for(;16>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}if(f!==(65535&r.check)){e.msg="header crc mismatch",r.mode=de;break}f=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Y;break;case X:for(;32>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}e.adler=r.check=n(f),f=0,h=0,r.mode=H;case H:if(0===r.havedict)return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=u,r.hold=f,r.bits=h,N;e.adler=r.check=1,r.mode=Y;case Y:if(t===I||t===O)break e;case j:if(r.last){f>>>=7&h,h-=7&h,r.mode=ue;break}for(;3>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}switch(r.last=1&f,f>>>=1,h-=1,3&f){case 0:r.mode=Z;break;case 1:if(l(r),r.mode=te,t===O){f>>>=2,h-=2;break e}break;case 2:r.mode=Q;break;case 3:e.msg="invalid block type",r.mode=de}f>>>=2,h-=2;break;case Z:for(f>>>=7&h,h-=7&h;32>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}if((65535&f)!==(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=de;break}if(r.length=65535&f,f=0,h=0,r.mode=K,t===O)break e;case K:r.mode=J;case J:if(_=r.length){if(_>u&&(_=u),_>c&&(_=c),0===_)break e;E.arraySet(a,i,o,_,s),u-=_,o+=_,c-=_,s+=_,r.length-=_;break}r.mode=Y;break;case Q:for(;14>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}if(r.nlen=(31&f)+257,f>>>=5,h-=5,r.ndist=(31&f)+1,f>>>=5,h-=5,r.ncode=(15&f)+4,f>>>=4,h-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=de;break}r.have=0,r.mode=$;case $:for(;r.have<r.ncode;){for(;3>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}r.lens[xe[r.have++]]=7&f,f>>>=3,h-=3}for(;r.have<19;)r.lens[xe[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Ae={bits:r.lenbits},Re=T(w,r.lens,0,19,r.lencode,0,r.work,Ae),r.lenbits=Ae.bits,Re){e.msg="invalid code lengths set",r.mode=de;break}r.have=0,r.mode=ee;case ee:for(;r.have<r.nlen+r.ndist;){for(;Ie=r.lencode[f&(1<<r.lenbits)-1],_e=Ie>>>24,Ee=Ie>>>16&255,ye=65535&Ie,!(h>=_e);){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}if(16>ye)f>>>=_e,h-=_e,r.lens[r.have++]=ye;else{if(16===ye){for(Se=_e+2;Se>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}if(f>>>=_e,h-=_e,0===r.have){e.msg="invalid bit length repeat",r.mode=de;break}we=r.lens[r.have-1],_=3+(3&f),f>>>=2,h-=2}else if(17===ye){for(Se=_e+3;Se>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}f>>>=_e,h-=_e,we=0,_=3+(7&f),f>>>=3,h-=3}else{for(Se=_e+7;Se>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}f>>>=_e,h-=_e,we=0,_=11+(127&f),f>>>=7,h-=7}if(r.have+_>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=de;break}for(;_--;)r.lens[r.have++]=we}}if(r.mode===de)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=de;break}if(r.lenbits=9,Ae={bits:r.lenbits},Re=T(R,r.lens,0,r.nlen,r.lencode,0,r.work,Ae),r.lenbits=Ae.bits,Re){e.msg="invalid literal/lengths set",r.mode=de;break}if(r.distbits=6,r.distcode=r.distdyn,Ae={bits:r.distbits},Re=T(A,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Ae),r.distbits=Ae.bits,Re){e.msg="invalid distances set",r.mode=de;break}if(r.mode=te,t===O)break e;case te:r.mode=re;case re:if(u>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=u,r.hold=f,r.bits=h,v(e,m),s=e.next_out,a=e.output,c=e.avail_out,o=e.next_in,i=e.input,u=e.avail_in,f=r.hold,h=r.bits,r.mode===Y&&(r.back=-1);break}for(r.back=0;Ie=r.lencode[f&(1<<r.lenbits)-1],_e=Ie>>>24,Ee=Ie>>>16&255,ye=65535&Ie,!(h>=_e);){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}if(Ee&&0===(240&Ee)){for(ge=_e,ve=Ee,Te=ye;Ie=r.lencode[Te+((f&(1<<ge+ve)-1)>>ge)],_e=Ie>>>24,Ee=Ie>>>16&255,ye=65535&Ie,!(h>=ge+_e);){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}f>>>=ge,h-=ge,r.back+=ge}if(f>>>=_e,h-=_e,r.back+=_e,r.length=ye,0===Ee){r.mode=se;break}if(32&Ee){r.back=-1,r.mode=Y;break}if(64&Ee){e.msg="invalid literal/length code",r.mode=de;break}r.extra=15&Ee,r.mode=ne;case ne:if(r.extra){for(Se=r.extra;Se>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ie;case ie:for(;Ie=r.distcode[f&(1<<r.distbits)-1],_e=Ie>>>24,Ee=Ie>>>16&255,ye=65535&Ie,!(h>=_e);){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}if(0===(240&Ee)){for(ge=_e,ve=Ee,Te=ye;Ie=r.distcode[Te+((f&(1<<ge+ve)-1)>>ge)],_e=Ie>>>24,Ee=Ie>>>16&255,ye=65535&Ie,!(h>=ge+_e);){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}f>>>=ge,h-=ge,r.back+=ge}if(f>>>=_e,h-=_e,r.back+=_e,64&Ee){e.msg="invalid distance code",r.mode=de;break}r.offset=ye,r.extra=15&Ee,r.mode=ae;case ae:if(r.extra){for(Se=r.extra;Se>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=de;break}r.mode=oe;case oe:if(0===c)break e;if(_=m-c,r.offset>_){if(_=r.offset-_,_>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=de;break}_>r.wnext?(_-=r.wnext,pe=r.wsize-_):pe=r.wnext-_,_>r.length&&(_=r.length),me=r.window}else me=a,pe=s-r.offset,_=r.length;_>c&&(_=c),c-=_,r.length-=_;do a[s++]=me[pe++];while(--_);0===r.length&&(r.mode=re);break;case se:if(0===c)break e;a[s++]=r.length,c--,r.mode=re;break;case ue:if(r.wrap){for(;32>h;){if(0===u)break e;u--,f|=i[o++]<<h,h+=8}if(m-=c,e.total_out+=m,r.total+=m,m&&(e.adler=r.check=r.flags?g(r.check,a,m,s-m):y(r.check,a,m,s-m)),m=c,(r.flags?f:n(f))!==r.check){e.msg="incorrect data check",r.mode=de;break}f=0,h=0}r.mode=ce;case ce:if(r.wrap&&r.flags){for(;32>h;){if(0===u)break e;u--,f+=i[o++]<<h,h+=8}if(f!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=de;break}f=0,h=0}r.mode=le;case le:Re=C;break e;case de:Re=M;break e;case fe:return U;case he:default:return b}return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=u,r.hold=f,r.bits=h,(r.wsize||m!==e.avail_out&&r.mode<de&&(r.mode<ue||t!==S))&&d(e,e.output,e.next_out,m-e.avail_out)?(r.mode=fe,U):(p-=e.avail_in,
m-=e.avail_out,e.total_in+=p,e.total_out+=m,r.total+=m,r.wrap&&m&&(e.adler=r.check=r.flags?g(r.check,a,m,e.next_out-m):y(r.check,a,m,e.next_out-m)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Y?128:0)+(r.mode===te||r.mode===K?256:0),(0===p&&0===m||t===S)&&Re===x&&(Re=P),Re)}function h(e){if(!e||!e.state)return b;var t=e.state;return t.window&&(t.window=null),e.state=null,x}function p(e,t){var r;return e&&e.state?(r=e.state,0===(2&r.wrap)?b:(r.head=t,t.done=!1,x)):b}var m,_,E=e("../utils/common"),y=e("./adler32"),g=e("./crc32"),v=e("./inffast"),T=e("./inftrees"),w=0,R=1,A=2,S=4,I=5,O=6,x=0,C=1,N=2,b=-2,M=-3,U=-4,P=-5,D=8,L=1,B=2,z=3,F=4,k=5,q=6,G=7,V=8,W=9,X=10,H=11,Y=12,j=13,Z=14,K=15,J=16,Q=17,$=18,ee=19,te=20,re=21,ne=22,ie=23,ae=24,oe=25,se=26,ue=27,ce=28,le=29,de=30,fe=31,he=32,pe=852,me=592,_e=15,Ee=_e,ye=!0;r.inflateReset=o,r.inflateReset2=s,r.inflateResetKeep=a,r.inflateInit=c,r.inflateInit2=u,r.inflate=f,r.inflateEnd=h,r.inflateGetHeader=p,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(e,t){"use strict";var r=e("../utils/common"),n=15,i=852,a=592,o=0,s=1,u=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,h,p,m,_,E,y){var g,v,T,w,R,A,S,I,O,x=y.bits,C=0,N=0,b=0,M=0,U=0,P=0,D=0,L=0,B=0,z=0,F=null,k=0,q=new r.Buf16(n+1),G=new r.Buf16(n+1),V=null,W=0;for(C=0;n>=C;C++)q[C]=0;for(N=0;p>N;N++)q[t[h+N]]++;for(U=x,M=n;M>=1&&0===q[M];M--);if(U>M&&(U=M),0===M)return m[_++]=20971520,m[_++]=20971520,y.bits=1,0;for(b=1;M>b&&0===q[b];b++);for(b>U&&(U=b),L=1,C=1;n>=C;C++)if(L<<=1,L-=q[C],0>L)return-1;if(L>0&&(e===o||1!==M))return-1;for(G[1]=0,C=1;n>C;C++)G[C+1]=G[C]+q[C];for(N=0;p>N;N++)0!==t[h+N]&&(E[G[t[h+N]]++]=N);if(e===o?(F=V=E,A=19):e===s?(F=c,k-=257,V=l,W-=257,A=256):(F=d,V=f,A=-1),z=0,N=0,C=b,R=_,P=U,D=0,T=-1,B=1<<U,w=B-1,e===s&&B>i||e===u&&B>a)return 1;for(var X=0;;){X++,S=C-D,E[N]<A?(I=0,O=E[N]):E[N]>A?(I=V[W+E[N]],O=F[k+E[N]]):(I=96,O=0),g=1<<C-D,v=1<<P,b=v;do v-=g,m[R+(z>>D)+v]=S<<24|I<<16|O|0;while(0!==v);for(g=1<<C-1;z&g;)g>>=1;if(0!==g?(z&=g-1,z+=g):z=0,N++,0===--q[C]){if(C===M)break;C=t[h+E[N]]}if(C>U&&(z&w)!==T){for(0===D&&(D=U),R+=b,P=C-D,L=1<<P;M>P+D&&(L-=q[P+D],!(0>=L));)P++,L<<=1;if(B+=1<<P,e===s&&B>i||e===u&&B>a)return 1;T=z&w,m[T]=U<<24|P<<16|R-_|0}}return 0!==z&&(m[R+z]=C-D<<24|64<<16|0),y.bits=U,0}},{"../utils/common":27}],37:[function(e,t){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(e,t,r){"use strict";function n(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e){return 256>e?oe[e]:oe[256+(e>>>7)]}function a(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function o(e,t,r){e.bi_valid>Y-r?(e.bi_buf|=t<<e.bi_valid&65535,a(e,e.bi_buf),e.bi_buf=t>>Y-e.bi_valid,e.bi_valid+=r-Y):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function s(e,t,r){o(e,r[2*t],r[2*t+1])}function u(e,t){var r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0);return r>>>1}function c(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function l(e,t){var r,n,i,a,o,s,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(a=0;H>=a;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;X>r;r++)n=e.heap[r],a=u[2*u[2*n+1]+1]+1,a>p&&(a=p,m++),u[2*n+1]=a,n>c||(e.bl_count[a]++,o=0,n>=h&&(o=f[n-h]),s=u[2*n],e.opt_len+=s*(a+o),d&&(e.static_len+=s*(l[2*n+1]+o)));if(0!==m){do{for(a=p-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(a=p;0!==a;a--)for(n=e.bl_count[a];0!==n;)i=e.heap[--r],i>c||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),n--)}}function d(e,t,r){var n,i,a=new Array(H+1),o=0;for(n=1;H>=n;n++)a[n]=o=o+r[n-1]<<1;for(i=0;t>=i;i++){var s=e[2*i+1];0!==s&&(e[2*i]=u(a[s]++,s))}}function f(){var e,t,r,n,i,a=new Array(H+1);for(r=0,n=0;k-1>n;n++)for(ue[n]=r,e=0;e<1<<$[n];e++)se[r++]=n;for(se[r-1]=n,i=0,n=0;16>n;n++)for(ce[n]=i,e=0;e<1<<ee[n];e++)oe[i++]=n;for(i>>=7;V>n;n++)for(ce[n]=i<<7,e=0;e<1<<ee[n]-7;e++)oe[256+i++]=n;for(t=0;H>=t;t++)a[t]=0;for(e=0;143>=e;)ie[2*e+1]=8,e++,a[8]++;for(;255>=e;)ie[2*e+1]=9,e++,a[9]++;for(;279>=e;)ie[2*e+1]=7,e++,a[7]++;for(;287>=e;)ie[2*e+1]=8,e++,a[8]++;for(d(ie,G+1,a),e=0;V>e;e++)ae[2*e+1]=5,ae[2*e]=u(e,5);le=new he(ie,$,q+1,G,H),de=new he(ae,ee,0,V,H),fe=new he(new Array(0),te,0,W,j)}function h(e){var t;for(t=0;G>t;t++)e.dyn_ltree[2*t]=0;for(t=0;V>t;t++)e.dyn_dtree[2*t]=0;for(t=0;W>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Z]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function p(e){e.bi_valid>8?a(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function m(e,t,r,n){p(e),n&&(a(e,r),a(e,~r)),N.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function _(e,t,r,n){var i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function E(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&_(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!_(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function y(e,t,r){var n,a,u,c,l=0;if(0!==e.last_lit)do n=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],a=e.pending_buf[e.l_buf+l],l++,0===n?s(e,a,t):(u=se[a],s(e,u+q+1,t),c=$[u],0!==c&&(a-=ue[u],o(e,a,c)),n--,u=i(n),s(e,u,r),c=ee[u],0!==c&&(n-=ce[u],o(e,n,c)));while(l<e.last_lit);s(e,Z,t)}function g(e,t){var r,n,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=X,r=0;u>r;r++)0!==a[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=2>c?++c:0,a[2*i]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)E(e,a,r);i=u;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],E(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,a[2*i]=a[2*r]+a[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,a[2*r+1]=a[2*n+1]=i,e.heap[1]=i++,E(e,a,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],l(e,t),d(a,c,e.bl_count)}function v(e,t,r){var n,i,a=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;r>=n;n++)i=o,o=t[2*(n+1)+1],++s<u&&i===o||(c>s?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*K]++):10>=s?e.bl_tree[2*J]++:e.bl_tree[2*Q]++,s=0,a=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4))}function T(e,t,r){var n,i,a=-1,u=t[1],c=0,l=7,d=4;for(0===u&&(l=138,d=3),n=0;r>=n;n++)if(i=u,u=t[2*(n+1)+1],!(++c<l&&i===u)){if(d>c){do s(e,i,e.bl_tree);while(0!==--c)}else 0!==i?(i!==a&&(s(e,i,e.bl_tree),c--),s(e,K,e.bl_tree),o(e,c-3,2)):10>=c?(s(e,J,e.bl_tree),o(e,c-3,3)):(s(e,Q,e.bl_tree),o(e,c-11,7));c=0,a=i,0===u?(l=138,d=3):i===u?(l=6,d=3):(l=7,d=4)}}function w(e){var t;for(v(e,e.dyn_ltree,e.l_desc.max_code),v(e,e.dyn_dtree,e.d_desc.max_code),g(e,e.bl_desc),t=W-1;t>=3&&0===e.bl_tree[2*re[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function R(e,t,r,n){var i;for(o(e,t-257,5),o(e,r-1,5),o(e,n-4,4),i=0;n>i;i++)o(e,e.bl_tree[2*re[i]+1],3);T(e,e.dyn_ltree,t-1),T(e,e.dyn_dtree,r-1)}function A(e){var t,r=4093624447;for(t=0;31>=t;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return M;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return U;for(t=32;q>t;t++)if(0!==e.dyn_ltree[2*t])return U;return M}function S(e){me||(f(),me=!0),e.l_desc=new pe(e.dyn_ltree,le),e.d_desc=new pe(e.dyn_dtree,de),e.bl_desc=new pe(e.bl_tree,fe),e.bi_buf=0,e.bi_valid=0,h(e)}function I(e,t,r,n){o(e,(D<<1)+(n?1:0),3),m(e,t,r,!0)}function O(e){o(e,L<<1,3),s(e,Z,ie),c(e)}function x(e,t,r,n){var i,a,s=0;e.level>0?(e.strm.data_type===P&&(e.strm.data_type=A(e)),g(e,e.l_desc),g(e,e.d_desc),s=w(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,i>=a&&(i=a)):i=a=r+5,i>=r+4&&-1!==t?I(e,t,r,n):e.strategy===b||a===i?(o(e,(L<<1)+(n?1:0),3),y(e,ie,ae)):(o(e,(B<<1)+(n?1:0),3),R(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),y(e,e.dyn_ltree,e.dyn_dtree)),h(e),n&&p(e)}function C(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(se[r]+q+1)]++,e.dyn_dtree[2*i(t)]++),e.last_lit===e.lit_bufsize-1}var N=e("../utils/common"),b=4,M=0,U=1,P=2,D=0,L=1,B=2,z=3,F=258,k=29,q=256,G=q+1+k,V=30,W=19,X=2*G+1,H=15,Y=16,j=7,Z=256,K=16,J=17,Q=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=512,ie=new Array(2*(G+2));n(ie);var ae=new Array(2*V);n(ae);var oe=new Array(ne);n(oe);var se=new Array(F-z+1);n(se);var ue=new Array(k);n(ue);var ce=new Array(V);n(ce);var le,de,fe,he=function(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length},pe=function(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t},me=!1;r._tr_init=S,r._tr_stored_block=I,r._tr_flush_block=x,r._tr_tally=C,r._tr_align=O},{"../utils/common":27}],39:[function(e,t){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},{}]},{},[9])(9)}),define("Workers/parserLob",["../Core/Ellipsoid","../Core/HeightmapTessellator","../Core/Rectangle","./createTaskProcessorWorker","./LSJPParser","./LSJMemStream","./LSJPNode","../ThirdParty/jszip.min"],function(e,t,r,n,i,a,o,s){"use strict";function u(e,t){var r=new i,n=void 0,u=new o;if(e.isLobz){var c=new s(e.dataBuffer),l=c.file("data.lob").asArrayBuffer();n=new a(l)}else n=new a(e.dataBuffer);return r.parse(u,n),{data:u}}return n(u)})}();